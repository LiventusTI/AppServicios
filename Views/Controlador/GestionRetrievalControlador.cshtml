
@{
    ViewBag.Title = "GestionRetrievalControlador";
    Layout = "~/Views/MasterPage.cshtml";
}

<div class="col-sm-12">
    <div class="x_panel">
        <button type="button" class="btn btn-default tr" id="verVistaCompleta" key="" style="margin-bottom: 10px;">Ver Vista Logística</button>
        <div class="x_panel">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <table id="Tb_Controlador" class="table table-striped table-bordered display nowrap">
                    <thead>
                        <tr>
                            <th class="tr" key="">ALERTA</th>
                            <th class="tr" key="">CONTROLADOR (ESN)</th>
                            <th class="tr" key="">MODEM (ESN)</th>
                            <th class="tr" key="">EN NODO / EN TRANSITO</th>
                            <th class="tr" key="">N° CONTENEDOR</th>
                            <th class="tr" key="">NAVIERA</th>
                            <th class="tr" key="">CONTINENTE ORIGEN</th>
                            <th class="tr" key="">LUGAR ORIGEN</th>
                            <th class="tr" key="">LUGAR DESTINO</th>
                            <th class="tr" key="">ETA</th>
                            <th class="tr" key="">FECHA ARRIBO</th>
                            <th class="tr" key="">NUMERO ENVIO</th>
                            <th class="tr" key="">EMPRESA TRANSPORTE</th>
                            <th class="tr" key="">AÑO SERVICIO</th>
                            <th class="tr" key="">ESTADO SERVICIO</th>
                            <th class="tr" key="">DAMAGE REPORT</th>
                            <th class="tr" key="">PRIORITARIO</th>
                            <th class="tr" key="">TIPO PERDIDA</th>
                            <th class="tr" key="">COMENTARIO PERDIDA</th>
                            <th class="tr" key="">RETRIEVAL PROVIDER NOTIFICADO</th>
                            <th class="tr" key="">NOMBRE R.P. NOTIFICADO</th>
                            <th class="tr" key="">RETRIEVAL PROVIDER RECUPERADOR</th>
                            <th class="tr" key="">FECHA ÚLTIMA ACCIÓN LOGÍSTICA</th>
                            <th class="tr" key="">COORDINADOR MOVIMIENTO</th>
                            <th class="tr" key="">COORDINADOR RECUPERACIÓN</th>
                            <th class="tr" key="">ULT. UBICACION MODEM</th>
                            <th class="tr" key="">FECHA ULT. UBICACION MODEM</th>
                            <th class="tr" key="">ESTADO CONTROLADOR</th>
                            <th class="tr" key="">ESTADO RETRIEVAL</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th class="tr" key="">ALERTA</th>
                            <th class="tr" key="">1.- CONTROLADOR (ESN)</th>
                            <th class="tr" key="">2.- MODEM (ESN)</th>
                            <th class="tr" key="">3.- EN NODO / EN TRANSITO</th>
                            <th class="tr" key="">4.- N° CONTENEDOR</th>
                            <th class="tr" key="">5.- NAVIERA</th>
                            <th class="tr" key="">6.- CONTINENTE ORIGEN</th>
                            <th class="tr" key="">7.- LUGAR ORIGEN</th>
                            <th class="tr" key="">8.- LUGAR DESTINO</th>
                            <th class="tr" key="">9.- ETA</th>
                            <th class="tr" key="">10.- FECHA ARRIBO</th>
                            <th class="tr" key="">11.- NUMERO ENVIO</th>
                            <th class="tr" key="">12.- EMPRESA TRANSPORTE</th>
                            <th class="tr" key="">13.- AÑO SERVICIO</th>
                            <th class="tr" key="">14.- ESTADO SERVICIO</th>
                            <th class="tr" key="">15.- DAMAGE REPORT</th>
                            <th class="tr" key="">16.- PRIORITARIO</th>
                            <th class="tr" key="">17.- TIPO PERDIDA</th>
                            <th class="tr" key="">18.- COMENTARIO PERDIDA</th>
                            <th class="tr" key="">19.- RETRIEVAL PROVIDER NOTIFICADO</th>
                            <th class="tr" key="">20.- NOMBRE R.P. NOTIFICADO</th>
                            <th class="tr" key="">21.- RETRIEVAL PROVIDER ASIGNADO</th>
                            <th class="tr" key="">22.- FECHA ÚLTIMA ACCIÓN LOGÍSTICA</th>
                            <th class="tr" key="">23.- COORDINADOR MOVIMIENTO</th>
                            <th class="tr" key="">24.- COORDINADOR RECUPERACIÓN</th>
                            <th class="tr" key="">25.- ULT. UBICACION MODEM</th>
                            <th class="tr" key="">26.- FECHA ULT. UBICACION MODEM</th>
                            <th class="tr" key="">27.- ESTADO CONTROLADOR</th>
                            <th class="tr" key="">28.- ESTADO RETRIEVAL</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div>
            </div>
            <div class="row">
                <div class="col-lg-5">
                    <form class="form-inline">
                        <div class="form-group">
                            <label for="IdControlador" class="control-label tr" key="numerocontroladoresseleccionados">N° Controladores seleccionados</label>
                            <input type="text" class="input form-control" id="IdControlador" disabled="disabled" style="text-align:center; text-align-last:center;" />
                        </div>

                    </form>
                </div>
            </div>
            <div class="divider"></div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-4" id="Botones">
                    <button type="button" class="btn btn-primary tr" id="Logistica" key="BotonLogistica" style="margin-bottom: 0px;">Logistica</button>
                    <button type="button" class="btn btn-info tr" id="Recuperacion" key="BotonRecuperacion" style="margin-bottom: 0px;">Recuperacion ESN</button>
                    <button type="button" class="btn btn-warning tr" id="Historico" key="BotonHistorico" style="margin-bottom: 0px;">Historial Movimientos Logisticos</button>
                    <button type="button" class="btn btn-danger tr" id="AgregarFalla" key="" style="margin-bottom: 0px;">Asignar Damage Report</button>
                    <button type="button" class="btn btn-success tr" id="QuitarFalla" key="" style="margin-bottom: 0px;">Quitar Damage Report</button>
                    <button type="button" class="btn btn-danger tr" id="EliminarMovLogistico" key="" style="margin-bottom: 0px;">Eliminar Último Mov. Logístico</button>
                </div>
            </div>
        </div>
    </div>

    <!--Modal para Logistica Controlador-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title tr" id="myModalLabel" key="titulologisticacontrolador"> Logistica Controlador</h4>
                </div>
                <div class="modal-body">
                    <div class="row x_panel">
                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <label class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipoaccion">Tipo de Accion</label>
                            <div class="col-md-8 col-sm-8 col-xs-6">
                                <select class="selectpicker form-control Tipo_accion" data-live-search="true" id="Tipo_accion">
                                    <option selected value="0"></option>
                                    <option value="1">INGRESO</option>
                                    <option value="2">SALIDA NODO ESPECIFICO</option>
                                    <option value="4">SALIDA NODOS DIFERENTES</option>
                                    <option value="3">PERDIDA</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div id="Log_ingreso" hidden="hidden">
                        <div class="x_panel">
                            <div class="alert alert-info row" role="alert">
                                <i class="glyphicon glyphicon-info-sign fa-2x" style="vertical-align:middle;"></i>
                                <span style="vertical-align:middle;">Cabe señalar que si un controlador esta asociado a un servicio, se cambiará el estado del servicio a <b>"ARRIVED"</b>.</span>
                            </div>
                        </div>
                        <div class="x_panel">
                            <table id="Tb_Ingreso" class="table table-striped table-bordered display nowrap">
                                <thead>
                                    <tr>
                                        <th class="tr" key="">CONTROLADOR (ESN)</th>
                                        <th class="tr" key="">MODEM (ESN)</th>
                                        <th class="tr" key="">CONTENEDOR</th>
                                        <th class="tr" key="">NAVIERA</th>
                                        <th class="tr" key="">ETA</th>
                                        <th class="tr" key="">NODO DESTINO</th>
                                        <th class="tr" key="">PRIORIZADO</th>
                                        <th class="tr" key="">ESTADO RETRIEVAL</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="x_panel">
                            <form class="form-horizontal">
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label tr" key="tiponodoingreso">ESNs Involucrados en acción (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="Involucrados_ingreso" data-live-search="true">
                                            <option value="0" selected>Seleccione ESNs involucrados</option>
                                            <option value="1">CONTROLADOR Y MODEM</option>
                                            <option value="2">SOLO CONTROLADOR</option>
                                            <option value="3">SOLO MODEM</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1 col-lg-offset-1">
                                        <label id="lb_id" class="control-label tr" key="tiponodoingreso">Tipo Nodo (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="Tipo_nodoIngreso" name="Tipo_nodo" data-live-search="true"></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="controlador">ESN</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="ControladorIngreso" id="ControladorIngreso" />
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Agregar ESN" id="Agregarcontrolador" name="Agregarcontrolador" class="AgregarcontroladorIngreso"><i class="fa fa-plus fa-2x"></i></a>
                                    </div>

                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="continenteingreso">Continente</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="ContinenteIngreso" name="Continente" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="cargamasivaingreso">Carga masiva controladores</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="file" id="ArchivoIngreso" name="Archivo" placeholder="Suba Archivo Excel" class="form-control">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Subir Archivo" id="SubirArchivoIngreso" name="SubirArchivo" class="SubirArchivoIngreso"><i class="fa fa-upload fa-2x"></i></a>
                                    </div>

                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="paisingreso">Pais</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="PaisIngreso" name="Pais" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="fecharealingreso">Fecha Real Arribo (*)</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="text" id="Fecha_real_arriboIngreso" class="form-control" autocomplete="off">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="ciudadingreso">Ciudad</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="CiudadIngreso" name="Ciudad" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-7 col-md-7 col-sm-7"></div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="nodoingreso">Nodo (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="NodoIngreso" name="Nodo" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <label id="Nota_logistica_ingreso" class="tr" key="notasingreso">Notas Logisticas</label>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <textarea class="form-control" rows="5" id="Nota_logistica_ingreso"> SIN OBSERVACIONES</textarea>
                                    </div>
                                </div>

                            </form>
                        </div>
                    </div>
                    <div id="Log_salida" hidden="hidden">
                        <div class="x_panel">
                            <div class="alert alert-info row" role="alert">
                                <i class="glyphicon glyphicon-info-sign fa-2x" style="vertical-align:middle;"></i>
                                <span style="vertical-align:middle;">Cabe señalar que si un controlador esta asociado a un servicio, se cambiará el estado del servicio a <b>"ARRIVED"</b>.</span>
                            </div>
                        </div>
                        <div class="x_panel">
                            <table id="Tb_Salida" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th class="tr" key="">CONTROLADOR (ESN)</th>
                                        <th class="tr" key="">MODEM (ESN)</th>
                                        <th class="tr" key="">CONTENEDOR</th>
                                        <th class="tr" key="">NAVIERA</th>
                                        <th class="tr" key="">CONTINENTE ORIGEN</th>
                                        <th class="tr" key="">NODO ORIGEN</th>
                                        <th class="tr" key="">FECHA ÚLTIMA ACCIÓN LOGÍSTICA</th>
                                        <th class="tr" key="">RETRIEVAL PROVIDER</th>
                                        <th class="tr" key="">PRIORIZADO</th>
                                        <th class="tr" key="">ESTADO RETRIEVAL PROVIDER</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="x_panel">
                            <form class="form-horizontal">
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label tr" key="tiponodoingreso">ESNs Involucrados en acción (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="Involucrados_salida" data-live-search="true">
                                            <option value="0" selected>Seleccione ESNs involucrados</option>
                                            <option value="1">CONTROLADOR Y MODEM</option>
                                            <option value="2">SOLO CONTROLADOR</option>
                                            <option value="3">SOLO MODEM</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                    </div>


                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="tiponodoingreso">Tipo Nodo (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="Tipo_nodoSalida" name="Tipo_nodoSalida" data-live-search="true"></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="controlador">ESN</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="ControladorSalida" id="ControladorSalida" />
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Agregar ESN" id="Agregarcontrolador" name="Agregarcontrolador" class="AgregarcontroladorSalida"><i class="fa fa-plus fa-2x"></i></a>
                                    </div>


                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="continenteingreso">Continente</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="ContinenteSalida" name="ContinenteSalida" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="cargamasivaingreso">Carga masiva controladores</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="file" id="ArchivoSalida" name="Archivo" placeholder="Suba Archivo Excel" class="form-control">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Subir Archivo" id="SubirArchivoSalida" name="SubirArchivo" class="SubirArchivoSalida"><i class="fa fa-upload fa-2x"></i></a>
                                    </div>


                                    <div class="col-md-1 col-sm-1 col-xs-1">
                                        <label id="lb_id" class="control-label tr" key="paisingreso">Pais</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="PaisSalida" name="PaisSalida" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <!--label><input type="checkbox" id="ConFallas"> Con Fallas</label-->
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <!--label><input type="checkbox" id="SinFallas"> Sin Fallas</label-->
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                    </div>


                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="ciudadingreso">Ciudad</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="CiudadSalida" name="CiudadSalida" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label">ETA (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <input type="text" id="EtaSalida" class="form-control" autocomplete="off">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <label id="lb_id" class="control-label tr" key="nodoingreso">Nodo (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="NodoSalida" name="NodoSalida" data-live-search="true" disabled></select>
                                    </div>
                                </div>
                                <div id="courier_div" class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label tr">Tipo Envio (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="TipoEnvio" data-live-search="true">
                                            <option value="0">Seleccione Tipo de Envío</option>
                                            <option value="1">POR COURIER</option>
                                            <option value="2">POR NAVE</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="PorCourier" hidden="hidden">
                                    <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label id="lb_id" class="control-label tr" key="numeroenviosalida">Numero de envio</label>
                                        </div>
                                        <div class="col-md-3 col-sm-3 col-xs-3">
                                            <input type="text" id="Numero_envioSalida" class="form-control">
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label id="lb_id" class="control-label tr" key="empresatransportesalida">Empresa Transporte</label>
                                        </div>
                                        <div class="col-md-3 col-sm-3 col-xs-3">
                                            <select class="selectpicker form-control" id="Empresa_transporteSalida" name="Empresa_transporteSalida" data-live-search="true"></select>
                                        </div>
                                    </div>
                                </div>
                                <div id="PorNave" hidden="hidden">
                                    <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label id="lb_id" class="control-label tr">Nave</label>
                                        </div>
                                        <div class="col-md-3 col-sm-3 col-xs-3">
                                            <select class="selectpicker form-control" id="Nave_salida" name="Nave_salida" data-live-search="true"></select>
                                        </div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label id="lb_id" class="control-label tr" key="empresatransportesalida">Viaje</label>
                                        </div>
                                        <div class="col-md-3 col-sm-3 col-xs-3">
                                            <input type="text" id="Viaje_salida" name="Viaje_salida" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group" id="SalidaRetrieval" hidden="hidden">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label">Fecha real Recuperación (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <input type="text" id="Fecharealrecuperacion" class="form-control" autocomplete="off">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label id="lb_id" class="control-label">Retrieval Provider</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <select class="selectpicker form-control" id="RetrievalSalida" data-live-search="true"></select>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <label id="lb_nota_logistica" class="tr" key="notasingreso">Notas Logisticas</label>
                                    </div>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <textarea class="form-control" rows="5" id="Nota_logistica_salida"> SIN OBSERVACIONES</textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="x_panel" id="Log_perdida" hidden="hidden">
                        <form class="form-horizontal">
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <label class="control-label tr" key="controlador">ESN (*)</label>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4">
                                    <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="ControladorPerdida" id="ControladorPerdida" />
                                </div>
                            </div>
                            <br />
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <label class="control-label tr" key="TipoPerdida">Tipo Perdida (*)</label>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4">
                                    <select class="selectpicker form-control" id="TipoPerdida" data-live-search="true">
                                        <option value="0">Seleccione Tipo Perdida</option>
                                        <option value="1">SIN INFO. TRACKING</option>
                                        <option value="2">ROBO / CATÁSTROFE</option>
                                    </select>
                                </div>
                            </div>
                            <br />
                            <br />
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <label class="control-label tr" key="FechaPerdida">Fecha Perdida (*)</label>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4">
                                    <input type="text" id="FechaPerdida" class="form-control" autocomplete="off">
                                </div>
                            </div>
                            <br />
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <label class="control-label tr" key="comentarios">Comentarios (*)</label>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-4">
                                    <textarea class="form-control" rows="5" id="ComentarioPerdida"></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="x_panel" id="Log_salidanodos" hidden="hidden">
                        <form class="form-horizontal">
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label class="control-label tr" key="cargamasivaingreso">Carga masiva ESN</label>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <input type="file" id="ArchivoSalidaNodos" name="Archivo" placeholder="Suba Archivo Excel" class="form-control">
                                </div>
                                <div class="col-lg-1 col-md-1 col-sm-1">
                                    <a title="Subir Archivo" id="SubirArchivoSalidaNodo" name="SubirArchivo" class="SubirArchivoSalidaNodo"><i class="fa fa-upload fa-2x"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label id="lb_id" class="control-label tr" key="tiponodoingreso">ESNs Involucrados en acción (*)</label>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <select class="selectpicker form-control" id="Involucrados_salidanodos" data-live-search="true">
                                        <option value="0" selected>Seleccione ESNs involucrados</option>
                                        <option value="1">CONTROLADOR Y MODEM</option>
                                        <option value="2">SOLO CONTROLADOR</option>
                                        <option value="3">SOLO MODEM</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <label id="lb_nota_logistica" class="tr" key="notasingreso">Notas Logisticas</label>
                                </div>
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <textarea class="form-control" rows="5" id="Nota_logistica_salidaNodos"> SIN OBSERVACIONES</textarea>
                                </div>
                            </div>
                        </form>
                        <div class="x_panel" id="tablanodos" hidden="hidden">
                            <table id="Tb_SalidaNodos" class="table table-striped table-bordered" width="100%">
                                <thead>
                                    <tr>
                                        <th class="tr" key="controladortabla">CONTROLADOR (ESN)</th>
                                        <th class="tr" key="modemtabla">MODEM (ESN)</th>
                                        <th class="tr" key="lugarorigentabla">TIPO LUGAR ORIGEN</th>
                                        <th class="tr" key="nodoorigentabla">NODO ORIGEN</th>
                                        <th class="tr" key="lugardestinotabla">TIPO LUGAR DESTINO</th>
                                        <th class="tr" key="nododestinotabla">NODO DESTINO</th>
                                        <th>FECHA SALIDA</th>
                                        <th class="tr" key="etatabla">ETA</th>
                                        <th class="tr" key="navetabla">NAVE</th>
                                        <th class="tr" key="viajetabla">VIAJE</th>
                                        <th class="tr" key="">PRIORIZADO</th>
                                        <th class="tr" key="viajetabla">ESTADO RETRIEVAL</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" id="div_botones_ingreso" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Guardar_ingreso" key="botonguardarlogistica">Guardar</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelarlogistica">Cancelar</button>
                </div>
                <div class="modal-footer" id="div_botones_salida" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Guardar_salida" key="botonguardarlogistica">Guardar</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelarlogistica">Cancelar</button>
                </div>
                <div class="modal-footer" id="div_botones_perdida" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Perdido" key="botonperdidologistica">Cambiar a Perdido</button>
                    <button type="button" class="btn btn-primary tr" id="NoPerdido" key="botonnoperdidologistica">Cambiar a No Perdido</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncencelarlogistica">Cancelar</button>
                </div>
                <div class="modal-footer" id="div_botones_salidanodos" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Guardar_salidanodos" key="botonguardarlogistica">Guardar</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncencelarlogistica">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal para Logistica Controlador-->
    <!--Modal para Recuperacion Controlador-->
    <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title tr" id="myModalLabel2" key="recuperacioncontrolador"> Recuperacion Controlador</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group x_panel">
                        <div class="col-md-4 col-sm-4 col-xs-12">
                            <label class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipoaccion">Tipo de Accion</label>
                            <div class="col-md-8 col-sm-8 col-xs-6">
                                <select class="selectpicker form-control Tipo_accion_recuperacion" data-live-search="true" id="Tipo_accion_recuperacion">
                                    <option selected value="0"></option>
                                    <option value="1">NOTIFICACION R.P.</option>
                                    <option value="2">RECUPERACION ESN</option>
                                    <option value="3">PRIORIZAR RECUPERACION</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="Rec_notificacion" hidden="hidden">
                        <div class="x_panel">
                            <table id="Tb_Notificacion" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th class="tr" key="">CONTROLADOR (ESN)</th>
                                        <th class="tr" key="">MODEM (ESN)</th>
                                        <th class="tr" key="">CONTENEDOR</th>
                                        <th class="tr" key="">NAVIERA</th>
                                        <th class="tr" key="">RETRIEVAL PROVIDER</th>
                                        <th class="tr" key="">NODO DESTINO</th>
                                        <th class="tr" key="">PRIORIZADO</th>
                                        <th class="tr" key="">ESTADO RETRIEVAL</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="x_panel">
                            <form class="form-horizontal">
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label tr" key="tiponodoingreso">ESNs Involucrados en acción (*)</label>
                                    </div>
                                    <div class="col-md-3 col-sm-3 col-xs-3">
                                        <select class="selectpicker form-control" id="Involucrados_notificacion" data-live-search="true">
                                            <option value="0" selected>Seleccione ESNs involucrados</option>
                                            <option value="1">CONTROLADOR Y MODEM</option>
                                            <option value="2">SOLO CONTROLADOR</option>
                                            <option value="3">SOLO MODEM</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="controlador">ESN</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="Controlador_rp_noti" id="Controlador_rp_noti" />
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Agregar ESN" id="Agregar_controlador_rp_noti" name="Agregar_controlador_rp_noti"><i class="fa fa-plus fa-2x"></i></a>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="cargamasivaingreso">Carga masiva ESN</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <input type="file" id="ArchivoNotificacion" placeholder="Suba Archivo Excel" class="form-control">
                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">
                                        <a title="Subir Archivo" id="SubirArchivoNotificacion" class="SubirArchivoNotificacion"><i class="fa fa-upload fa-2x"></i></a>
                                    </div>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label id="lb_id" class="control-label">Retrieval Provider (*)</label>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <select class="selectpicker form-control Retrieval_provider_noti" id="Retrieval_provider_noti" data-live-search="true"></select>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="row" id="Rec_controlador" hidden="hidden">
                        <div class="x_panel">
                            <table id="Tb_Recuperacion" class="table table-striped table-bordered">
                                Tb_Recuperacion
                                <thead>
                                    <tr>
                                        <th class="tr" key="">CONTROLADOR (ESN)</th>
                                        <th class="tr" key="">MODEM (ESN)</th>
                                        <th class="tr" key="">CONTENEDOR</th>
                                        <th class="tr" key="">NAVIERA</th>
                                        <th class="tr" key="">ETA</th>
                                        <th class="tr" key="">RETRIEVAL PROVIDER</th>
                                        <th class="tr" key="">NODO DESTINO</th>
                                        <th class="tr" key="">PRIORIZADO</th>
                                        <th class="tr" key="">ESTADO RETRIEVAL</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <div class="x_panel">
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label id="lb_id" class="control-label tr" key="tiponodoingreso">ESNs Involucrados en acción (*)</label>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <select class="selectpicker form-control" id="Involucrados_recuperacion" data-live-search="true">
                                        <option value="0" selected>Seleccione ESNs involucrados</option>
                                        <option value="1">CONTROLADOR Y MODEM</option>
                                        <option value="2">SOLO CONTROLADOR</option>
                                        <option value="3">SOLO MODEM</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label class="control-label tr" key="controlador">ESN</label>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="Controlador_rp_recupera" id="Controlador_rp_recupera" />
                                </div>
                                <div class="col-lg-1 col-md-1 col-sm-1">
                                    <a title="Agregar ESN" id="Agregar_controlador_rp_recupera"><i class="fa fa-plus fa-2x"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label class="control-label tr" key="cargamasivaingreso">Carga masiva controladores</label>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <input type="file" id="ArchivoRecuperacion" placeholder="Suba Archivo Excel" class="form-control">
                                </div>
                                <div class="col-lg-1 col-md-1 col-sm-1">
                                    <a title="Subir Archivo" id="SubirArchivoRecuperacion" class="SubirArchivoRecuperacion"><i class="fa fa-upload fa-2x"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-2">
                                    <label id="lb_id" class="control-label">Retrieval Provider (*)</label>
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <select class="selectpicker form-control Retrieval_provider_recupera" id="Retrieval_provider_recupera" data-live-search="true"></select>
                                </div>
                            </div>
                            <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                                <div class="col-lg-3 col-md-3 col-sm-2">
                                    <label id="lb_id" class="control-label tr" key="fecharealingreso">Fecha Recuperacion Real (*)</label>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <input type="text" id="Fecha_recupera" class="form-control" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="Rec_priorizacion" hidden="hidden">
                        <div class="x_panel">
                            <form class="form-horizontal">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="control-label tr" key="controlador">ESN (*)</label>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="Controlador_priorizar" id="Controlador_priorizar" />
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="x_panel">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="col-lg-3 col-md-3 col-sm-3">
                                    <label><input type="checkbox" id="Legal"> Legal</label>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <label><input type="checkbox" id="Tecnico"> Técnico</label>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <label><input type="checkbox" id="Comercial"> Comercial</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" id="div_botones_notificacion" hidden="hidden">
                    <button type="button" id="EnviarCorreo" class="btn btn-primary tr" key="botonemailrecuperacion">Notificar por Email</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelaringreso">Cancelar</button>
                </div>
                <div class="modal-footer" id="div_botones_recuperacion" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Guardar_recupera" key="botonguardarlogistica">Guardar</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelarlogistica">Cancelar</button>
                </div>
                <div class="modal-footer" id="div_botones_priorizacion" hidden="hidden">
                    <button type="button" class="btn btn-success tr" id="Priorizar" key="botonpriorizaringreso">Dar prioridad a Recuperacion</button>
                    <button type="button" class="btn btn-primary tr" id="NoPriorizar" key="botondespriorizaringreso">Quitar prioridad Recuperacion</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelarlogistica">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal para Recuperacion Controlador-->
    <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Historial Modificaciones</h4>
                </div>
                <div class="modal-body">
                    <table id="Tb_Historico" class="table table-striped table-bordered display nowrap" style="width:100%">
                        <thead>
                            <tr>
                                <th>CONTROLLER (ESN)</th>
                                <th>ID CONTROLLER</th>
                                <th>MODEM (ESN)</th>
                                <th>ACTION</th>
                                <th>ORIGIN TYPE PLACE</th>
                                <th>ORIGIN PLACE</th>
                                <th>DESTINATION TYPE PLACE</th>
                                <th>DESTINATION PLACE</th>
                                <th>RECOVERY TYPE PLACE</th>
                                <th>RECOVERY PLACE</th>
                                <th>SEND DATE</th>
                                <th>ARRIBE DATE</th>
                                <th>RECOVERY DATE</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>CONTROLLER (ESN)</th>
                                <th>ID CONTROLLER</th>
                                <th>MODEM (ESN)</th>
                                <th>ACTION</th>
                                <th>ORIGIN TYPE PLACE</th>
                                <th>ORIGIN PLACE</th>
                                <th>DESTINATION TYPE PLACE</th>
                                <th>DESTINATION PLACE</th>
                                <th>RECOVERY TYPE PLACE</th>
                                <th>RECOVERY PLACE</th>
                                <th>SEND DATE</th>
                                <th>ARRIBE DATE</th>
                                <th>RECOVERY DATE</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

</div>

<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" id="LogisticaControlador" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal2" id="RecuperacionControlador" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal3" id="HistoricoControlador" style="display:none;"></button>

<!--Modal para Logistica Controlador-->

<script src="~/build/js/Perfiles.js"></script>
<script src="~/build/js/PerfilGestionControlador.js"></script>
<script type="text/javascript">

    var lenguaje = document.cookie;

    $(document).ready(function () {

        $('#Tb_Controlador tfoot th').each(function (i) {
            $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');
        });

        var table = $("#Tb_Controlador").DataTable({
            initComplete: function () {
                this.api().columns().every(function () {
                    var column = this;
                    if (column.index() == 0) {
                        //alert(column.index());

                        var select = $('<select><option value=""></option></select>')
                            .appendTo($(column.footer()).empty())
                            .on('change', function () {
                                var val = $.fn.dataTable.util.escapeRegex(
                                    $(this).val()
                                );

                                column
                                    .search(val ? '^' + val + '$' : '', true, false)
                                    .draw();
                            });

                        column.data().unique().sort().each(function (d, j) {
                            select.append('<option value="' + d + '">' + d + '</option>')
                        });
                    }
                });
            },
            scrollX: true,
            order: false,
            pageLength: 15,
            ajax: {
                "url": "@Url.Action("GetControladoresLogisticaRetrieval", "Controlador")",
                "dataSrc": ''
            },
            dom: 'Bfrtip',
            buttons: [
                'excel'
            ],
            columns: [
                { "data": "DetalleAlerta" },
                { "data": "NumControlador" },
                { "data": "NumModem" },
                { "data": "TransitoNodoTxt" },
                { "data": "Contenedor" },
                { "data": "Naviera" },

                { "data": "ContinenteOrigen" },
                { "data": "NodoOrigen" },
                { "data": "NodoDestino" },

                {
                    "data": "Eta",
                    "render":
                    function (data, type, row, meta) {
                        if (data != null) {
                            var fecha = FormatDate(data);
                            return fecha;
                        } else {
                            return "";
                        }
                    }
                },
                {
                    "data": "FechaArribo",
                    "render":
                    function (data, type, row, meta) {
                        if (data != null) {
                            var fecha = FormatDate(data);
                            return fecha;
                        } else {
                            return "";
                        }
                    }
                },
                { "data": "NumeroEnvio" },
                { "data": "EmpresaTransporte" },
                { "data": "AnoServicio" },
                { "data": "EstadoServicio" },
                { "data": "DamageReportTxt" },
                { "data": "PrioritarioTxt" },
                { "data": "PerdidoTxt" },
                { "data": "ComentarioPerdida" },
                { "data": "RetrievalProviderNoti" },
                { "data": "NombreRPNotificado" },
                { "data": "RetrievalProvider" },
                {
                    "data": "FechaUltimaAccionLogistica",
                    "render":
                    function (data, type, row, meta) {
                        if (data != null) {
                            var fecha = FormatDate(data);
                            return fecha;
                        } else {
                            return "";
                        }
                    }
                },

                { "data": "UsuarioMovimiento" },
                { "data": "Usuario" },
                { "data": "UltimaUbicacion" },
                {
                    "data": "FechaUltUbicacion",
                    "render":
                    function (data, type, row, meta) {
                        if (data != null) {
                            var fecha = FormatDate(data);
                            return fecha;
                        } else {
                            return "";
                        }
                    }
                },
                { "data": "EstadoRecuperacion" },
                {
                    "data": "EstadoRetrieval",
                    "render":
                         function (data, type, full, meta) {
                             if (full["PerdidoTxt"] != "SIN PERDIDA") {
                                 return "PERDIDO";
                             } else if (full["EstadoServicio"] == "CANCELLED") {
                                 return "CANCELLED";
                             } else if (full["EstadoServicio"] == "PRECANCELLED") {
                                 return "PRECANCELLED";
                             } else if (full["TransitoNodoTxt"] == "IN TRANSIT" && full["EstadoRecuperacion"] == "NOT ARRIVED" && full["EstadoServicio"] == "ON SERVICE TRIP") {
                                 return "ON SERVICE TRIP";
                             } else if ((full["NodoDestino"] == "ROTTERDAM" || full["NodoDestino"] == "BODEGA - ROTTERDAM") && full["TransitoNodoTxt"] == "IN NODE" && full["EstadoRecuperacion"] == "RECOVERED") {
                                 return "BODEGA ROTTERDAM";
                             } else if (full["TransitoNodoTxt"] == "IN TRANSIT" && full["EstadoRecuperacion"] == "RECOVERED" && full["EstadoServicio"] == "RECOVERED") {
                                 if (full["NodoDestino"] == "LIVENTUS LAB") {
                                     if (full["EmpresaTransporte"] != "W/O DATA" && full["NumeroEnvio"] != "") {
                                         return "COURIER AEREO";
                                     }
                                     else {
                                         return "COURIER MARITIMO";
                                     }
                                 } else if (full["NodoDestino"] == "ROTTERDAM") {
                                     return "COURIER EUROPA";
                                 } else {
                                     return "IN TRANSIT";
                                 }
                             } else if (full["TransitoNodoTxt"] == "IN TRANSIT" && full["EstadoRecuperacion"] == "ARRIVED" && full["EstadoServicio"] == "NOT RECOVERED") {
                                 return "IN TRANSIT";
                             } else if ((full["TransitoNodoTxt"] == "IN NODE" || full["TransitoNodoTxt"] == "IN TRANSIT") && full["EstadoRecuperacion"] == "RECOVERED" && full["EstadoServicio"] == "RECOVERED") {
                                 return "RECOVERED";
                             } else if (full["TransitoNodoTxt"] == "IN NODE" && full["EstadoRecuperacion"] == "RECOVERED" && full["EstadoServicio"] == "RECOVERED") {
                                 if (full["NodoDestino"] == "LIVENTUS LAB") {
                                     return "LAB";
                                 } else {
                                     return "RECOVERED";
                                 }
                             } else if (full["TransitoNodoTxt"] == "IN NODE" && full["EstadoRecuperacion"] == "RECOVERED" && full["EstadoServicio"] == "W/O DATA" && full["NodoDestino"] == "LIVENTUS LAB") {
                                 return "LAB";
                             } else if (full["TransitoNodoTxt"] == "IN NODE" && full["EstadoRecuperacion"] == "ARRIVED" && (full["EstadoServicio"] == "NOT RECOVERED" || (full["EstadoServicio"] == "RECOVERED" && full["NumControlador"] == ""))) {

                                 var fecha = full["FechaArribo"];

                                 var validacion = FormatDateDias(fecha);
                                 if (validacion == 1 || validacion == 2) {
                                     return "ARRIVED";
                                 } else if (validacion == 0) {
                                     return "NOT RECOVERED";
                                 } else {
                                     return "";
                                 }
                             } else if ((full["TransitoNodoTxt"] == "IN NODE" || full["TransitoNodoTxt"] == "IN TRANSIT") && (full["EstadoRecuperacion"] == "ARRIVED" || full["EstadoRecuperacion"] == "N.A.") && full["EstadoServicio"] == "W/O DATA" && full["TipoNodoDestino"] != "DEPOT") {
                                 return "SERVICE PROVIDER " + full["PaisDestino"].trim();
                             } else if ((full["TransitoNodoTxt"] == "IN NODE" || full["TransitoNodoTxt"] == "IN TRANSIT") && full["EstadoRecuperacion"] == "N.A." && full["EstadoServicio"] == "W/O DATA" && full["TipoNodoDestino"] == "DEPOT") {
                                 return "DEPOT " + full["NodoDestino"].trim();
                             } else {
                                 return "";
                             }
                         }
                },
            ],
        });

        table.columns().every(function () {
            var column = this;
            $('input', this.footer()).on('keyup change', function () {
                if (column[0][0] == 28 && this.value != "") {
                    column
                    .search("^" + this.value + "$", true, false, true)
                    .draw();
                } else {
                    column
                    .search(this.value)
                    .draw();
                }
            });
        });

        $('#Tb_Controlador tbody').on('click', 'tr', function () {
            $(this).toggleClass('selected');
            $('#IdControlador').val(table.rows('.selected').data().length);
        });
    });

    function FormatDate(data) {
        var dateString = data.substr(6);
        var currentTime = new Date(parseInt(dateString));
        var month = currentTime.getMonth() + 1;
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();

        if (month < 10) {
            month = "0" + month;
        } else {
            month;
        }

        if (day < 10) {
            day = "0" + day;
        } else {
            day;
        }

        var date = day + "-" + month + "-" + year;
        return date;
    }

    function FormatDateDias(data) {
        if (data == null) {
            return 2;
        }

        var dateString = data.substr(6);
        var currentTime = new Date(parseInt(dateString));

        var month = currentTime.getMonth() + 1;
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();

        if (month < 10) {
            month = "0" + month;
        } else {
            month;
        }

        if (day < 10) {
            day = "0" + day;
        } else {
            day;
        }

        var date = year + "-" + month + "-" + day;

        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!

        var yyyy = today.getFullYear();
        if (dd < 10) {
            dd = '0' + dd;
        }
        if (mm < 10) {
            mm = '0' + mm;
        }
        var today = yyyy + '-' + mm + '-' + dd;

        var date1 = new Date(date);
        var date2 = new Date(today);
        var timeDiff = Math.abs(date2.getTime() - date1.getTime());
        var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));

        if (diffDays > 15) {
            return 0;
        } else {
            return 1;
        }
    }

    $("#Perdido").click(function () {
        if ($('#TipoPerdida').val() != "0") {
            if ($('#ControladorPerdida').val() != "") {
                if ($('#FechaPerdida').val() != "") {
                    if ($('#ComentarioPerdida').val() != "") {
                        $("#ControladorPerdida").css("background", "rgba(255, 0, 0, 0)");
                        $("#FechaPerdida").css("background", "rgba(255, 0, 0, 0)");
                        $("#ComentarioPerdida").css("background", "rgba(255, 0, 0, 0)");
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarESN", "Controlador")',
                            data: { ESN: $("#ControladorPerdida").val() },
                            success: function (response) {
                                if (response == 0) {
                                    swal('Ups!', '<span>Controlador/Modem no existe en los registros</span>', 'warning');
                                    $("#ControladorPerdida").val("");
                                    return false;
                                } else {
                                    swal('Ok!', '<span>Número Controlador/Modem válido.</span>', 'success');
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("AgregarPerdida", "Controlador")',
                                        data: {
                                            ESN: $('#ControladorPerdida').val(),
                                            TipoPerdida: $('#TipoPerdida').val(),
                                            FechaPerdida: $('#FechaPerdida').val(),
                                            ComentarioPerdida: $('#ComentarioPerdida').val()
                                        },
                                        success: function (response) {
                                            var json = JSON.parse(response);
                                            if (json.validador == 0) {
                                                var aux = 'success';
                                            } else {
                                                var aux = 'warning';
                                            }
                                            swal({
                                                title: '',
                                                text: json.Mensaje,
                                                type: aux,
                                                showCancelButton: false,
                                                confirmButtonColor: '#3085d6',
                                                cancelButtonColor: '#d33',
                                                confirmButtonText: 'Aceptar'
                                            }).then((result) => {
                                                location.reload();
                                            })
                                        }
                                    });
                                }
                            }
                        });
                    } else {
                        $("#ComentarioPerdida").css("background", "rgba(255, 0, 0, 0.4)");
                    }
                } else {
                    $("#FechaPerdida").css("background", "rgba(255, 0, 0, 0.4)");
                }
            } else {
                $("#ControladorPerdida").css("background", "rgba(255, 0, 0, 0.4)");
            }
        }else {
            $("#TipoPerdida").css("background", "rgba(255, 0, 0, 0.4)");
        }

    });

    $("#NoPerdido").click(function () {
        if ($('#ControladorPerdida').val() != "") {
            $("#ControladorPerdida").css("background", "rgba(255, 0, 0, 0)");
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: { ESN: $("#ControladorPerdida").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Controlador/Modem no existe en los registros</span>', 'warning');
                        $("#ControladorPerdida").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número Controlador/Modem válido.</span>', 'success');
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarNoPerdida", "Controlador")',
                            data: {
                                ESN: $('#ControladorPerdida').val()
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    location.reload();
                                })
                            }
                        });
                    }
                }
            });
        } else {
            $("#ControladorPerdida").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#Priorizar").click(function () {
        if ($('#Controlador_priorizar').val() != "") {
            $("#Controlador_priorizar").css("background", "rgba(255, 0, 0, 0)");

            if ($("#Legal").is(':checked')) {
                var Requerimiento = 0;
            } else if ($("#Comercial").is(':checked')) {
                var Requerimiento = 1;
            } else {
                var Requerimiento = 2;
            }


            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: {
                    ESN: $("#Controlador_priorizar").val()
                },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>ESN no existe en los registros</span>', 'warning');
                        $("#Controlador_priorizar").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número ESN válido.</span>', 'success');
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarPriorizacion", "Controlador")',
                            data: {
                                ESN: $('#Controlador_priorizar').val(),
                                Requerimiento: Requerimiento
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    location.reload();
                                })
                            }
                        });
                    }
                }
            });
        } else {
            $("#Controlador_priorizar").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#NoPriorizar").click(function () {
        if ($('#Controlador_priorizar').val() != "") {
            $("#Controlador_priorizar").css("background", "rgba(255, 0, 0, 0)");
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: { ESN: $("#Controlador_priorizar").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Controlador no existe en los registros</span>', 'warning');
                        $("#Controlador_priorizar").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número controlador válido.</span>', 'success');
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarNoPriorizacion", "Controlador")',
                            data: {
                                ESN: $('#Controlador_priorizar').val()
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    location.reload();
                                })
                            }
                        });
                    }
                }
            });
        } else {
            $("#Controlador_priorizar").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#Tipo_accion").change(function () {
        $("button[data-id=Controlador]").css("background", "rgba(255, 0, 0, 0)");
        $("input[name=Archivo]").css("background", "rgba(255, 0, 0, 0)");
        $("#SalidaRetrieval").hide();
        $("#PorNave").hide();
        $("#PorCourier").hide();

        if ($("#Tipo_accion").val() == "0") {
            $("#Log_ingreso").hide();
            $("#div_botones_ingreso").hide();
            $("#div_botones_salida").hide();
            $("#Log_salida").hide();
            $("#div_botones").show();
            $("#Log_perdida").hide();
            $("#div_botones_perdida").hide();
            $("#div_botones_salidanodos").hide();
            $("#Log_salidanodos").hide();

        } else if ($("#Tipo_accion").val() == "1") {

            var tableControlador = $('#Tb_Controlador').DataTable();

            var Info = tableControlador.rows('.selected').data();
            var dataIngreso = [];

            //OBTENER TIPO LUGARES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTipoLugares", "TipoLugar")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Tipo de Nodo</option>";
                    $("select[name=Tipo_nodo]").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("select[name=Tipo_nodo]").append(optionsAsString);
                    $("select[name=Tipo_nodo]").selectpicker("refresh");
                },
            });
            //OBTENER TIPO LUGARES

            for (var i = 0; i < Info.length ; i++) {
                var eta = "";
                var estado = "";
                if (Info[i]["Eta"] != null && Info[i]["Eta"]!="")
                {
                    eta = FormatDate(Info[i]["Eta"]);
                }

                if (Info[i]["PerdidoTxt"] != "SIN PERDIDA") {
                    estado = "PERDIDO";
                } else if (Info[i]["EstadoServicio"] == "CANCELLED") {
                    estado = "CANCELLED";
                } else if (Info[i]["EstadoServicio"] == "PRECANCELLED") {
                    estado = "PRECANCELLED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "NOT ARRIVED" && Info[i]["EstadoServicio"] == "ON SERVICE TRIP") {
                    estado = "ON SERVICE TRIP";
                } else if ((Info[i]["NodoDestino"] == "ROTTERDAM" || Info[i]["NodoDestino"] == "BODEGA - ROTTERDAM") && Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED") {
                    estado = "BODEGA ROTTERDAM";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        if (Info[i]["EmpresaTransporte"] != "W/O DATA" && Info[i]["NumeroEnvio"] != "") {
                            estado = "COURIER AEREO";
                        }
                        else {
                            estado = "COURIER MARITIMO";
                        }
                    } else if (Info[i]["NodoDestino"] == "ROTTERDAM") {
                        estado = "COURIER EUROPA";
                    } else {
                        estado = "IN TRANSIT";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && Info[i]["EstadoServicio"] == "NOT RECOVERED") {
                    estado = "IN TRANSIT";
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    estado = "RECOVERED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        estado = "LAB";
                    } else {
                        estado = "RECOVERED";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                    estado = "LAB";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && (Info[i]["EstadoServicio"] == "NOT RECOVERED" || (Info[i]["EstadoServicio"] == "RECOVERED" && Info[i]["NumControlador"] == ""))) {

                    var fecha = Info[i]["FechaArribo"];

                    var validacion = FormatDateDias(fecha);
                    if (validacion == 1 || validacion == 2) {
                        estado = "ARRIVED";
                    } else if (validacion == 0) {
                        estado = "NOT RECOVERED";
                    } else {
                        estado = "";
                    }
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && (Info[i]["EstadoRecuperacion"] == "ARRIVED" || Info[i]["EstadoRecuperacion"] == "N.A.") && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] != "DEPOT") {
                    estado = "SERVICE PROVIDER " + Info[i]["PaisDestino"].trim();
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "N.A." && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] == "DEPOT") {
                    estado = "DEPOT " + Info[i]["NodoDestino"].trim();
                } else {
                    estado = "";
                }

                dataIngreso.push([Info[i]["NumControlador"], Info[i]["NumModem"], Info[i]["Contenedor"], Info[i]["Naviera"], eta,
                                  Info[i]["NodoDestino"], Info[i]["PrioritarioTxt"], estado]);
            }

            var tableIngreso = $('#Tb_Ingreso').DataTable();
            tableIngreso.destroy();
            $("select[name=Continente]").attr('disabled', 'disabled');
            $("select[name=Continente]").val("0");
            $("select[name=Continente]").selectpicker('refresh');

            $("select[name=Pais]").attr('disabled', 'disabled');
            $("select[name=Pais]").val("0");
            $("select[name=Pais]").selectpicker('refresh');

            $("select[name=Ciudad]").attr('disabled', 'disabled');
            $("select[name=Ciudad]").val("0");
            $("select[name=Ciudad]").selectpicker('refresh');

            $("select[name=Nodo]").attr('disabled', 'disabled');
            $("select[name=Nodo]").val("0");
            $("select[name=Nodo]").selectpicker('refresh');


            $("#Log_ingreso").show();
            $('#Fecha_real_arribo').val(moment().format('DD-MM-YYYY'));
            $("#Log_salida").hide();
            $("#div_botones_ingreso").show();
            $("#div_botones_salida").hide();
            $("#Log_perdida").hide();
            $("#div_botones_perdida").hide();
            $("#Log_nota").hide();
            $("#div_botones_salidanodos").hide();
            $("#Log_salidanodos").hide();

            var tableIngreso = $('#Tb_Ingreso').DataTable({
                data: dataIngreso,
            });

            $("button[data-id=Tipo_nodoIngreso]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=NodoIngreso]").css("background", "rgba(255, 0, 0, 0)");
            $("#Fecha_real_arriboIngreso").css("background", "rgba(255, 0, 0, 0)");
            $("#Fecha_real_arriboIngreso").val("");

            $("#Fecha_real_arriboIngreso").datepicker({
                dateFormat: "dd-mm-yy",
                firstDay: 1,
                dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
                dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
                monthNames:
                    ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                    "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                monthNamesShort:
                    ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                    "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
                showWeek: true
            });

        } else if ($("#Tipo_accion").val() == "2") {
            $("#TipoEnvio").val("0");
            $("#TipoEnvio").selectpicker("refresh");

            /*$("#SinFallas").prop('checked', true);
            $("#ConFallas").prop('checked', false);

            $("#SinFallas").click(function () {
                if ($("#SinFallas").is(':checked')) {
                    $("#ConFallas").prop('checked', false);
                }
            });

            $("#ConFallas").click(function () {
                if ($("#ConFallas").is(':checked')) {
                    $("#SinFallas").prop('checked', false);
                }
            });*/


            //OBTENER TIPO LUGARES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetNavesActivas", "Nave")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione una Nave</option>";
                    $("select[name=Nave_salida]").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdNave + "'>" + json[i].NombreNave + "</option>";
                    }
                    $("select[name=Nave_salida]").append(optionsAsString);
                    $("select[name=Nave_salida]").selectpicker("refresh");
                },
            });
            //OBTENER TIPO LUGARES

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCourierActivos", "Couriers")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione una Empresa de Transporte</option>";
                    $("select[name=Empresa_transporteSalida]").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id_Courier + "'>" + json[i].NombreCourier + "</option>";
                    }
                    $("select[name=Empresa_transporteSalida]").append(optionsAsString);
                    $("select[name=Empresa_transporteSalida]").selectpicker("refresh");
                },
            });

            //OBTENER TIPO LUGARES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTipoLugares", "TipoLugar")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Tipo de Nodo</option>";
                    $("select[name=Tipo_nodoSalida]").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("select[name=Tipo_nodoSalida]").append(optionsAsString);
                    $("select[name=Tipo_nodoSalida]").selectpicker("refresh");
                },
            });
            //OBTENER TIPO LUGARES

            //Cargar los controladores seleccionados
            var tableControlador = $('#Tb_Controlador').DataTable();

            var Info = tableControlador.rows('.selected').data();
            var dataSalida = [];






            for (var i = 0; i < Info.length ; i++) {
                var estado = "";

                if (Info[i]["PerdidoTxt"] != "SIN PERDIDA") {
                    estado = "PERDIDO";
                } else if (Info[i]["EstadoServicio"] == "CANCELLED") {
                    estado = "CANCELLED";
                } else if (Info[i]["EstadoServicio"] == "PRECANCELLED") {
                    estado = "PRECANCELLED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "NOT ARRIVED" && Info[i]["EstadoServicio"] == "ON SERVICE TRIP") {
                    estado = "ON SERVICE TRIP";
                } else if ((Info[i]["NodoDestino"] == "ROTTERDAM" || Info[i]["NodoDestino"] == "BODEGA - ROTTERDAM") && Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED") {
                    estado = "BODEGA ROTTERDAM";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        if (Info[i]["EmpresaTransporte"] != "W/O DATA" && Info[i]["NumeroEnvio"] != "") {
                            estado = "COURIER AEREO";
                        }
                        else {
                            estado = "COURIER MARITIMO";
                        }
                    } else if (Info[i]["NodoDestino"] == "ROTTERDAM") {
                        estado = "COURIER EUROPA";
                    } else {
                        estado = "IN TRANSIT";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && Info[i]["EstadoServicio"] == "NOT RECOVERED") {
                    estado = "IN TRANSIT";
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    estado = "RECOVERED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        estado = "LAB";
                    } else {
                        estado = "RECOVERED";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                    estado = "LAB";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && (Info[i]["EstadoServicio"] == "NOT RECOVERED" || (Info[i]["EstadoServicio"] == "RECOVERED" && Info[i]["NumControlador"] == ""))) {

                    var fecha = Info[i]["FechaArribo"];

                    var validacion = FormatDateDias(fecha);
                    if (validacion == 1 || validacion == 2) {
                        estado = "ARRIVED";
                    } else if (validacion == 0) {
                        estado = "NOT RECOVERED";
                    } else {
                        estado = "";
                    }
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && (Info[i]["EstadoRecuperacion"] == "ARRIVED" || Info[i]["EstadoRecuperacion"] == "N.A.") && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] != "DEPOT") {
                    estado = "SERVICE PROVIDER " + Info[i]["PaisDestino"].trim();
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "N.A." && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] == "DEPOT") {
                    estado = "DEPOT " + Info[i]["NodoDestino"].trim();
                } else {
                    estado = "";
                }

                data = Info[i]["FechaUltimaAccionLogistica"];
                var fecha = "";
                if (data != null) {
                    fecha = FormatDate(data);
                }

                //dataSalida.push([Info[i][0], Info[i][17], Info[i][18], Info[i][19], Info[i][20], Info[i][21]]);
                dataSalida.push([Info[i]["NumControlador"], Info[i]["NumModem"], Info[i]["Contenedor"], Info[i]["Naviera"],
                                 Info[i]["ContinenteOrigen"], Info[i]["NodoOrigen"], fecha, Info[i]["RetrievalProvider"],
                                 Info[i]["PrioritarioTxt"], estado]);

            }
            //Cargar los controladores seleccionados


            var tableSalida = $('#Tb_Salida').DataTable();
            tableSalida.destroy();

            $("select[name=ContinenteSalida]").attr('disabled', 'disabled');
            $("select[name=ContinenteSalida]").val("0");
            $("select[name=ContinenteSalida]").selectpicker('refresh');

            $("select[name=PaisSalida]").attr('disabled', 'disabled');
            $("select[name=PaisSalida]").val("0");
            $("select[name=PaisSalida]").selectpicker('refresh');

            $("select[name=CiudadSalida]").attr('disabled', 'disabled');
            $("select[name=CiudadSalida]").val("0");
            $("select[name=CiudadSalida]").selectpicker('refresh');

            $("select[name=NodoSalida]").attr('disabled', 'disabled');
            $("select[name=NodoSalida]").val("0");
            $("button[data-id=NodoSalida]").css("background", "rgba(255, 0, 0, 0)");
            $("select[name=NodoSalida]").selectpicker('refresh');


            $("#Log_ingreso").hide();
            $('#Fecha_real_arribo').val(moment().format('DD-MM-YYYY'));
            $("#Log_salida").show();
            $("#div_botones_ingreso").hide();
            $("#div_botones_salida").show();
            $("#Log_perdida").hide();
            $("#div_botones_perdida").hide();
            $("#Log_nota").hide();
            $("#div_botones_salidanodos").hide();
            $("#Log_salidanodos").hide();

            $("#Fecha_real_envioSalida").css("background", "rgba(255, 0, 0, 0)");
            $("#Fecha_real_envioSalida").val("");
            $("#EtaSalida").css("background", "rgba(255, 0, 0, 0)");
            $("#EtaSalida").val("");
            $("button[data-id=Tipo_nodoSalida]").css("background", "rgba(255, 0, 0, 0)");

            var tableIngreso = $('#Tb_Salida').DataTable({
                data: dataSalida,
            });


        } else if ($("#Tipo_accion").val() == "3") {
            $("#Log_ingreso").hide();
            $('#Fecha_real_arribo').val(moment().format('DD-MM-YYYY'));
            $("#Log_salida").hide();
            $("#div_botones_ingreso").hide();
            $("#div_botones_salida").hide();
            $("#Log_perdida").show();
            $("#div_botones_perdida").show();
            $("#Log_nota").hide();
            $("#div_botones_salidanodos").hide();
            $("#Log_salidanodos").hide();
            $("#ControladorPerdida").css("background", "rgba(255, 0, 0, 0)");


        } else if ($("#Tipo_accion").val() == "4") {
            $("#Log_ingreso").hide();
            $("#div_botones_ingreso").hide();
            $("#div_botones_salida").hide();
            $("#Log_salida").hide();
            $("#div_botones").show();
            $("#Log_perdida").hide();
            $("#div_botones_perdida").hide();
            $("#div_botones_salidanodos").show();
            $("#Log_salidanodos").show();
            $("#ArchivoSalidaNodos").val("");
            $("#tablanodos").hide();
            var tableIngreso = $('#Tb_SalidaNodos').DataTable();
            tableIngreso.destroy();

        }
    });

    $("select[name=Tipo_nodo]").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContinentes", "Continente")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Continente</option>";
                $("select[name=Continente]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=Continente]").append(optionsAsString);
                $("select[name=Continente]").removeAttr('disabled');
                $("select[name=Continente]").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                $("select[name=Pais]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=Pais]").append(optionsAsString);
                $("select[name=Pais]").removeAttr('disabled');
                $("select[name=Pais]").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                $("select[name=Ciudad]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=Ciudad]").append(optionsAsString);
                $("select[name=Ciudad]").removeAttr('disabled');
                $("select[name=Ciudad]").selectpicker("refresh");
            },
        });

        $("select[name=Nodo]").removeAttr('disabled');
        $("select[name=Nodo]").selectpicker('refresh');

        if ($("select[name=Tipo_nodo]").val() == "0") {

            $("select[name=Continente]").attr('disabled', 'disabled');
            $("select[name=Continente]").val("0");
            $("select[name=Continente]").selectpicker('refresh');
            $("select[name=Pais]").attr('disabled', 'disabled');
            $("select[name=Pais]").val("0");
            $("select[name=Pais]").selectpicker('refresh');
            $("select[name=Ciudad]").attr('disabled', 'disabled');
            $("select[name=Ciudad]").val("0");
            $("select[name=Ciudad]").selectpicker('refresh');
            $("select[name=Nodo]").attr('disabled', 'disabled');
            $("select[name=Nodo]").val("0");
            $("select[name=Nodo]").selectpicker('refresh');

        } else if ($("select[name=Tipo_nodo]").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPackingActivos", "Packing")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Packing</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "5") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetBodegas", "Bodega")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=Nodo]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=Nodo]").append(optionsAsString);
                    $("select[name=Nodo]").selectpicker('refresh');
                },
            });
        }
    });

    $("select[name=Continente]").change(function () {
        if ($("select[name=Continente]").val() == "0") {
            $('#Pais').attr('disabled', 'disabled');
            $('#Pais').val("0");
            $('#Pais').selectpicker('refresh');
            $('#Ciudad').attr('disabled', 'disabled');
            $('#Ciudad').val("0");
            $('#Ciudad').selectpicker('refresh');
            $('#Nodo').attr('disabled', 'disabled');
            $('#Nodo').val("0");
            $('#Nodo').selectpicker('refresh');
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesContinente", "Paises")',
                data: { IdContinente: $("select[name=Continente]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=Pais]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Pais</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=Pais]").append(optionsAsString);
                    $("select[name=Pais]").selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesContinente", "Ciudad")',
                data: { IdContinente: $("select[name=Continente]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=Ciudad]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                    }

                    $("select[name=Ciudad]").append(optionsAsString);
                    $("select[name=Ciudad]").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoContinente", "Deposito")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsContinente", "Packing")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoContinente", "Antepuerto")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenContinente", "Puertos")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoContinente", "Puertos")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione ¨Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasaContinente", "Bodega")',
                    data: { IdContinente: $("select[name=Continente]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=Pais]").change(function () {

        if ($("select[name=Pais]").val() == "0") {
            $("select[name=Continente]").val("0");
            $("select[name=Continente]").selectpicker("refresh");

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=Ciudad]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=Ciudad]").append(optionsAsString);
                    $("select[name=Ciudad]").selectpicker('refresh');
                },
            });

            if ($("select[name=Tipo_nodo]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=Nodo]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $("select[name=Nodo]").append(optionsAsString);
                        $("select[name=Nodo]").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPais", "Paises")',
                data: { IdPais: $("select[name=Pais]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                    }
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("select[name=Pais]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('select[name=Ciudad]').empty();
                    optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                    }
                    $('select[name=Ciudad]').append(optionsAsString);
                    $('select[name=Ciudad]').selectpicker('refresh');
                },
            });

            if ($("select[name=Tipo_nodo]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoPais", "Deposito")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsPais", "Packing")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoPais", "Antepuerto")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenPais", "Puertos")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoPais", "Puertos")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasPais", "Bodega")',
                    data: { IdPais: $("select[name=Pais]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione una Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=Ciudad]").change(function () {
        if ($("select[name=Ciudad]").val() == "0") {
            if ($("select[name=Tipo_nodo]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }
                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }
                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            }
        } else {
            if ($("select[name=Tipo_nodo]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsCiudad", "Packing")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +"</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoCiudad", "Puertos")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodo]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasCiudad", "Bodega")',
                    data: { IdCiudad: $("select[name=Ciudad]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=Nodo]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=Nodo]').append(optionsAsString);
                        $('select[name=Nodo]').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=Nodo]").change(function () {
        if ($("select[name=Tipo_nodo]").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("select[name=Nodo]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                        $("select[name=Pais]").val(json[0].IdPais);
                        $("select[name=Pais]").selectpicker('refresh');
                        $("select[name=Ciudad]").val(json[0].IdCiudad);
                        $("select[name=Ciudad]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPacking", "Packing")',
                data: { IdPacking: $("select[name=Nodo]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                        $("select[name=Pais]").val(json[0].IdPais);
                        $("select[name=Pais]").selectpicker('refresh');
                        $("select[name=Ciudad]").val(json[0].IdCiudad);
                        $("select[name=Ciudad]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                data: { IdAntepuerto: $("select[name=Nodo]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                        $("select[name=Pais]").val(json[0].IdPais);
                        $("select[name=Pais]").selectpicker('refresh');
                        $("select[name=Ciudad]").val(json[0].IdCiudad);
                        $("select[name=Ciudad]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                data: { IdPuertoOrigen: $("select[name=Nodo]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                        $("select[name=Pais]").val(json[0].IdPais);
                        $("select[name=Pais]").selectpicker('refresh');
                        $("select[name=Ciudad]").val(json[0].IdCiudad);
                        $("select[name=Ciudad]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodo]").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoBodega", "Bodega")',
                data: { IdBodega: $("select[name=Nodo]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=Continente]").val(json[0].IdContinente);
                        $("select[name=Continente]").selectpicker('refresh');
                        $("select[name=Pais]").val(json[0].IdPais);
                        $("select[name=Pais]").selectpicker('refresh');
                        $("select[name=Ciudad]").val(json[0].IdCiudad);
                        $("select[name=Ciudad]").selectpicker('refresh');
                    }
                },
            });
        }
    });

    $("select[name=Tipo_nodoSalida]").change(function () {
        $("#SalidaRetrieval").hide();
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContinentes", "Continente")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Continente</option>";
                $("select[name=ContinenteSalida]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=ContinenteSalida]").append(optionsAsString);
                $("select[name=ContinenteSalida]").removeAttr('disabled');
                $("select[name=ContinenteSalida]").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                $("select[name=PaisSalida]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=PaisSalida]").append(optionsAsString);
                $("select[name=PaisSalida]").removeAttr('disabled');
                $("select[name=PaisSalida]").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                $("select[name=CiudadSalida]").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("select[name=CiudadSalida]").append(optionsAsString);
                $("select[name=CiudadSalida]").removeAttr('disabled');
                $("select[name=CiudadSalida]").selectpicker("refresh");
            },
        });

        $("select[name=NodoSalida]").removeAttr('disabled');
        $("select[name=NodoSalida]").selectpicker('refresh');

        if ($("select[name=Tipo_nodoSalida]").val() == "0") {

            $("select[name=ContinenteSalida]").attr('disabled', 'disabled');
            $("select[name=ContinenteSalida]").val("0");
            $("select[name=ContinenteSalida]").selectpicker('refresh');
            $("select[name=PaisSalida]").attr('disabled', 'disabled');
            $("select[name=PaisSalida]").val("0");
            $("select[name=PaisSalida]").selectpicker('refresh');
            $("select[name=CiudadSalida]").attr('disabled', 'disabled');
            $("select[name=CiudadSalida]").val("0");
            $("select[name=CiudadSalida]").selectpicker('refresh');
            $("select[name=NodoSalida]").attr('disabled', 'disabled');
            $("select[name=NodoSalida]").val("0");
            $("select[name=NodoSalida]").selectpicker('refresh');

        } else if ($("select[name=Tipo_nodoSalida]").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPackingActivos", "Packing")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Packing</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "5") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetBodegas", "Bodega")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("select[name=NodoSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=NodoSalida]").append(optionsAsString);
                    $("select[name=NodoSalida]").selectpicker('refresh');
                },
            });
        }
    });

    $("select[name=ContinenteSalida]").change(function () {
        if ($("select[name=ContinenteSalida]").val() == "0") {
            $('#PaisSalida').attr('disabled', 'disabled');
            $('#PaisSalida').val("0");
            $('#PaisSalida').selectpicker('refresh');
            $('#CiudadSalida').attr('disabled', 'disabled');
            $('#CiudadSalida').val("0");
            $('#CiudadSalida').selectpicker('refresh');
            $('#NodoSalida').attr('disabled', 'disabled');
            $('#NodoSalida').val("0");
            $('#NodoSalida').selectpicker('refresh');
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesContinente", "Paises")',
                data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=PaisSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Pais</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=PaisSalida]").append(optionsAsString);
                    $("select[name=PaisSalida]").selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesContinente", "Ciudad")',
                data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=CiudadSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=CiudadSalida]").append(optionsAsString);
                    $("select[name=CiudadSalida]").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodoSalida").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoContinente", "Deposito")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodoSalida").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsContinente", "Packing")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodoSalida").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoContinente", "Antepuerto")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodoSalida").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenContinente", "Puertos")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodoSalida").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoContinente", "Puertos")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione ¨Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodoSalida").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasaContinente", "Bodega")',
                    data: { IdContinente: $("select[name=ContinenteSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=PaisSalida]").change(function () {

        if ($("select[name=PaisSalida]").val() == "0") {
            $("select[name=ContinenteSalida]").val("0");
            $("select[name=ContinenteSalida]").selectpicker("refresh");

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("select[name=CiudadSalida]").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("select[name=CiudadSalida]").append(optionsAsString);
                    $("select[name=CiudadSalida]").selectpicker('refresh');
                },
            });

            if ($("select[name=Tipo_nodoSalida]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("select[name=NodoSalida]").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("select[name=NodoSalida]").append(optionsAsString);
                        $("select[name=NodoSalida]").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPais", "Paises")',
                data: { IdPais: $("select[name=PaisSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                    }
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("select[name=PaisSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('select[name=CiudadSalida]').empty();
                    optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('select[name=CiudadSalida]').append(optionsAsString);
                    $('select[name=CiudadSalida]').selectpicker('refresh');
                },
            });

            if ($("select[name=Tipo_nodoSalida]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoPais", "Deposito")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsPais", "Packing")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoPais", "Antepuerto")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenPais", "Puertos")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoPais", "Puertos")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasPais", "Bodega")',
                    data: { IdPais: $("select[name=PaisSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione una Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=CiudadSalida]").change(function () {
        if ($("select[name=CiudadSalida]").val() == "0") {
            if ($("select[name=Tipo_nodoSalida]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            }
        } else {
            if ($("select[name=Tipo_nodoSalida]").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsCiudad", "Packing")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoCiudad", "Puertos")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasCiudad", "Bodega")',
                    data: { IdCiudad: $("select[name=CiudadSalida]").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('select[name=NodoSalida]').empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $('select[name=NodoSalida]').append(optionsAsString);
                        $('select[name=NodoSalida]').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("select[name=NodoSalida]").change(function () {
        if ($("select[name=Tipo_nodoSalida]").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("select[name=NodoSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                        $("select[name=PaisSalida]").val(json[0].IdPais);
                        $("select[name=PaisSalida]").selectpicker('refresh');
                        $("select[name=CiudadSalida]").val(json[0].IdCiudad);
                        $("select[name=CiudadSalida]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPacking", "Packing")',
                data: { IdPacking: $("select[name=NodoSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                        $("select[name=PaisSalida]").val(json[0].IdPais);
                        $("select[name=PaisSalida]").selectpicker('refresh');
                        $("select[name=CiudadSalida]").val(json[0].IdCiudad);
                        $("select[name=CiudadSalida]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                data: { IdAntepuerto: $("select[name=NodoSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                        $("select[name=PaisSalida]").val(json[0].IdPais);
                        $("select[name=PaisSalida]").selectpicker('refresh');
                        $("select[name=CiudadSalida]").val(json[0].IdCiudad);
                        $("select[name=CiudadSalida]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                data: { IdPuertoOrigen: $("select[name=NodoSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                        $("select[name=PaisSalida]").val(json[0].IdPais);
                        $("select[name=PaisSalida]").selectpicker('refresh');
                        $("select[name=CiudadSalida]").val(json[0].IdCiudad);
                        $("select[name=CiudadSalida]").selectpicker('refresh');
                    }
                },
            });
        } else if ($("select[name=Tipo_nodoSalida]").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoBodega", "Bodega")',
                data: { IdBodega: $("select[name=NodoSalida]").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("select[name=ContinenteSalida]").val(json[0].IdContinente);
                        $("select[name=ContinenteSalida]").selectpicker('refresh');
                        $("select[name=PaisSalida]").val(json[0].IdPais);
                        $("select[name=PaisSalida]").selectpicker('refresh');
                        $("select[name=CiudadSalida]").val(json[0].IdCiudad);
                        $("select[name=CiudadSalida]").selectpicker('refresh');
                    }
                },
            });
        }
    });

    $("select[name=NodoSalida]").change(function () {
        if ($("select[name=NodoSalida]").val() == "3" && $("select[name=Tipo_nodoSalida]").val() == "6" && $("#TipoEnvio").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#RetrievalSalida').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#RetrievalSalida').append(optionsAsString);
                    $('#RetrievalSalida').selectpicker('refresh');
                },
            });
            //$('#Fecharealrecuperacion').datepicker().datepicker('setDate', 'today');
            $("#SalidaRetrieval").show();
        } else {
            $("#SalidaRetrieval").hide();
        }
    });

    $("#TipoEnvio").change(function () {
        if ($("select[name=NodoSalida]").val() == "3" && $("select[name=Tipo_nodoSalida]").val() == "6" && $("#TipoEnvio").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#RetrievalSalida').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#RetrievalSalida').append(optionsAsString);
                    $('#RetrievalSalida').selectpicker('refresh');
                },
            });
            //$('#Fecharealrecuperacion').datepicker().datepicker('setDate', 'today');
            $("#SalidaRetrieval").show();
        } else {
            $("#SalidaRetrieval").hide();
        }
    });

    $("#TipoEnvio").change(function () {
        if ($("#TipoEnvio").val() == "0")
        {
            $("#PorNave").hide();
            $("#PorCourier").hide();
        } else if ($("#TipoEnvio").val() == "1")
        {
            $("#PorNave").hide();
            $("#PorCourier").show();
        }else
        {
            $("#PorNave").show();
            $("#PorCourier").hide();
        }

    });

    $("#Guardar_ingreso").click(function () {
        var tableIngreso = $('#Tb_Ingreso').DataTable();
        var InfoIngreso = tableIngreso.rows().data();
        if (InfoIngreso.length != 0) {

            if ($("#Involucrados_ingreso").val() == "0") {
                $("button[data-id=Involucrados_ingreso]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Involucrados_ingreso]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#Tipo_nodoIngreso").val() == "0") {
                $("button[data-id=Tipo_nodoIngreso]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Tipo_nodoIngreso]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#NodoIngreso").val() == "0") {
                $("button[data-id=NodoIngreso]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=NodoIngreso]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#Fecha_real_arriboIngreso").val() == "") {
                $("#Fecha_real_arriboIngreso").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("#Fecha_real_arriboIngreso").css("background", "rgba(255, 0, 0, 0)");
            }

            var contControllers = 0;
            var contModems = 0;
            var msge = "";
            var Controladores = [];

            for (var i = 0; i < InfoIngreso.length ; i++) {
                Controladores.push(InfoIngreso[i][0]);

                if (InfoIngreso[i][0] == "" || InfoIngreso[i][0] == null) {
                    var contControllers = contControllers + 1;
                } else if (InfoIngreso[i][1] == "" || InfoIngreso[i][1] == null) {
                    var contModems = contModems + 1;
                }
            }

            if ($("#Involucrados_ingreso").val() == "1") {
                if (contModems > 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado o sin controlador asociado ";
                } else if (contModems > 0 && contControllers == 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                } else if (contModems == 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_ingreso").val() == "2") {
                if (InfoIngreso.length == contControllers && contControllers > 0) {
                    swal("Error", "No existen Controladores seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_ingreso").val() == "3") {
                if (InfoIngreso.length == contModems && contModems > 0) {
                    swal("Error", "No existen Modems seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contModems > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                }
            }

            if (msge!="")
            {
                swal({
                    title: 'Estas seguro?',
                    text: msge,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si'
                }).then((result) => {
                    for (var i = 0; i < InfoIngreso.length ; i++) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarIngreso", "Controlador")',
                            data: {
                                Controlador: InfoIngreso[i][0],
                                Modem: InfoIngreso[i][1],
                                FechaArribo: $("#Fecha_real_arriboIngreso").val(),
                                TipoNodoDestino: $("#Tipo_nodoIngreso").val(),
                                NodoDestino: $("#NodoIngreso").val(),
                                Nota: $("#Nota_logistica_ingreso").val(),
                                Involucrados: $("#Involucrados_ingreso").val()

                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    //ENVIAR CORREO A AREA LEGAL
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("CorreoLegal", "Controlador")',
                                        data: {
                                            ListaControladores: Controladores,
                                            Accion: 1,
                                        },
                                        success: function (response) {
                                        }
                                    });

                                    location.reload();
                                })
                            }
                        });
                    }
                });
            }else
            {
                for (var i = 0; i < InfoIngreso.length ; i++) {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("AgregarIngreso", "Controlador")',
                        data: {
                            Controlador: InfoIngreso[i][0],
                            Modem: InfoIngreso[i][1],
                            FechaArribo: $("#Fecha_real_arriboIngreso").val(),
                            TipoNodoDestino: $("#Tipo_nodoIngreso").val(),
                            NodoDestino: $("#NodoIngreso").val(),
                            Nota: $("#Nota_logistica_ingreso").val(),
                            Involucrados: $("#Involucrados_ingreso").val()

                        },
                        success: function (response) {
                            var json = JSON.parse(response);
                            if (json.validador == 0) {
                                var aux = 'success';
                            } else {
                                var aux = 'warning';
                            }
                            swal({
                                title: '',
                                text: json.Mensaje,
                                type: aux,
                                showCancelButton: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar'
                            }).then((result) => {
                                //ENVIAR CORREO A AREA LEGAL
                                $.ajax({
                                    type: "POST",
                                    url: '@Url.Action("CorreoLegal", "Controlador")',
                                    data: {
                                        ListaControladores: Controladores,
                                        Accion: 1,
                                    },
                                    success: function (response) {
                                    }
                                });

                                location.reload();
                            })
                        }
                    });
                }
            }



        } else {
            swal('Ups!', '<span class="alerta" key="errorcontroladoreslogistica">Debe seleccionar al menos un controlador.</span>', 'error');
        }
    });

    $(".AgregarcontroladorIngreso").click(function () {
        if ($("#ControladorIngreso").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: { ESN: $("#ControladorIngreso").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>ESN no existe en los registros</span>', 'warning');
                        $("#ControladorIngreso").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número ESN válido.</span>', 'success');

                        var cuentaaux = $('#Tb_Ingreso tr').length - 2;
                        var tableControlador = $('#Tb_Ingreso').DataTable();
                        var Info = tableControlador.rows().data();
                        var i = 0;
                        $("#ControladorIngreso").css("background", "rgba(255, 0, 0, 0)");

                        if (Info.length != 0) {
                            while (i < Info.length) {
                                if (Info[i][0] == $("#ControladorIngreso").val() || Info[i][1] == $("#ControladorIngreso").val()) {
                                    swal('Ups!', '<span class="alerta" key="errorcontroladortabla">ESN seleccionado ya existe en la tabla.</span>', 'error');
                                    return false;
                                } else {
                                    i++;
                                }
                            }
                        }

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetESNByNumberESN", "Controlador")',
                            data: { NumESN: $("#ControladorIngreso").val() },
                            success: function (response) {
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                var cuentatabla = $('#Tb_Ingreso tr').length - 2;
                                var tableIngreso = $('#Tb_Ingreso').DataTable();
                                for (var i = 0 ; i < cuenta ; i++) {
                                    tableIngreso.row.add([
                                        json[i].Controlador,
                                        json[i].Modem,
                                        json[i].Contenedor,
                                        json[i].Naviera,
                                        json[i].Eta,
                                        json[i].NodoDestino,
                                        json[i].Estado
                                    ]).draw(false);

                                    cuentatabla++;
                                }
                            }
                        });
                    }
                }
            });
        } else {
            $("#ControladorIngreso").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $(".SubirArchivoIngreso").click(function () {
        if ($('#ArchivoIngreso').val() != "") {
            $("#ArchivoIngreso").css("background", "rgba(255, 0, 0, 0)");
            var fileUpload = document.getElementById("ArchivoIngreso");
            if (fileUpload.value != null) {
                var uploadFile = new FormData();
                var files = $("#ArchivoIngreso").get(0).files;
                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    uploadFile.append("Controladores", files[0]);
                    $.ajax({
                        url: '@Url.Action("LeerExcel1", "Controlador")',
                        contentType: false,
                        processData: false,
                        data: uploadFile,
                        type: 'POST',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            if (cuenta != 0) {
                                if (json[0].Controlador == undefined) {
                                    swal('Ups!', '<span> Error de Extensión del archivo.</span>', 'error');
                                    return false;
                                } else {
                                    for (var i = 0 ; i < cuenta ; i++)
                                    {
                                        data.push([ json[i].Controlador,
                                                    json[i].Modem,
                                                    json[i].Contenedor,
                                                    json[i].Naviera,
                                                    json[i].Eta,
                                                    json[i].NodoDestino,
                                                    json[i].Prioritario,
                                                    json[i].Estado]);
                                    }
                                    var tableIngreso = $('#Tb_Ingreso').DataTable();
                                    tableIngreso.destroy();
                                    var tableIngreso = $('#Tb_Ingreso').DataTable({
                                        data: data,
                                    });
                                }
                            } else {
                                swal('Ups!', '<span> Archivo no cumple con el formato correcto.</span>', 'error');
                                return false;
                            }
                        }
                    });
                }
            }
        } else {
            $("#ArchivoIngreso").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#Guardar_salida").click(function () {
        var tableSalida = $('#Tb_Salida').DataTable();
        var InfoSalida = tableSalida.rows().data();
        var empresatransporte = 1;
        if (InfoSalida.length != 0) {
            // Add the uploaded file content to the form data collection

            if ($("#Involucrados_salida").val() == "0") {
                $("button[data-id=Involucrados_salida]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Involucrados_salida]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#EtaSalida").val() == "") {
                $("#EtaSalida").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("#EtaSalida").css("background", "rgba(255, 0, 0, 0)");
            }
            if ($("#Tipo_nodoSalida").val() == "0") {
                $("button[data-id=Tipo_nodoSalida]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Tipo_nodoSalida]").css("background", "rgba(255, 0, 0, 0)");
            }
            if ($("#NodoSalida").val() == "0") {
                $("button[data-id=NodoSalida]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=NodoSalida]").css("background", "rgba(255, 0, 0, 0)");
            }
            if ($("select[name=NodoSalida]").val() == "3" && $("select[name=Tipo_nodoSalida]").val() == "6" && $("#TipoEnvio").val() == "1") {
                if ($("#Fecharealrecuperacion").val() == "") {
                    $("#Fecharealrecuperacion").css("background", "rgba(255, 0, 0, 0.4)");
                    return false;
                } else {
                    $("#Fecharealrecuperacion").css("background", "rgba(255, 0, 0, 0)");
                }
            }


            if ($("#ConFallas").is(':checked')) {
                var Fallas = 1;
            } else {
                var Fallas = 0;
            }

            var contControllers = 0;
            var contModems = 0;
            var msge = "";
            var Controladores = [];

            for (var i = 0; i < InfoSalida.length ; i++) {
                Controladores.push(InfoSalida[i][0]);
                if (InfoSalida[i][0] == "" || InfoSalida[i][0] == null) {
                    var contControllers = contControllers + 1;
                } else if (InfoSalida[i][1] == "" || InfoSalida[i][1] == null) {
                    var contModems = contModems + 1;
                }
            }
            if ($("#Involucrados_salida").val() == "1") {
                if (contModems > 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado o sin controlador asociado ";
                } else if (contModems > 0 && contControllers == 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                } else if (contModems == 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_salida").val() == "2") {
                if (InfoSalida.length == contControllers && contControllers > 0) {
                    swal("Error", "No existen Controladores seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_salida").val() == "3") {
                if (InfoSalida.length == contModems && contModems > 0) {
                    swal("Error", "No existen Modems seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contModems > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                }
            }



            if(msge!="")
            {
                swal({
                    title: 'Estas seguro?',
                    text: msge,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si'
                }).then((result) => {
                    for (var i = 0; i < InfoSalida.length ; i++) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarSalida", "Controlador")',

                            data: {
                                Controlador: InfoSalida[i][0],
                                Modem: InfoSalida[i][1],
                                FechaEnvio: "01/01/1990",
                                FechaRecuperacion: $("#Fecharealrecuperacion").val(),
                                Eta: $("#EtaSalida").val(),
                                NumeroEnvio: $("#Numero_envioSalida").val(),
                                Courier: $("#Empresa_transporteSalida").val(),
                                TipoNodoDestino: $("#Tipo_nodoSalida").val(),
                                NodoDestino: $("#NodoSalida").val(),
                                Nota: $("#Nota_logistica_salida").val(),
                                IdNave: $("#Nave_salida").val(),
                                Viaje: $("#Viaje_salida").val(),
                                Retrieval: $("#RetrievalSalida").val(),
                                //Fallas: Fallas,
                                Involucrados: $("#Involucrados_salida").val(),
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {

                                    //ENVIAR CORREO A AREA LEGAL
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("CorreoLegal", "Controlador")',
                                        data: {
                                            ListaControladores: Controladores,
                                            Accion: 2,
                                        },
                                        success: function (response) {
                                        }
                                    });

                                    location.reload();

                                })
                            }
                        });
                    }
                });
            } else
            {
                swal({
                    title: 'Estas seguro?',
                    text: msge,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si'
                }).then((result) => {
                    for (var i = 0; i < InfoSalida.length ; i++) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarSalida", "Controlador")',
                            data: {
                                Controlador: InfoSalida[i][0],
                                Modem: InfoSalida[i][1],
                                FechaEnvio: "01/01/1990",
                                FechaRecuperacion: $("#Fecharealrecuperacion").val(),
                                Eta: $("#EtaSalida").val(),
                                NumeroEnvio: $("#Numero_envioSalida").val(),
                                Courier: $("#Empresa_transporteSalida").val(),
                                TipoNodoDestino: $("#Tipo_nodoSalida").val(),
                                NodoDestino: $("#NodoSalida").val(),
                                Nota: $("#Nota_logistica_salida").val(),
                                IdNave: $("#Nave_salida").val(),
                                Viaje: $("#Viaje_salida").val(),
                                Retrieval: $("#RetrievalSalida").val(),
                                //Fallas: Fallas,
                                Involucrados: $("#Involucrados_salida").val(),
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {

                                    //ENVIAR CORREO A AREA LEGAL
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("CorreoLegal", "Controlador")',
                                        data: {
                                            ListaControladores: Controladores,
                                            Accion: 2,
                                        },
                                        success: function (response) {
                                        }
                                    });

                                    location.reload();

                                })
                            }
                        });
                    }
                });
            }
        } else {
            swal('Ups!', '<span class="alerta" key="errorcontroladoreslogistica">Debe seleccionar al menos un controlador.</span>', 'error');
        }
    });


    $("#prueba").click(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTipoNodoPorNombre", "Controlador")',
            data: { NombreTipoNodo: "PORT"},
            success: function (response) {
                alert(response);
            }
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNodoPorNombre", "Controlador")',
            data: { NombreNodo: "PUERTO BOLIVAR" },
            success: function (response) {
                alert(response);
            }
        });
    });

    $("#Guardar_salidanodos").click(function () {
        var contControllers = 0;
        var contModems = 0;
        var msge = "";
        var Controladores = [];
        var tableSalida = $('#Tb_SalidaNodos').DataTable();
        var InfoSalida = tableSalida.rows().data();

        if ($("#Involucrados_salidanodos").val() == "0") {
            $("button[data-id=Involucrados_salidanodos]").css("background", "rgba(255, 0, 0, 0.4)");
            return false;
        } else {
            $("button[data-id=Involucrados_salidanodos]").css("background", "rgba(255, 0, 0, 0)");
        }

        if (InfoSalida.length != 0) {

            for (var i = 0; i < InfoSalida.length ; i++) {
                Controladores.push(InfoSalida[i][0]);
                if (InfoSalida[i][0] == "" || InfoSalida[i][0] == null) {
                    var contControllers = contControllers + 1;
                } else if (InfoSalida[i][1] == "" || InfoSalida[i][1] == null) {
                    var contModems = contModems + 1;
                }
            }
            if ($("#Involucrados_salidanodos").val() == "1") {
                if (contModems > 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado o sin controlador asociado ";
                } else if (contModems > 0 && contControllers == 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                } else if (contModems == 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_salidanodos").val() == "2") {
                if (InfoSalida.length == contControllers && contControllers > 0) {
                    swal("Error", "No existen Controladores seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_salidanodos").val() == "3") {
                if (InfoSalida.length == contModems && contModems > 0) {
                    swal("Error", "No existen Modems seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contModems > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                }
            }

            if(msge!="")
            {
                swal({
                    title: 'Estas seguro?',
                    text: msge,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si'
                }).then((result) => {
                    for (var i = 0; i < InfoSalida.length ; i++) {

                        var tipo_nodo_destino = 0;
                        var nodo_destino = 0;
                        var nave = 0;

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetTipoNodoPorNombre", "Controlador")',
                            data: { NombreTipoNodo: InfoSalida[i][4] },
                            async: false,
                            success: function (response) {
                                tipo_nodo_destino = response;
                            }
                        });

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetNodoPorNombre", "Controlador")',
                            data: { NombreNodo: InfoSalida[i][5] },
                            async: false,
                            success: function (response) {
                                nodo_destino = response;
                            }
                        });

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetNavePorNombre", "Controlador")',
                            data: { NombreNave: InfoSalida[i][8] },
                            async: false,
                            success: function (response) {
                                nave = response;
                            }
                        });

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarSalida", "Controlador")',
                            async: false,
                            data: {
                                Controlador: InfoSalida[i][0],
                                Modem: InfoSalida[i][1],
                                FechaEnvio: "01/01/1990",
                                Eta: InfoSalida[i][7],
                                TipoNodoDestino: tipo_nodo_destino,
                                NodoDestino: nodo_destino,
                                Nota: $("#Nota_logistica_salidaNodos").val(),
                                IdNave: nave,
                                Viaje: InfoSalida[i][9],
                                Involucrados: $("#Involucrados_salidanodos").val()
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    location.reload();
                                })
                            }
                        });
                    }
                });
            } else
            {

                for (var i = 0; i < InfoSalida.length ; i++) {

                    var tipo_nodo_destino = 0;
                    var nodo_destino = 0;
                    var nave = 0;

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetTipoNodoPorNombre", "Controlador")',
                        data: { NombreTipoNodo: InfoSalida[i][4] },
                        async: false,
                        success: function (response) {
                            tipo_nodo_destino = response;
                        }
                    });

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetNodoPorNombre", "Controlador")',
                        data: { NombreNodo: InfoSalida[i][5] },
                        async: false,
                        success: function (response) {
                            nodo_destino = response;
                        }
                    });

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetNavePorNombre", "Controlador")',
                        data: { NombreNave: InfoSalida[i][8] },
                        async: false,
                        success: function (response) {
                            nave = response;
                        }
                    });

                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("AgregarSalida", "Controlador")',
                        async: false,
                        data: {
                            Controlador: InfoSalida[i][0],
                            Modem: InfoSalida[i][1],
                            FechaEnvio: "01/01/1990",
                            Eta: InfoSalida[i][7],
                            TipoNodoDestino: tipo_nodo_destino,
                            NodoDestino: nodo_destino,
                            Nota: $("#Nota_logistica_salidaNodos").val(),
                            IdNave: nave,
                            Viaje: InfoSalida[i][9],
                            Involucrados: $("#Involucrados_salidanodos").val()
                        },
                        success: function (response) {
                            var json = JSON.parse(response);
                            if (json.validador == 0) {
                                var aux = 'success';
                            } else {
                                var aux = 'warning';
                            }
                            swal({
                                title: '',
                                text: json.Mensaje,
                                type: aux,
                                showCancelButton: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar'
                            }).then((result) => {
                                location.reload();
                            })
                        }
                    });
                }
            }

        } else {
            swal('Ups!', '<span class="alerta" key="errorcontroladoreslogistica">Debe seleccionar al menos un ESN.</span>', 'error');
        }
    });

    $(".AgregarcontroladorSalida").click(function () {
        if ($("#ControladorSalida").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: { ESN: $("#ControladorSalida").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>ESN no existe en los registros</span>', 'warning');
                        $("#ControladorSalida").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número ESN válido.</span>', 'success');
                        var cuentaaux = $('#Tb_Salida tr').length - 2;
                        var tableControlador = $('#Tb_Salida').DataTable();
                        var Info = tableControlador.rows().data();
                        var i = 0;
                        $("#ControladorSalida").css("background", "rgba(255, 0, 0, 0)");


                        if (Info.length != 0) {
                            while (i < Info.length) {
                                if (Info[i][0] == $("#ControladorSalida").val()) {
                                    swal('Ups!', '<span class="alerta" key="errorcontroladortabla">Controlador seleccionado ya existe en la tabla.</span>', 'error');
                                    return false;
                                } else {
                                    i++;
                                }
                            }
                        }

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetESNByNumberESN", "Controlador")',
                            data: { NumESN: $("#ControladorSalida").val() },
                            success: function (response1) {
                                var json = JSON.parse(response1);
                                var cuenta = json.length;
                                var cuentatabla = $('#Tb_Salida tr').length - 2;
                                var tableIngreso = $('#Tb_Salida').DataTable();
                                for (var i = 0 ; i < cuenta ; i++) {
                                    tableIngreso.row.add([
                                        json[i].Controlador,
                                        json[i].Modem,
                                        json[i].Contenedor,
                                        json[i].Naviera,
                                        json[i].ContinenteOrigen,
                                        json[i].PaisOrigen,
                                        json[i].CiudadOrigen,
                                        json[i].TipoNodoOrigen,
                                        json[i].NodoOrigen,
                                        "",
                                        "",
                                        "",
                                        "",
                                        json[i].Estado
                                    ]).draw(false);

                                    cuentatabla++;
                                }
                            }
                        });
                    }
                }
            });
        } else {
            $("#ControladorSalida").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $(".SubirArchivoSalidaNodo").click(function () {
        if ($('#ArchivoSalidaNodos').val() != "") {
            $("#ArchivoSalidaNodos").css("background", "rgba(255, 0, 0, 0)");
            var fileUpload = document.getElementById("ArchivoSalidaNodos");
            if (fileUpload.value != null) {
                var uploadFile = new FormData();
                var files = $("#ArchivoSalidaNodos").get(0).files;
                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    uploadFile.append("Controladores", files[0]);
                    $.ajax({
                        url: '@Url.Action("LeerExcelNodos", "Controlador")',
                        contentType: false,
                        processData: false,
                        data: uploadFile,
                        type: 'POST',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            if (cuenta != 0) {
                                if (json == "Error de Datos") {
                                    swal('Ups!', '<span> Error de Datos.</span>', 'error');
                                    return false;
                                } else if (json == "Error de Formato") {
                                    swal('Ups!', '<span> Error de Formato.</span>', 'error');
                                    return false;
                                } else {
                                    for (var i = 0 ; i < cuenta ; i++) {
                                        var eta = formatDate(json[i].Eta);
                                        var FechaEnvio = formatDate(json[i].FechaEnvio);
                                        data.push([json[i].Controlador,
                                                    json[i].Modem,
                                                    json[i].TipoNodoOrigen,
                                                    json[i].NodoOrigen,
                                                    json[i].TipoNodoDestino,
                                                    json[i].NodoDestino,
                                                    FechaEnvio,
                                                    eta,
                                                    json[i].Nave,
                                                    json[i].Viaje,
                                                    json[i].Prioritario,
                                                    json[i].Estado]);
                                    }
                                    var tableIngreso = $('#Tb_SalidaNodos').DataTable();
                                    tableIngreso.destroy();
                                    var tableIngreso = $('#Tb_SalidaNodos').DataTable({
                                        data: data,
                                    });
                                    $("#tablanodos").show();
                                }
                            }
                        }
                    });
                }
            }
        } else {
            $("#ArchivoSalidaNodos").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $(".SubirArchivoSalida").click(function () {
        if ($('#ArchivoSalida').val() != "") {
            $("#ArchivoSalida").css("background", "rgba(255, 0, 0, 0)");
            var fileUpload = document.getElementById("ArchivoSalida");
            if (fileUpload.value != null) {
                var uploadFile = new FormData();
                var files = $("#ArchivoSalida").get(0).files;
                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    uploadFile.append("Controladores", files[0]);
                    $.ajax({
                        url: '@Url.Action("LeerExcel1", "Controlador")',
                        contentType: false,
                        processData: false,
                        data: uploadFile,
                        type: 'POST',
                        success: function (response) {
                            var data = [];
                            var controladoresValidados = [];
                            var controladoresNoValidados = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            if (cuenta != 0) {
                                if (json == "Error de datos") {
                                    swal('Ups!', '<span> Error de Datos.</span>', 'error');
                                    return false;
                                } else if (json == "Error de formato") {
                                    swal('Ups!', '<span> Error de Formato.</span>', 'error');
                                    return false;
                                } else if (json == "Error de datos, algunos controladores no poseen servicios") {
                                    swal('Ups!', '<span> Error de datos, algunos ESNs no poseen servicios.</span>', 'error');
                                    return false;
                                }
                                else {
                                    $("#courier_div").show();

                                    for (var i = 0 ; i < cuenta ; i++) {

                                        if (json[i].FechaUltAccLog != null) {
                                            var fechaUltAccLog = formatDate(json[i].FechaUltAccLog);
                                        } else {
                                            var fechaUltAccLog = "";
                                        }

                                        data.push([json[i].Controlador, json[i].Modem, json[i].Contenedor, json[i].Naviera, json[i].ContinenteDestino, json[i].NodoDestino, fechaUltAccLog, json[i].RetrievalProvider, json[i].Prioritario, json[i].Estado]);
                                    }

                                    if (controladoresNoValidados.length > 0 && json[0].EmpresaTransporte !="")
                                    {
                                        $.ajax({
                                            type: "POST",
                                            url: '@Url.Action("EnviarControladoresServicio", "Controlador")',
                                            data: { ControladoresValidados: controladoresValidados,
                                                ControladoresNoValidados: controladoresNoValidados},
                                            success: function (response) {
                                                var json = JSON.parse(response);
                                                if (json.validador == 0) {
                                                    var aux = 'success';
                                                } else {
                                                    var aux = 'warning';
                                                }
                                                swal({
                                                    title: '',
                                                    text: 'Algunos controladores no se cargaron correctamente, los cuales se detallaran en un correo que llegará a tu casilla',
                                                    type: aux,
                                                    showCancelButton: false,
                                                    confirmButtonColor: '#3085d6',
                                                    cancelButtonColor: '#d33',
                                                    confirmButtonText: 'Aceptar'
                                                }).then((result) => {
                                                    var tableIngreso = $('#Tb_Salida').DataTable();
                                                    tableIngreso.destroy();
                                                    var tableIngreso = $('#Tb_Salida').DataTable({
                                                        data: data,
                                                    });
                                                })
                                            }
                                        });
                                    } else if (controladoresNoValidados.length == 0 && json[0].EmpresaTransporte != "")
                                    {
                                        swal("", "Todos los controladores se cargaron correctamente", "success");

                                        var tableIngreso = $('#Tb_Salida').DataTable();
                                        tableIngreso.destroy();
                                        var tableIngreso = $('#Tb_Salida').DataTable({
                                            data: data,
                                        });
                                    } else
                                    {
                                        var tableIngreso = $('#Tb_Salida').DataTable();
                                        tableIngreso.destroy();
                                        var tableIngreso = $('#Tb_Salida').DataTable({
                                            data: data,
                                        });
                                    }


                                }
                            }
                        }
                    });
                }
            }
        } else {
            $("#ArchivoSalida").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });




    $("#Logistica").click(function () {

        $("#Log_ingreso").hide();
        $("#Log_salida").hide();
        $("#div_botones").show();
        $("#Log_perdida").hide();
        $("#div_botones_perdida").hide();
        $("#Log_nota").hide();
        $("#div_botones_salidanodos").hide();
        $("#Log_salidanodos").hide();
        $("#Tipo_accion").val(0);
        $("#Tipo_accion").selectpicker("refresh");

        $("#EtaSalida, #Fecha_real_envioSalida,#Fecha_real_envioIngreso, #Fecha_real_arriboSalida, #Fecha_recupera, #Fecha_real_arriboIngreso, #Fecharealrecuperacion, #FecharealrecuperacionIngreso").datepicker({
            dateFormat: "dd-mm-yy",
            firstDay: 1,
            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
            monthNames:
                ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort:
                ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
            showWeek: true
        });

        $('#LogisticaControlador').trigger('click');
    });

    function formatDate(date) {
        if (date != null) {
            var fecha = date.substring(0, 10);
            var ano = date.substring(0, 4);
            var mes = date.substring(5, 7);
            var dia = date.substring(8, 10);
            return dia + "/" + mes + "/" + ano;
        } else {
            return "";
        }

    }

    $("#Historico").click(function () {

        var table = $('#Tb_Historico').DataTable();
        table.destroy();

        $('#Tb_Historico tfoot th').each(function (i) {
            var title = $('#Tb_Historico thead th').eq($(this).index()).text();
            $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');

        });

        var table = $("#Tb_Historico").DataTable({
            scrollX: true,
            ajax: {
                "url": "@Url.Action("GetHistoricoControlador", "Controlador")",
            "dataSrc": ''
        },
            dom: 'Bfrtip',
            buttons: [
                'excel'
            ],
        columns: [
            { "data": "NumControlador" },
            { "data": "IdControlador" },
            { "data": "Modem" },
            { "data": "TipoMovimiento" },
            { "data": "TipoLugarOrigen" },
            { "data": "LugarOrigen" },
            { "data": "TipoLugarDestino" },
            { "data": "LugarDestino" },
            { "data": "TipoLugarRecuperacion" },
            { "data": "LugarRecuperacion" },
            { "data": "FechaEnvio",
                "render":
                function (data, type, row, meta) {
                    if (data != null) {
                        var fecha = FormatDate(data);
                        return fecha;
                    } else {
                        return "";
                    }
                }
            },
            { "data": "FechaEntrada",
                "render":
                function (data, type, row, meta) {
                    if (data != null) {
                        var fecha = FormatDate(data);
                        return fecha;
                    } else {
                        return "";
                    }
                }
            },
            { "data": "FechaRecuperacion",
                "render":
                function (data, type, row, meta) {
                    if (data != null) {
                        var fecha = FormatDate(data);
                        return fecha;
                    } else {
                        return "";
                    }
                }
            },
        ],
        });

    table.columns().every(function () {
        var that = this;
        $('input', this.footer()).on('keyup change', function () {
            if (that.search() !== this.value) {
                that
                    .search(this.value)
                    .draw();
            }
        });
    });

    $('#HistoricoControlador').trigger('click');
    });

    $("#Tipo_accion_recuperacion").change(function (){
        if ($("#Tipo_accion_recuperacion").val() == "0") {
            $("#Rec_notificacion").hide();
            $("#div_botones_notificacion").hide();
            $("#Rec_controlador").hide();
            $("#div_botones_recuperacion").hide();
            $("#Rec_priorizacion").hide();
            $("#div_botones_priorizacion").hide();


            $("#div_buscar_rp").hide();
            $("#div_buscar_rp_naviera").hide();
            $("#Filtros_rp").val("0");
            $("#Filtros_rp").selectpicker("refresh");


        } else if ($("#Tipo_accion_recuperacion").val() == "1") {
            $("#Rec_notificacion").show();
            $("#div_botones_notificacion").show();
            $("#Rec_controlador").hide();
            $("#div_botones_recuperacion").hide();
            $("#Rec_priorizacion").hide();
            $("#div_botones_priorizacion").hide();

            $("#Controlador_rp_noti").css("background", "rgba(255, 0, 0, 0)");

            $("#div_buscar_rp").hide();
            $("#div_buscar_rp_naviera").hide();
            $("#Filtros_rp").val("0");
            $("#Filtros_rp").selectpicker("refresh");


            //OBTENER TIPO LUGARES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTipoLugares", "TipoLugar")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Tipo de Nodo</option>";
                    $("#Tipo_nodo_rp_recupera").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Tipo_nodo_rp_noti").append(optionsAsString);
                    $("#Tipo_nodo_rp_noti").selectpicker("refresh");
                },
            });
            //OBTENER TIPO LUGARES

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Retrieval_provider_noti').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#Retrieval_provider_noti').append(optionsAsString);
                    $('#Retrieval_provider_noti').selectpicker('refresh');
                },
            });

            var tableControlador = $('#Tb_Controlador').DataTable();
            var Info = tableControlador.rows('.selected').data();
            var dataNotifica = [];

            for (var i = 0; i < Info.length ; i++) {

                var estado = "";

                if (Info[i]["PerdidoTxt"] != "SIN PERDIDA") {
                    estado = "PERDIDO";
                } else if (Info[i]["EstadoServicio"] == "CANCELLED") {
                    estado = "CANCELLED";
                } else if (Info[i]["EstadoServicio"] == "PRECANCELLED") {
                    estado = "PRECANCELLED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "NOT ARRIVED" && Info[i]["EstadoServicio"] == "ON SERVICE TRIP") {
                    estado = "ON SERVICE TRIP";
                } else if ((Info[i]["NodoDestino"] == "ROTTERDAM" || Info[i]["NodoDestino"] == "BODEGA - ROTTERDAM") && Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED") {
                    estado = "BODEGA ROTTERDAM";
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        if (Info[i]["EmpresaTransporte"] != "W/O DATA" && Info[i]["NumeroEnvio"] != "") {
                            estado = "COURIER AEREO";
                        }
                        else {
                            estado = "COURIER MARITIMO";
                        }
                    } else if (Info[i]["NodoDestino"] == "ROTTERDAM") {
                        estado = "COURIER EUROPA";
                    } else {
                        estado = "IN TRANSIT";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && Info[i]["EstadoServicio"] == "NOT RECOVERED") {
                    estado = "IN TRANSIT";
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    estado = "RECOVERED";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                    if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        estado = "LAB";
                    } else {
                        estado = "RECOVERED";
                    }
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                    estado = "LAB";
                } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && (Info[i]["EstadoServicio"] == "NOT RECOVERED" || (Info[i]["EstadoServicio"] == "RECOVERED" && Info[i]["NumControlador"] == ""))) {

                    var fecha = Info[i]["FechaArribo"];

                    var validacion = FormatDateDias(fecha);
                    if (validacion == 1 || validacion == 2) {
                        estado = "ARRIVED";
                    } else if (validacion == 0) {
                        estado = "NOT RECOVERED";
                    } else {
                        estado = "";
                    }
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && (Info[i]["EstadoRecuperacion"] == "ARRIVED" || Info[i]["EstadoRecuperacion"] == "N.A.") && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] != "DEPOT") {
                    estado = "SERVICE PROVIDER " + Info[i]["PaisDestino"].trim();
                } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "N.A." && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] == "DEPOT") {
                    estado = "DEPOT " + Info[i]["NodoDestino"].trim();
                } else {
                    estado = "";
                }

                dataNotifica.push([Info[i]["NumControlador"], Info[i]["NumModem"], Info[i]["Contenedor"], Info[i]["Naviera"],
                Info[i]["RetrievalProvider"], Info[i]["NodoDestino"], Info[i]["PrioritarioTxt"], estado]);
            }
            //Cargar los controladores seleccionados

            var tableNotifica = $('#Tb_Notificacion').DataTable();
            tableNotifica.destroy();

            var tableNotifica = $('#Tb_Notificacion').DataTable({
                data: dataNotifica,
            });

            $("button[data-id=Retrieval_provider_noti]").css("background", "rgba(255, 0, 0, 0)");


        } else if ($("#Tipo_accion_recuperacion").val() == "2") {
            $("#Rec_notificacion").hide();
            $("#div_botones_notificacion").hide();
            $("#Rec_controlador").show();
            $("#div_botones_recuperacion").show();
            $("#Rec_priorizacion").hide();
            $("#div_botones_priorizacion").hide();


            $("#div_buscar_rp").hide();
            $("#div_buscar_rp_naviera").hide();
            $("#Filtros_rp").val("0");
            $("#Filtros_rp").selectpicker("refresh");

            $('#Continente_rp_recupera').attr('disabled', 'disabled');
            $('#Continente_rp_recupera').val("0");
            $('#Continente_rp_recupera').selectpicker('refresh');
            $('#Pais_rp_recupera').attr('disabled', 'disabled');
            $('#Pais_rp_recupera').val("0");
            $('#Pais_rp_recupera').selectpicker('refresh');
            $('#Ciudad_rp_recupera').attr('disabled', 'disabled');
            $('#Ciudad_rp_recupera').val("0");
            $('#Ciudad_rp_recupera').selectpicker('refresh');
            $('#Nodo_rp_recupera').attr('disabled', 'disabled');
            $('#Nodo_rp_recupera').val("0");
            $('#Nodo_rp_recupera').selectpicker('refresh');
            $("button[data-id=Retrieval_provider_recupera]").css("background", "rgba(255, 0, 0, 0)");
            $("#Fecha_recupera").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Tipo_nodo_rp_recupera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nodo_rp_recupera]").css("background", "rgba(255, 0, 0, 0)");
            $("#ArchivoRecuperacion").css("background", "rgba(255, 0, 0, 0)");
            $("#Controlador_rp_recupera").css("background", "rgba(255, 0, 0, 0)");


            //Cargar los controladores seleccionados
            var tableControlador = $('#Tb_Controlador').DataTable();
            var Info = tableControlador.rows('.selected').data();
            var dataRecupera = [];
            var error = [];
            var validacion = 0;


            for (var i = 0; i < Info.length ; i++) {
                if (Info[i]["NumControlador"] != "") {
                    validacion = validarcontrolador(Info[i]["NumControlador"]);
                } else {
                    validacion = validarmodem(Info[i]["NumModem"]);
                }
                if (validacion == 1) {
                    var eta = "";
                    var estado = "";


                    if (Info[i]["Eta"] != null && Info[i]["Eta"] != "") {
                        eta = FormatDate(Info[i]["Eta"]);
                    }


                    if (Info[i]["PerdidoTxt"] != "SIN PERDIDA") {
                        estado = "PERDIDO";
                    } else if (Info[i]["EstadoServicio"] == "CANCELLED") {
                        estado = "CANCELLED";
                    } else if (Info[i]["EstadoServicio"] == "PRECANCELLED") {
                        estado = "PRECANCELLED";
                    } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "NOT ARRIVED" && Info[i]["EstadoServicio"] == "ON SERVICE TRIP") {
                        estado = "ON SERVICE TRIP";
                    } else if ((Info[i]["NodoDestino"] == "ROTTERDAM" || Info[i]["NodoDestino"] == "BODEGA - ROTTERDAM") && Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED") {
                        estado = "BODEGA ROTTERDAM";
                    } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                        if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                            if (Info[i]["EmpresaTransporte"] != "W/O DATA" && Info[i]["NumeroEnvio"] != "") {
                                estado = "COURIER AEREO";
                            }
                            else {
                                estado = "COURIER MARITIMO";
                            }
                        } else if (Info[i]["NodoDestino"] == "ROTTERDAM") {
                            estado = "COURIER EUROPA";
                        } else {
                            estado = "IN TRANSIT";
                        }
                    } else if (Info[i]["TransitoNodoTxt"] == "IN TRANSIT" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && Info[i]["EstadoServicio"] == "NOT RECOVERED") {
                        estado = "IN TRANSIT";
                    } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                        estado = "RECOVERED";
                    } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "RECOVERED") {
                        if (Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                            estado = "LAB";
                        } else {
                            estado = "RECOVERED";
                        }
                    } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "RECOVERED" && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["NodoDestino"] == "LIVENTUS LAB") {
                        estado = "LAB";
                    } else if (Info[i]["TransitoNodoTxt"] == "IN NODE" && Info[i]["EstadoRecuperacion"] == "ARRIVED" && (Info[i]["EstadoServicio"] == "NOT RECOVERED" || (Info[i]["EstadoServicio"] == "RECOVERED" && Info[i]["NumControlador"] == ""))) {

                        var fecha = Info[i]["FechaArribo"];

                        var validacion = FormatDateDias(fecha);
                        if (validacion == 1 || validacion == 2) {
                            estado = "ARRIVED";
                        } else if (validacion == 0) {
                            estado = "NOT RECOVERED";
                        } else {
                            estado = "";
                        }
                    } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && (Info[i]["EstadoRecuperacion"] == "ARRIVED" || Info[i]["EstadoRecuperacion"] == "N.A.") && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] != "DEPOT") {
                        estado = "SERVICE PROVIDER " + Info[i]["PaisDestino"].trim();
                    } else if ((Info[i]["TransitoNodoTxt"] == "IN NODE" || Info[i]["TransitoNodoTxt"] == "IN TRANSIT") && Info[i]["EstadoRecuperacion"] == "N.A." && Info[i]["EstadoServicio"] == "W/O DATA" && Info[i]["TipoNodoDestino"] == "DEPOT") {
                        estado = "DEPOT " + Info[i]["NodoDestino"].trim();
                    } else {
                        estado = "";
                    }

                    dataRecupera.push([Info[i]["NumControlador"], Info[i]["NumModem"], Info[i]["Contenedor"], Info[i]["Naviera"], eta,
                        Info[i]["RetrievalProvider"], Info[i]["NodoDestino"], Info[i]["PrioritarioTxt"], estado]);
                } else {
                    error.push([Info[i]["NumControlador"]]);
                }

            }
            //Cargar los controladores seleccionados

            if (error.length != 0) {
                var controladores = "";
                for (var j = 0; j < error.length; j++) {
                    controladores += "<b> - " + error[j] + "</b><br>";
                    swal({
                        html: "No se cargaron los siguientes controladres por no tener un servicio asociado : <br>" + controladores,
                        confirmButtonText: "Aceptar",
                    });
                }
            }

            var tableRecupera = $('#Tb_Recuperacion').DataTable();
            tableRecupera.destroy();

            var tableRecupera = $('#Tb_Recuperacion').DataTable({
                data: dataRecupera,
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Retrieval_provider_recupera').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#Retrieval_provider_recupera').append(optionsAsString);
                    $('#Retrieval_provider_recupera').selectpicker('refresh');
                },
            });

            //OBTENER TIPO LUGARES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTipoLugares", "TipoLugar")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Tipo de Nodo</option>";
                    $("#Tipo_nodo_rp_recupera").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Tipo_nodo_rp_recupera").append(optionsAsString);
                    $("#Tipo_nodo_rp_recupera").selectpicker("refresh");
                },
            });
            //OBTENER TIPO LUGARES
        } else if ($("#Tipo_accion_recuperacion").val() == "3") {

            $("#Rec_notificacion").hide();
            $("#div_botones_notificacion").hide();
            $("#Rec_controlador").hide();
            $("#div_botones_recuperacion").hide();
            $("#Rec_priorizacion").show();
            $("#div_botones_priorizacion").show();

            $("#Legal").prop('checked', true);
            $("#Tecnico").prop('checked', false);
            $("#Comercial").prop('checked', false);

            $("#Legal").click(function () {
                if ($("#Legal").is(':checked')) {
                    $("#Tecnico").prop('checked', false);
                    $("#Comercial").prop('checked', false);
                }
            });

            $("#Tecnico").click(function () {
                if ($("#Tecnico").is(':checked')) {
                    $("#Legal").prop('checked', false);
                    $("#Comercial").prop('checked', false);
                }
            });

            $("#Comercial").click(function () {
                if ($("#Comercial").is(':checked')) {
                    $("#Legal").prop('checked', false);
                    $("#Tecnico").prop('checked', false);
                }
            });

            $("button[data-id=Controlador_priorizar]").css("background", "rgba(255, 0, 0, 0)");
            //OBTENER CONTROLADORES
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetControladores", "Controlador")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Controlador_priorizar").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Selecciona un Controlador</option>"
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].NumControlador + "</option>";
                    }
                    $("#Controlador_priorizar").append(optionsAsString);
                    $("#Controlador_priorizar").selectpicker("refresh");
                },
            });
            //OBTENER CONTROLADORES
        }
    });

    $("#Tipo_nodo_rp_noti").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContinentes", "Continente")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Continente</option>";
                $("#Continente_rp_noti").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Continente_rp_noti").append(optionsAsString);
                $("#Continente_rp_noti").removeAttr('disabled');
                $("#Continente_rp_noti").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                $("#Pais_rp_noti").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Pais_rp_noti").append(optionsAsString);
                $("#Pais_rp_noti").removeAttr('disabled');
                $("#Pais_rp_noti").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                $("#Ciudad_rp_noti").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Ciudad_rp_noti").append(optionsAsString);
                $("#Ciudad_rp_noti").removeAttr('disabled');
                $("#Ciudad_rp_noti").selectpicker("refresh");
            },
        });

        $("#Nodo_rp_noti").removeAttr('disabled');
        $("#Nodo_rp_noti").selectpicker('refresh');


        if ($("#Tipo_nodo_rp_noti").val() == "0") {

            $("#Continente_rp_noti").attr('disabled', 'disabled');
            $("#Continente_rp_noti").val("0");
            $("#Continente_rp_noti").selectpicker('refresh');
            $("#Pais_rp_noti").attr('disabled', 'disabled');
            $("#Pais_rp_noti").val("0");
            $("#Pais_rp_noti").selectpicker('refresh');
            $("#Ciudad_rp_noti").attr('disabled', 'disabled');
            $("#Ciudad_rp_noti").val("0");
            $("#Ciudad_rp_noti").selectpicker('refresh');
            $("#Nodo_rp_noti").attr('disabled', 'disabled');
            $("#Nodo_rp_noti").val("0");
            $("#Nodo_rp_noti").selectpicker('refresh');

        } else if ($("#Tipo_nodo_rp_noti").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPackingActivos", "Packing")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Packing</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetBodegas", "Bodega")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_noti").append(optionsAsString);
                    $("#Nodo_rp_noti").selectpicker('refresh');
                },
            });
        }
    });

    $("#Continente_rp_noti").change(function () {

        if ($("#Continente_rp_noti").val() != "0") {

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesContinente", "Paises")',
                data: { IdContinente: $("#Continente_rp_noti").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Pais_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Pais</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Pais_rp_noti").append(optionsAsString);
                    $("#Pais_rp_noti").selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesContinente", "Ciudad")',
                data: { IdContinente: $("#Continente_rp_noti").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_noti").append(optionsAsString);
                    $("#Ciudad_rp_noti").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoContinente", "Deposito")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsContinente", "Packing")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoContinente", "Antepuerto")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenContinente", "Puertos")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoContinente", "Puertos")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione ¨Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasaContinente", "Bodega")',
                    data: { IdContinente: $("#Continente_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesActivos", "Paises")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                    $("#Pais_rp_noti").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Pais_rp_noti").append(optionsAsString);
                    $("#Pais_rp_noti").removeAttr('disabled');
                    $("#Pais_rp_noti").selectpicker("refresh");
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                    $("#Ciudad_rp_noti").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Ciudad_rp_noti").append(optionsAsString);
                    $("#Ciudad_rp_noti").removeAttr('disabled');
                    $("#Ciudad_rp_noti").selectpicker("refresh");
                },
            });

            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Pais_rp_noti").change(function () {

        if ($("#Pais_rp_noti").val() != "0") {
            $("#Continente_rp_noti").val("0");
            $("#Continente_rp_noti").selectpicker("refresh");

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_noti").append(optionsAsString);
                    $("#Ciudad_rp_noti").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_noti").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_noti").append(optionsAsString);
                    $("#Ciudad_rp_noti").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Ciudad_rp_noti").change(function () {

        if ($("#Ciudad_rp_noti").val() != "0") {
            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsCiudad", "Packing")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasCiudad", "Bodega")',
                    data: { IdCiudad: $("#Ciudad_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        } else {
            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_noti").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_noti").append(optionsAsString);
                        $("#Nodo_rp_noti").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Nodo_rp_noti").change(function () {
        if ($("#Nodo_rp_noti").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderByNodo", "Retrieval")',
                data: {
                    TipoNodo: $("#Tipo_nodo_rp_noti").val(),
                    Nodo: $("#Nodo_rp_noti").val()
                },
                success: function (response) {
                    var json = JSON.parse(response);
                    var text = "";
                    var aux = "";
                    var largo = 0;
                    var cuenta = 0;
                    cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Retrieval_provider_noti").selectpicker();
                        $("#Retrieval_provider_noti").selectpicker('val', parseInt(json[0].IdRetrievalProvider));
                    }
                }
            });

            if ($("#Tipo_nodo_rp_noti").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoDeposito", "Deposito")',
                    data: { IdDeposito: $("#Nodo_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_noti").val(json[0].IdContinente);
                            $("Continente_rp_noti").selectpicker('refresh');
                            $("Pais_rp_noti").val(json[0].IdPais);
                            $("Pais_rp_noti").selectpicker('refresh');
                            $("Ciudad_rp_noti").val(json[0].IdCiudad);
                            $("Ciudad_rp_noti").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPacking", "Packing")',
                    data: { IdPacking: $("#Nodo_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_noti").val(json[0].IdContinente);
                            $("Continente_rp_noti").selectpicker('refresh');
                            $("Pais_rp_noti").val(json[0].IdPais);
                            $("Pais_rp_noti").selectpicker('refresh');
                            $("Ciudad_rp_noti").val(json[0].IdCiudad);
                            $("Ciudad_rp_noti").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                    data: { IdAntepuerto: $("#Nodo_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_noti").val(json[0].IdContinente);
                            $("Continente_rp_noti").selectpicker('refresh');
                            $("Pais_rp_noti").val(json[0].IdPais);
                            $("Pais_rp_noti").selectpicker('refresh');
                            $("Ciudad_rp_noti").val(json[0].IdCiudad);
                            $("Ciudad_rp_noti").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                    data: { IdPuertoOrigen: $("#Nodo_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_noti").val(json[0].IdContinente);
                            $("Continente_rp_noti").selectpicker('refresh');
                            $("Pais_rp_noti").val(json[0].IdPais);
                            $("Pais_rp_noti").selectpicker('refresh');
                            $("Ciudad_rp_noti").val(json[0].IdCiudad);
                            $("Ciudad_rp_noti").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_noti").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoBodega", "Bodega")',
                    data: { IdBodega: $("#Nodo_rp_noti").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_noti").val(json[0].IdContinente);
                            $("Continente_rp_noti").selectpicker('refresh');
                            $("Pais_rp_noti").val(json[0].IdPais);
                            $("Pais_rp_noti").selectpicker('refresh');
                            $("Ciudad_rp_noti").val(json[0].IdCiudad);
                            $("Ciudad_rp_noti").selectpicker('refresh');
                        }
                    },
                });
            }

        }
    });

    $("#Filtros_rp").change(function () {
        if ($("#Filtros_rp").val() == "0") {
            $("#div_buscar_rp").hide();
            $("#div_buscar_rp_naviera").hide();

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Retrieval_provider_noti').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#Retrieval_provider_noti').append(optionsAsString);
                    $('#Retrieval_provider_noti').selectpicker('refresh');
                },
            });
        }else if ($("#Filtros_rp").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetNavierasActivas", "Naviera")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Naviera_rp_noti').empty();

                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Selecciona una Naviera</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#Naviera_rp_noti').append(optionsAsString);
                    $('#Naviera_rp_noti').selectpicker('refresh');
                },
            });

            $("#div_buscar_rp_naviera").show();
            $("#div_buscar_rp").hide();
        } else if ($("#Filtros_rp").val() == "2") {

            $("#div_buscar_rp").show();
            $("#div_buscar_rp_naviera").hide();
        }
    });

    $("#Naviera_rp_noti").change(function () {
        if ($("#Naviera_rp_noti").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderByNaviera", "Retrieval")',
                data: { IdNaviera: $('#Naviera_rp_noti').val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Retrieval_provider_noti').empty();
                    $('#Retrieval_provider_recupera').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Retrieval Provider</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }
                    $('#Retrieval_provider_noti').append(optionsAsString);
                    $('#Retrieval_provider_noti').selectpicker('refresh');
                    $('#Retrieval_provider_recupera').append(optionsAsString);
                    $('#Retrieval_provider_recupera').selectpicker('refresh');

                }
            });
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetNavierasActivas", "Naviera")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Naviera_rp_noti').empty();

                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Selecciona una Naviera</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#Naviera_rp_noti').append(optionsAsString);
                    $('#Naviera_rp_noti').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderActivas", "Retrieval")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#Retrieval_provider_noti').empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Retrieval Provider</option>";

                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdRetrievalProvider + "'>" + json[i].NombreRetrievalProvider + "</option>";
                    }

                    $('#Retrieval_provider_noti').append(optionsAsString);
                    $('#Retrieval_provider_noti').selectpicker('refresh');
                },
            });
        }
    });

    $("#Agregar_controlador_rp_noti").click(function () {
        if ($("#Controlador_rp_noti").val() != "") {
            var cuentaaux = $('#Tb_Notificacion tr').length - 2;
            var tableControlador = $('#Tb_Notificacion').DataTable();
            var Info = tableControlador.rows().data();
            var i = 0;

            $("#Controlador_rp_noti").css("background", "rgba(255, 0, 0, 0)");

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarControlador", "Controlador")',
                data: { Controlador: $("#Controlador_rp_noti").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Controlador no existe en los registros</span>', 'warning');
                        $("#Controlador_rp_noti").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número controlador válido.</span>', 'success');
                        if (Info.length != 0) {
                            while (i < Info.length) {
                                if (Info[i][0] == $("#Controlador_rp_noti").val()) {
                                    swal('Ups!', '<span class="alerta" key="errorcontroladortabla">Controlador seleccionado ya existe en la tabla.</span>', 'error');
                                    return false;
                                } else {
                                    i++;
                                }
                            }i
                        }
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetESNByNumberESN", "Controlador")',
                            data: { NumESN: $("#Controlador_rp_noti").val() },
                            success: function (response) {
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                var cuentatabla = $('#Tb_Notificacion tr').length - 2;
                                var tableIngreso = $('#Tb_Notificacion').DataTable();
                                for (var i = 0 ; i < cuenta ; i++) {
                                    tableIngreso.row.add([
                                        json[i].Controlador,
                                        json[i].Modem,
                                        json[i].Contenedor,
                                        json[i].Naviera,
                                        json[i].RetrievalProvider,
                                        json[i].NodoDestino,
                                        json[i].Estado
                                    ]).draw(false);

                                    cuentatabla++;
                                }
                            }
                        });
                    }
                }
            });

        } else {
            $("#Controlador_rp_noti").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $(".SubirArchivoNotificacion").click(function () {
        if ($('#ArchivoNotificacion').val() != "") {
            $("#ArchivoNotificacion").css("background", "rgba(255, 0, 0, 0)");
            var fileUpload = document.getElementById("ArchivoNotificacion");
            if (fileUpload.value != null) {
                var uploadFile = new FormData();
                var files = $("#ArchivoNotificacion").get(0).files;
                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    uploadFile.append("Controladores", files[0]);
                    $.ajax({
                        url: '@Url.Action("LeerExcel1", "Controlador")',
                        contentType: false,
                        processData: false,
                        data: uploadFile,
                        type: 'POST',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            if (cuenta != 0) {
                                if (json[0].Controlador == undefined) {
                                    swal('Ups!', '<span> Error de Extensión del archivo.</span>', 'error');
                                    return false;
                                } else {
                                    for (var i = 0 ; i < cuenta ; i++) {
                                        data.push([json[i].Controlador, json[i].Modem, json[i].Contenedor, json[i].Naviera, json[i].RetrievalProvider, json[i].NodoDestino, json[i].Prioritario, json[i].Estado]);
                                    }
                                    var tableNotifica = $('#Tb_Notificacion').DataTable();
                                    tableNotifica.destroy();
                                    var tableNotifica = $('#Tb_Notificacion').DataTable({
                                        data: data,
                                    });
                                }
                            } else {
                                swal('Ups!', '<span> Archivo no cumple con el formato correcto.</span>', 'error');
                                return false;
                            }
                        }
                    });
                }
            }
        } else {
            $("#ArchivoNotificacion").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#Tipo_nodo_rp_recupera").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContinentes", "Continente")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Continente</option>";
                $("#Continente_rp_recupera").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Continente_rp_recupera").append(optionsAsString);
                $("#Continente_rp_recupera").removeAttr('disabled');
                $("#Continente_rp_recupera").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                $("#Pais_rp_recupera").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Pais_rp_recupera").append(optionsAsString);
                $("#Pais_rp_recupera").removeAttr('disabled');
                $("#Pais_rp_recupera").selectpicker("refresh");
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                $("#Ciudad_rp_recupera").empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $("#Ciudad_rp_recupera").append(optionsAsString);
                $("#Ciudad_rp_recupera").removeAttr('disabled');
                $("#Ciudad_rp_recupera").selectpicker("refresh");
            },
        });

        $("#Nodo_rp_recupera").removeAttr('disabled');
        $("#Nodo_rp_recupera").selectpicker('refresh');


        if ($("#Tipo_nodo_rp_recupera").val() == "0") {

            $("#Continente_rp_recupera").attr('disabled', 'disabled');
            $("#Continente_rp_recupera").val("0");
            $("#Continente_rp_recupera").selectpicker('refresh');
            $("#Pais_rp_recupera").attr('disabled', 'disabled');
            $("#Pais_rp_recupera").val("0");
            $("#Pais_rp_recupera").selectpicker('refresh');
            $("#Ciudad_rp_recupera").attr('disabled', 'disabled');
            $("#Ciudad_rp_recupera").val("0");
            $("#Ciudad_rp_recupera").selectpicker('refresh');
            $("#Nodo_rp_recupera").attr('disabled', 'disabled');
            $("#Nodo_rp_recupera").val("0");
            $("#Nodo_rp_recupera").selectpicker('refresh');

        } else if ($("#Tipo_nodo_rp_recupera").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPackingActivos", "Packing")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Packing</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPuertos", "Puertos")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetBodegas", "Bodega")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $("#Nodo_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Nodo_rp_recupera").append(optionsAsString);
                    $("#Nodo_rp_recupera").selectpicker('refresh');
                },
            });
        }
    });

    $("#Continente_rp_recupera").change(function () {

        if ($("#Continente_rp_recupera").val() != "0") {

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesContinente", "Paises")',
                data: { IdContinente: $("#Continente_rp_recupera").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Pais_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Pais</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Pais_rp_recupera").append(optionsAsString);
                    $("#Pais_rp_recupera").selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesContinente", "Ciudad")',
                data: { IdContinente: $("#Continente_rp_recupera").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_recupera").append(optionsAsString);
                    $("#Ciudad_rp_recupera").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoContinente", "Deposito")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsContinente", "Packing")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoContinente", "Antepuerto")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenContinente", "Puertos")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoContinente", "Puertos")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione ¨Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasaContinente", "Bodega")',
                    data: { IdContinente: $("#Continente_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetPaisesActivos", "Paises")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                    $("#Pais_rp_recupera").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Pais_rp_recupera").append(optionsAsString);
                    $("#Pais_rp_recupera").removeAttr('disabled');
                    $("#Pais_rp_recupera").selectpicker("refresh");
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                    $("#Ciudad_rp_recupera").empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $("#Ciudad_rp_recupera").append(optionsAsString);
                    $("#Ciudad_rp_recupera").removeAttr('disabled');
                    $("#Ciudad_rp_recupera").selectpicker("refresh");
                },
            });

            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Pais_rp_recupera").change(function () {
        if ($("#Pais_rp_recupera").val() != "0") {
            $("#Continente_rp_recupera").val("0");
            $("#Continente_rp_recupera").selectpicker("refresh");

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_recupera").append(optionsAsString);
                    $("#Ciudad_rp_recupera").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestino", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $("#Ciudad_rp_recupera").empty();
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                    $("#Ciudad_rp_recupera").append(optionsAsString);
                    $("#Ciudad_rp_recupera").selectpicker('refresh');
                },
            });

            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestino", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Ciudad_rp_recupera").change(function () {

        if ($("#Ciudad_rp_recupera").val() != "0") {
            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Deposito</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingsCiudad", "Packing")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Packing</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Antepuerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosDestinoCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegasCiudad", "Bodega")',
                    data: { IdCiudad: $("#Ciudad_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        } else {
            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Deposito</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Packing</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Antepuerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "5") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Puerto</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetBodegas", "Bodega")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $("#Nodo_rp_recupera").empty();
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Bodega</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }

                        $("#Nodo_rp_recupera").append(optionsAsString);
                        $("#Nodo_rp_recupera").selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Nodo_rp_recupera").change(function () {
        if ($("#Nodo_rp_recupera").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetRetrievalProviderByNodo", "Retrieval")',
                data: {
                    TipoNodo: $("#Tipo_nodo_rp_recupera").val(),
                    Nodo: $("#Nodo_rp_recupera").val()
                },
                success: function (response) {
                    var json = JSON.parse(response);
                    var text = "";
                    var aux = "";
                    var largo = 0;
                    var cuenta = 0;
                    cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Retrieval_provider_recupera").selectpicker();
                        $("#Retrieval_provider_recupera").selectpicker('val', parseInt(json[0].IdRetrievalProvider));
                    }
                }
            });


            if ($("#Tipo_nodo_rp_recupera").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoDeposito", "Deposito")',
                    data: { IdDeposito: $("#Nodo_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_recupera").val(json[0].IdContinente);
                            $("Continente_rp_recupera").selectpicker('refresh');
                            $("Pais_rp_recupera").val(json[0].IdPais);
                            $("Pais_rp_recupera").selectpicker('refresh');
                            $("Ciudad_rp_recupera").val(json[0].IdCiudad);
                            $("Ciudad_rp_recupera").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPacking", "Packing")',
                    data: { IdPacking: $("#Nodo_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_recupera").val(json[0].IdContinente);
                            $("Continente_rp_recupera").selectpicker('refresh');
                            $("Pais_rp_recupera").val(json[0].IdPais);
                            $("Pais_rp_recupera").selectpicker('refresh');
                            $("Ciudad_rp_recupera").val(json[0].IdCiudad);
                            $("Ciudad_rp_recupera").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                    data: { IdAntepuerto: $("#Nodo_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_recupera").val(json[0].IdContinente);
                            $("Continente_rp_recupera").selectpicker('refresh');
                            $("Pais_rp_recupera").val(json[0].IdPais);
                            $("Pais_rp_recupera").selectpicker('refresh');
                            $("Ciudad_rp_recupera").val(json[0].IdCiudad);
                            $("Ciudad_rp_recupera").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                    data: { IdPuertoOrigen: $("#Nodo_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_recupera").val(json[0].IdContinente);
                            $("Continente_rp_recupera").selectpicker('refresh');
                            $("Pais_rp_recupera").val(json[0].IdPais);
                            $("Pais_rp_recupera").selectpicker('refresh');
                            $("Ciudad_rp_recupera").val(json[0].IdCiudad);
                            $("Ciudad_rp_recupera").selectpicker('refresh');
                        }
                    },
                });
            } else if ($("#Tipo_nodo_rp_recupera").val() == "6") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoBodega", "Bodega")',
                    data: { IdBodega: $("#Nodo_rp_recupera").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("Continente_rp_recupera").val(json[0].IdContinente);
                            $("Continente_rp_recupera").selectpicker('refresh');
                            $("Pais_rp_recupera").val(json[0].IdPais);
                            $("Pais_rp_recupera").selectpicker('refresh');
                            $("Ciudad_rp_recupera").val(json[0].IdCiudad);
                            $("Ciudad_rp_recupera").selectpicker('refresh');
                        }
                    },
                });
            }
        }
    });

    $("#Agregar_controlador_rp_recupera").click(function () {
        if ($("#Controlador_rp_recupera").val() != "") {
            var cuentaaux = $('#Tb_Recuperacion tr').length - 2;
            var tableControlador = $('#Tb_Recuperacion').DataTable();
            var Info = tableControlador.rows().data();
            var i = 0;

            $("#Controlador_rp_recupera").css("background", "rgba(255, 0, 0, 0)");
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarESN", "Controlador")',
                data: { ESN: $("#Controlador_rp_recupera").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>ESN no existe en los registros</span>', 'warning');
                        $("#Controlador_rp_recupera").val("");
                        return false;
                    } else {
                        swal('Ok!', '<span>Número ESN válido.</span>', 'success');

                        if (Info.length != 0) {
                            while (i < Info.length) {
                                if (Info[i][0] == $("#Controlador_rp_recupera").val() || Info[i][1] == $("#Controlador_rp_recupera").val()) {
                                    swal('Ups!', '<span class="alerta" key="errorcontroladortabla">ESN seleccionado ya existe en la tabla.</span>', 'error');
                                    return false;
                                } else {
                                    i++;
                                }
                            }
                        }
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetESNByNumberESN", "Controlador")',
                            data: { NumESN: $("#Controlador_rp_recupera").val() },
                            success: function (response) {
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                var cuentatabla = $('#Tb_Recuperacion tr').length - 2;
                                var tableIngreso = $('#Tb_Recuperacion').DataTable();
                                for (var i = 0 ; i < cuenta ; i++) {
                                    tableIngreso.row.add([
                                        json[i].Controlador,
                                        json[i].Modem,
                                        json[i].Contenedor,
                                        json[i].Naviera,
                                        json[i].Eta,
                                        json[i].RetrievalProvider,
                                        json[i].NodoDestino,
                                        json[i].Estado
                                    ]).draw(false);

                                    cuentatabla++;
                                }
                            }
                        });
                    }
                }
            });
        } else {
            $("#Controlador_rp_recupera").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $(".SubirArchivoRecuperacion").click(function () {
        if ($('#ArchivoRecuperacion').val() != "") {
            $("#ArchivoRecuperacion").css("background", "rgba(255, 0, 0, 0)");
            var fileUpload = document.getElementById("ArchivoRecuperacion");
            if (fileUpload.value != null) {
                var uploadFile = new FormData();
                var files = $("#ArchivoRecuperacion").get(0).files;
                // Add the uploaded file content to the form data collection
                if (files.length > 0) {
                    uploadFile.append("Controladores", files[0]);
                    $.ajax({
                        url: '@Url.Action("LeerExcelRecuperacion", "Controlador")',
                        contentType: false,
                        processData: false,
                        data: uploadFile,
                        type: 'POST',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            if (cuenta != 0) {
                                if (json == "Error de datos") {
                                    swal('Ups!', '<span> Error de Datos.</span>', 'error');
                                    return false;
                                } else if (json == "Error de formato") {
                                    swal('Ups!', '<span> Error de Formato.</span>', 'error');
                                    return false;
                                } else {
                                    for (var i = 0 ; i < cuenta ; i++) {
                                        data.push([json[i].Controlador, json[i].Modem, json[i].Contenedor, json[i].Naviera, json[i].Eta, json[i].RetrievalProvider, json[i].NodoDestino, json[i].Prioritario, json[i].Estado]);
                                    }
                                    var tableNotifica = $('#Tb_Recuperacion').DataTable();
                                    tableNotifica.destroy();
                                    var tableNotifica = $('#Tb_Recuperacion').DataTable({
                                        data: data,
                                    });
                                }
                            }
                        }
                    });
                }
            }
        } else {
            $("#ArchivoRecuperacion").css("background", "rgba(255, 0, 0, 0.4)");
        }
    });

    $("#Guardar_recupera").click(function () {
        var tableRecupera = $('#Tb_Recuperacion').DataTable();
        var InfoRecupera = tableRecupera.rows().data();

        if (InfoRecupera.length != 0) {
            if ($("#Involucrados_recuperacion").val() == "0") {
                $("button[data-id=Involucrados_recuperacion]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Involucrados_recuperacion]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#Retrieval_provider_recupera").val() == "0") {
                $("button[data-id=Retrieval_provider_recupera]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Retrieval_provider_recupera]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#Fecha_recupera").val() == "0" || $("#Fecha_recupera").val()=="") {
                $("#Fecha_recupera").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            }else{
                $("#Fecha_recupera").css("background", "rgba(255, 0, 0, 0)");
            }

            var contControllers = 0;
            var contModems = 0;
            var msge = "";
            var Controladores = [];

            for (var i = 0; i < InfoRecupera.length ; i++) {
                Controladores.push(InfoRecupera[i][0]);

                if (InfoRecupera[i][0] == "" || InfoRecupera[i][0] == null) {
                    var contControllers = contControllers + 1;
                } else if (InfoRecupera[i][1] == null || InfoRecupera[i][1] == "") {
                    var contModems = contModems + 1;
                }
            }

            if ($("#Involucrados_recuperacion").val() == "1") {
                if (contModems > 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado o sin controlador asociado ";
                } else if (contModems > 0 && contControllers == 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                } else if (contModems == 0 && contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_recuperacion").val() == "2") {
                if (InfoRecupera.length == contControllers && contControllers > 0) {
                    swal("Error", "No existen Controladores seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contControllers > 0) {
                    msge = "Existen movimientos logisticos sin controlador asociado ";
                }

            } else if ($("#Involucrados_recuperacion").val() == "3") {
                if (InfoRecupera.length == contModems && contModems > 0) {
                    swal("Error", "No existen Modems seleccionados para realizar la acción", "warning");
                    return false;
                } else if (contModems > 0) {
                    msge = "Existen movimientos logisticos sin modem asociado ";
                }
            }

            if(msge!="")
            {
                swal({
                    title: 'Estas seguro?',
                    text: msge,
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Si'
                }).then((result) => {
                    for (var i = 0; i < InfoRecupera.length ; i++) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("AgregarRecuperacion", "Controlador")',
                            data: {
                                Controlador: InfoRecupera[i][0],
                                Modem: InfoRecupera[i][1],
                                RP: $("#Retrieval_provider_recupera").val(),
                                FechaRecupera: $("#Fecha_recupera").val(),
                                TipoNodoRecupera: 0,
                                NodoRecupera: 0,
                                Involucrados: $("#Involucrados_recuperacion").val()
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                } else {
                                    var aux = 'warning';
                                }
                                swal({
                                    title: '',
                                    text: json.Mensaje,
                                    type: aux,
                                    showCancelButton: false,
                                    confirmButtonColor: '#3085d6',
                                    cancelButtonColor: '#d33',
                                    confirmButtonText: 'Aceptar'
                                }).then((result) => {
                                    //ENVIAR CORREO A AREA LEGAL
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("CorreoLegal", "Controlador")',
                                        data: {
                                            ListaControladores: Controladores,
                                            Accion: 3,
                                        },
                                        success: function (response) {
                                        }
                                    });

                                    location.reload();
                                })
                            }
                        });
                    }
                });
            }else
            {
                for (var i = 0; i < InfoRecupera.length ; i++) {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("AgregarRecuperacion", "Controlador")',
                        data: {
                            Controlador: InfoRecupera[i][0],
                            Modem: InfoRecupera[i][1],
                            RP: $("#Retrieval_provider_recupera").val(),
                            FechaRecupera: $("#Fecha_recupera").val(),
                            TipoNodoRecupera: 0,
                            NodoRecupera: 0,
                            Involucrados: $("#Involucrados_recuperacion").val()
                        },
                        success: function (response) {
                            var json = JSON.parse(response);
                            if (json.validador == 0) {
                                var aux = 'success';
                            } else {
                                var aux = 'warning';
                            }
                            swal({
                                title: '',
                                text: json.Mensaje,
                                type: aux,
                                showCancelButton: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar'
                            }).then((result) => {
                                //ENVIAR CORREO A AREA LEGAL
                                $.ajax({
                                    type: "POST",
                                    url: '@Url.Action("CorreoLegal", "Controlador")',
                                    data: {
                                        ListaControladores: Controladores,
                                        Accion: 3,
                                    },
                                    success: function (response) {
                                    }
                                });

                                location.reload();
                            })
                        }
                    });
                }
            }


        }else{
            swal('Ups!', '<span class="alerta" key="errorcontroladoreslogistica">Debe seleccionar al menos un controlador.</span>', 'error');
        }
    });

    $("#EnviarCorreo").click(function () {
        //var Controlador = $('#Controlador_rp_noti').val();
        var tableNotifica = $('#Tb_Notificacion').DataTable();
        var InfoNotifica = tableNotifica.rows().data();

        if (InfoNotifica.length != 0) {
            var controlador = [];
            var modem = [];

            if ($("#Involucrados_notificacion").val() == "0") {
                $("button[data-id=Involucrados_notificacion]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Involucrados_notificacion]").css("background", "rgba(255, 0, 0, 0)");
            }

            if ($("#Retrieval_provider_noti").val() == "0") {
                $("button[data-id=Retrieval_provider_noti]").css("background", "rgba(255, 0, 0, 0.4)");
                return false;
            } else {
                $("button[data-id=Retrieval_provider_noti]").css("background", "rgba(255, 0, 0, 0)");
            }


            for (var i = 0; i < InfoNotifica.length; i++){
                controlador.push(InfoNotifica[i][0]);
                modem.push(InfoNotifica[i][1]);
            }

            var controladores = JSON.stringify(controlador);
            var modems = JSON.stringify(modem);

            var contControllers = 0;
            var contModems = 0;
            var msge = "";

            for (var i = 0; i < InfoNotifica.length ; i++) {
                if (InfoNotifica[i][0] == "" || InfoNotifica[i][0] == null) {
                    contControllers = contControllers + 1;
                } else if (InfoNotifica[i][1] == "" || InfoNotifica[i][1] == null) {
                    contModems = contModems + 1;
                }
            }

            if ($("#Involucrados_notificacion").val() == "1") {
                msge = "Se notificarán movimientos logisticos con controladores y modems, incluso si no tienen alguno de los dos asignado.";
            } else if ($("#Involucrados_notificacion").val() == "2") {
                if (contControllers > 0 && contControllers == InfoNotifica.length) {
                    swal("Error", "No existen movimientos logisticos para Controladores", "warning");
                    return false;
                } else {
                    msge = "Se notificarán solo los controladores seleccionados, no considerando los modems asociados.";
                }


            } else if ($("#Involucrados_notificacion").val() == "3") {
                if (contModems > 0 && contModems == InfoNotifica.length) {
                    swal("Error", "No existen movimientos logisticos para Modems", "warning");
                    return false;
                } else {
                    msge = "Se notificarán solo los modems seleccionados, no considerando los controladores asociados. ";
                }

            }

            swal({
                title: 'Estas seguro?',
                text: msge,
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si'
            }).then((result) => {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("EnviarCorreo", "Controlador")',
                    data: {
                        Controladores: controlador,
                        Modems: modem,
                        Retrieval: $("#Retrieval_provider_noti").val(),
                        Involucrados: $("#Involucrados_notificacion").val(),
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            });
        } else {
            swal('Ups!', '<span class="alerta" key="errorcontroladoreslogistica">Debe seleccionar al menos un controlador.</span>', 'error');
        }
    });

    $("#Recuperacion").click(function () {

        $("#Rec_notificacion").hide();
        $("#Rec_controlador").hide();
        $("#div_botones_notificacion").hide();
        $("#div_botones_priorizacion").hide();
        $("#Rec_priorizacion").hide();
        $("#div_botones_priorizacion").hide();
        $('#Tipo_accion_recuperacion').val("0");
        $('#Tipo_accion_recuperacion').selectpicker('refresh');

        $("#Fecha_recupera").datepicker({
            dateFormat: "dd-mm-yy",
            firstDay: 1,
            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
            monthNames:
                ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort:
                ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
            showWeek: true
        });

        $('#RecuperacionControlador').trigger('click');
    });

    $("#Fecha_inicio_filtro, #Fecha_termino_filtro, #FechaPerdida").datepicker({
        dateFormat: "dd-mm-yy",
        firstDay: 1,
        dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
        dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
        monthNames:
            ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
            "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        monthNamesShort:
            ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
            "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
        showWeek: true
    });

    function validarcontrolador(Controlador)
    {
        var valor = null;
        $.ajax({
            async: false,
            type: "POST",
            global: false,
            url: '@Url.Action("ValidarControladorServicio", "Controlador")',
            data: { Controlador: Controlador },
            success: function (response) {
                json = JSON.parse(response);
                valor = json;
            },
        });
        return valor;
    }

    function validarmodem(Modem) {
        var valor = null;
        $.ajax({
            async: false,
            type: "POST",
            global: false,
            url: '@Url.Action("ValidarModemServicio", "Modem")',
            data: { Modem: Modem },
            success: function (response) {
                json = JSON.parse(response);
                valor = json;
            },
        });
        return valor;
    }

    $("#AgregarFalla").click(function () {
        //Cargar los controladores seleccionados
        var tableControlador = $('#Tb_Controlador').DataTable();

        var Info = tableControlador.rows('.selected').data();
        var dataSalida = [];

        for (var i = 0; i < Info.length ; i++) {
            if (Info[i]["DamageReportTxt"] != "YES") {
                if (Info[i]["NumControlador"] != "") {
                    dataSalida.push(Info[i]["NumControlador"]);
                } else if (Info[i]["NumModem"] != "") {
                    dataSalida.push(Info[i]["NumModem"]);
                }
            }
        }

        if (dataSalida.length != 0) {
            for (var i = 0; i < dataSalida.length ; i++) {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("AgregarDamageReport", "Controlador")',
                    data: {
                        Controlador: dataSalida[i]
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            }
        } else {
            swal('Ups!', '<span> Error en la selección de datos.</span>', 'error');
        }
    });

    $("#QuitarFalla").click(function () {
        //Cargar los controladores seleccionados
        var tableControlador = $('#Tb_Controlador').DataTable();

        var Info = tableControlador.rows('.selected').data();
        var dataSalida = [];

        for (var i = 0; i < Info.length ; i++) {
            if (Info[i]["DamageReportTxt"] != "NO") {
                dataSalida.push(Info[i]["NumControlador"]);
            }
        }

        if (dataSalida.length != 0) {
            for (var i = 0; i < dataSalida.length ; i++) {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("QuitarDamageReport", "Controlador")',
                    data: {
                        Controlador: dataSalida[i]
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            }
        } else {
            swal('Ups!', '<span> Error en la selección de datos.</span>', 'error');
        }
    });

    $("#EliminarMovLogistico").click(function () {
        //Cargar los controladores seleccionados
        var tableControlador = $('#Tb_Controlador').DataTable();

        var Info = tableControlador.rows('.selected').data();
        var dataSalida = [];
        swal({
            title: 'Estas seguro?',
            text: '',
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si'
        }).then((result) => {

            for (var i = 0; i < Info.length ; i++) {
                if (Info[i]["NumControlador"] != "") {
                    dataSalida.push(Info[i]["NumControlador"]);
                } else {
                    dataSalida.push(Info[i]["NumModem"]);
                }
            }

            if (dataSalida.length != 0) {
                for (var i = 0; i < dataSalida.length ; i++) {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("EliminarMovLogistico", "Controlador")',
                        data: {
                            ListaESN: dataSalida[i]
                        },
                        success: function (response) {
                            var json = JSON.parse(response);
                            if (json.validador == 0) {
                                var aux = 'success';
                            } else {
                                var aux = 'warning';
                            }
                            swal({
                                title: '',
                                text: json.Mensaje,
                                type: aux,
                                showCancelButton: false,
                                confirmButtonColor: '#3085d6',
                                cancelButtonColor: '#d33',
                                confirmButtonText: 'Aceptar'
                            }).then((result) => {
                                location.reload();
                            })
                        }
                    });
                }
            } else {
                swal('Ups!', '<span> Error en la selección de datos.</span>', 'error');
            }
        });
    });

    

    $("#verVistaCompleta").click(function () {
        var url = 'GestionarLogisticaControlador';
        window.location.href = url;
    });


</script>


