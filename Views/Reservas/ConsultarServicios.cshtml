@{
    ViewBag.Title = "ConsultarServicios";
    Layout = "~/Views/MasterPage.cshtml";
    int PerfilInterior = Convert.ToInt32(Session["PerfilInterior"]);
    string Usuario = Session["User"].ToString().ToUpper();
}

<script src="~/Vendors/sweetalert/sweetalert2.min.js"></script>
<link rel="stylesheet" href="~/Vendors/sweetalert/sweetalert2.min.css">
<script src="~/Vendors/sweetalert/core.js"></script>
<!--Select2-->
<link rel="stylesheet" href="~/Vendors/Chosen/chosen.min.css">
<script src="~/Vendors/Chosen/chosen.jquery.min.js"></script>
<div class="col-sm-12">
    <div class="x_panel">
        <div class="x_title">
            <div class="row">
                <div class="col-sm-7">
                    <h2 class="tr" key="botonagregarresultados">Gestionar / Agregar Servicios</h2>
                </div>
                <div class="col-sm-3">
                    <button type="button" class="btn btn-success tr" id="AgregarServ" key="botonagregarservicios">Agregar Servicio</button>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class="x_panel">
                <div class="x_title">
                    <h2 class="tr" key="filtrofechas">Filtro de Fechas</h2>
                    <div class="clearfix"></div>
                </div>
                <div class="row">
                    <div class="col-lg-10">
                        <form class="form-inline">
                            <div class="form-group">
                                <select class="selectpicker form-control" data-live-search="true" id="Tipo_busqueda">
                                    <option selected value="0">FILTER BY ...</option>
                                    <option value="1">CURTAIN INSTALLATION DATE</option>
                                    @*<option value="2">FECHA INSTALACION CONTROLADOR</option>*@
                                    <option value="2">GASIFICATION DATE</option>
                                    @*<option value="4">FECHA ULTIMA DESCARGA DE DATOS</option>
                                    <option value="5">FECHA ULTIMO FAULT ANALYSIS</option>*@
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="Fecha_inicio" class="control-label tr" key="fechainicio">Fecha Inicio</label>
                                <input type="text" class="form-control" id="Fecha_inicio" />
                            </div>
                            <div class="form-group">
                                <label for="Fecha_termino" class="control-label tr" key="entre">Entre</label>
                                <input type="text" class="form-control" id="Fecha_termino" />
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-2">
                        <button class="btn btn-primary tr" key="filtrar" id="FiltroFechas">Filtrar</button>
                        <button class="btn btn-warning tr" key="limpiar" id="Limpiar">Limpiar</button>
                    </div>
                </div>
            </div>
            <div class="x_panel">
                <table id="Tb_Servicios" class="table table-striped table-bordered display nowrap">
                    <thead>
                        <tr>
                            <th colspan="10" class="tr" key="identificaciontablaservicio">IDENTIFICACION</th>
                            <th colspan="4" class="tr" key="estadostablaservicio">ESTADOS</th>
                            <th colspan="5" class="tr" key="instalacioncortinaservicio">INSTALACION CORTINA</th>
                            <th colspan="4" class="tr" key="gasificacionservicio">GASIFICACION</th>
                            <th colspan="3" class="tr" key="tratamientoservicio">TRATAMIENTO CO2</th>
                        </tr>
                        <tr>
                            <th class="tr" key="idservicio">ID SERVICIO</th>
                            <th class="tr">BOOKING</th>
                            <th class="tr">COMMODITY PROGRAMADO</th>
                            <th class="tr">EXPORTADOR</th>
                            <th class="tr" key="contenedorservicio" >N° CONTENEDOR</th>
                            <th class="tr">ETA</th>
                            <th class="tr" key="naveservicio">NAVE 1</th>
                            <th class="tr" key="naveservicio">NAVE 2</th>
                            <th class="tr" key="naveservicio">NAVE 3</th>
                            <th class="tr" key="controladorservicio">ULTIMO CONTROLADOR</th>
                            <th class="tr" key="estadoservicio">ESTADO SERVICIO</th>
                            <th class="tr" key="cortinaservicio">CORTINA INSTALADA</th>
                            <th class="tr" key="gasificadoservicio">GASIFICADO</th>
                            <th class="tr" key="validaciontecnicaservicio">VALIDACION TECNICA</th>
                            <th class="tr" key="fechacortinaservicio">FECHA INSTALACION</th>
                            <th class="tr" key="tipolugarcortinaservicio">TIPO LUGAR</th>
                            <th class="tr" key="lugarcortinaservicio">LUGAR INSTALACION</th>
                            <th >INSTALADOR</th>
                            <th class="tr" key="cantidadpurafilservicio">CANTIDAD SACHET PURAFIL</th>
                            <th class="tr" key="fechagasificacionservicio">FECHA</th>
                            <th class="tr" key="tecnicogasificacionservicio">TECNICO</th>
                            <th class="tr" key="tipolugargasificacionservicio">TIPO LUGAR</th>
                            <th class="tr" key="lugargasificacionservicio">LUGAR</th>
                            <th class="tr" key="tratamientoco2servicio">TIPO TRATAMIENTO CO2</th>
                            <th class="tr" key="cantidadfiltroservicio">CANTIDAD FILTROS</th>
                            <th class="tr" key="cantidadcalservicio">CANTIDAD CAL</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th class="tr" key="idservicio">ID SERVICIO</th>
                            <th class="tr">BOOKING</th>
                            <th class="tr">COMMODITY PROGRAMADO</th>
                            <th class="tr">EXPORTADOR</th>
                            <th class="tr" key="contenedorservicio">N° CONTENEDOR</th>
                            <th class="tr">ETA</th>
                            <th class="tr" key="naveservicio">NAVE 1</th>
                            <th class="tr" key="naveservicio">NAVE 2</th>
                            <th class="tr" key="naveservicio">NAVE 3</th>
                            <th class="tr" key="controladorservicio">ULTIMO CONTROLADOR</th>
                            <th class="tr" key="estadoservicio">ESTADO SERVICIO</th>
                            <th class="tr" key="cortinaservicio">CORTINA INSTALADA</th>
                            <th class="tr" key="gasificadoservicio">GASIFICADO</th>
                            <th class="tr" key="validaciontecnicaservicio">VALIDACION TECNICA</th>
                            <th class="tr" key="fechacortinaservicio">FECHA INSTALACION</th>
                            <th class="tr" key="tipolugarcortinaservicio">TIPO LUGAR</th>
                            <th class="tr" key="lugarcortinaservicio">LUGAR INSTALACION</th>
                            <th>INSTALADOR</th>
                            <th class="tr" key="cantidadpurafilservicio">CANTIDAD SACHET PURAFIL</th>
                            <th class="tr" key="fechagasificacionservicio">FECHA</th>
                            <th class="tr" key="tecnicogasificacionservicio">TECNICO</th>
                            <th class="tr" key="tipolugargasificacionservicio">TIPO LUGAR</th>
                            <th class="tr" key="lugargasificacionservicio">LUGAR</th>
                            <th class="tr" key="tratamientoco2servicio">TIPO TRATAMIENTO CO2</th>
                            <th class="tr" key="cantidadfiltroservicio">CANTIDAD FILTROS</th>
                            <th class="tr" key="cantidadcalservicio">CANTIDAD CAL</th>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <form class="form-inline">
                        <div class="form-group">
                            <label for="IdReserva">ID Servicio</label>
                            <input type="text" class="input form-control" id="IdServicio" disabled="disabled" onchange="CargarLugares()" style="text-align:center; text-align-last:center;" />
                            <input type="text" class="input form_control" id="IdControlador" hidden="hidden" />
                        </div>

                    </form>
                </div>
            </div>
            <div class="divider"></div>
            <div class="row">
                <div class="col-lg-10 col-lg-offset-2">
                    <button type="button" class="btn btn-primary tr" id="Editar" style="margin-bottom: 0px;" key="botoneditarservicio"> Editar Servicio</button>
                    <button type="button" class="btn btn-info tr" id="Leaktest" style="margin-bottom: 0px;" key="botondetalleleaktest"> Detalle Leak test</button>
                    <button type="button" class="btn btn-success tr" id="Controladores" style="margin-bottom: 0px;" key="botonhistorialcontroladores">Historial Controladores</button>
                    <button type="button" class="btn btn-primary tr" id="Modificaciones" style="margin-bottom: 0px;" key="botonmodificacionesservicio">Historial Modificaciones </button>
                    <button type="button" class="btn btn-danger tr" id="Cancelar" style="margin-bottom: 0px;" key="botoncancelarservicio"> Cancelar Servicio</button>
                </div>
            </div>
        </div>
    </div>

    <!--Modal para Agregar Servicio-->
    <div class="modal fade" id="myModalAgregar" tabindex="-1" role="dialog" aria-labelledby="myModalLabelAgregar"  style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title tr" id="myModalLabelAgregar" key="tituloagregarservicio">Agregar Servicio</h3>
                </div>
                <div class="modal-body">
                    <form id="FormControl" data-parsley-validate class="form-horizontal form-label-left">
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="indentificacionservicio">Identificacion Servicio</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_booking_agregar" class="control-label col-md-3 col-sm-3 col-xs-6">Booking</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Booking_agregar" class="form-control col-md-7 col-xs-12" readonly="readonly" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-3 col-sm-3 col-xs-6">Naviera</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Naviera_agregar" class="form-control col-md-7 col-xs-12" readonly="readonly" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_exportador" class="control-label col-md-3 col-sm-3 col-xs-6">Exportador</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Exportador_agregar" class="form-control col-md-7 col-xs-12" readonly="readonly" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_consignatario" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="consignatarioservicio">Consignatario</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Consignatario_agregar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_PuertoOrigen" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="puertoorigen">Puerto Embarque (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="PuertoOrigen_agregar" name="PuertoOrigen_agregar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_PuertoDestino" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="puertodestino">Puerto Destino (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="PuertoDestino_agregar" name="PuertoDestino_agregar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_Viaje" class="control-label col-md3 col-sm-3 col-xs-6 tr" key="viajeservicio">Viaje (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Viaje_agregar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="contenedor"> Contenedor (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Contenedor_agregar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_ETA" class="control-label col-md-3 col-sm-3 col-xs-6">ETA (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="ETA_agregar" class="form-control col-md-7 col-xs-12" autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="naveagregarservicio">Nave (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_agregar" name="Nave_agregar"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-plus-square" onclick="MostrarNuevaNaveAgregar()" title="Agregar Nave" id="Agregar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" hidden="hidden" id="div_nueva_nave1_agregar">
                                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-6 col-sm-offset-6">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="nave">Nave</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_agregar2"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-plus-square" onclick="MostrarNuevaNave2Agregar()" title="Agregar Nave" id="Agregar"></i>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-trash" onclick="OcultarNuevaNaveAgregar()" title="Eliminar Nave" id="Eliminar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" hidden="hidden" id="div_nueva_nave2_agregar">
                                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-6 col-sm-offset-6">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="nave">Nave</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_agregar3"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-trash" onclick="OcultarNuevaNave2Agregar()" title="Eliminar Nave" id="Eliminar"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ContenedorValido2">
                            <!--Instalación de cortina-->
                            <div class="row x_panel">
                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <h4 class="tr" key="posturacortinaservicio">Instalacion Cortina</h4>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_TipoLugar" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_cortina_agregar" data-live-search="true" id="TipoLugar_cortina_agregar"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="pais">Pais</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Pais_cortina_agregar" data-live-search="true" id="Pais_cortina_agregar" disabled></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_Fecha_cortina" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="fechaagregarcortinaservicio">Fecha Instalación</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="text" id="Fecha_cortina_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Fecha de Instalacion Cortina">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="ciudad">Ciudad</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_cortina_agregar" data-live-search="true" id="Ciudad_cortina_agregar" disabled></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">                                
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_Purafil" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="cantidadpurafilagregarservicio">Cantidad Sachet Purafil</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" id="Purafil_agregar" placeholder="Ingrese Cantidad Sachet Purafil " class="form-control col-md-7 col-xs-12">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_cortina_agregar" data-live-search="true" id="Lugar_cortina_agregar" disabled></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="instaladorcortinaagregarservicio">Instalador Cortina</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Instalador_cortina_agregar" data-live-search="true" id="Instalador_cortina_agregar" disabled>
                                                <option selected value="0">Seleccione Instalador</option>
                                                <option value="1">PERSONAL LIVENTUS</option>
                                                <option value="2">TERCEROS</option>
                                            </select>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Instalación de cortina-->

                            <!--Instalacion de controlador-->
                            <div class="row x_panel">
                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <h4 class="tr" key="instalacioncontrolador">Instalacion Controlador</h4>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="controladoragregarservicio">Controlador (ESN) (*)</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="text" id="Controlador_agregar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_service_report" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="bateriaagregarservicio">Bateria (*)</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="text" id="Bateria_agregar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_hora_llegada" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="horallegadaagregarservicio">Hora Llegada Tranportista</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="time" id="Hora_llegada_agregar" class="form-control col-md-7 col-xs-12">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_hora_termino" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="horasalidaagregarservicio">Hora Salida Transportista</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="time" id="Hora_salida_agregar" class="form-control col-md-7 col-xs-12">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_fecha_ins" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="fechaagregarcortinaservicio">Fecha Programación Controlador</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="text" id="Fecha_servicio_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Fecha Instalacion Controlador">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="paistecnicoagregarservicio">Pais SP Tecnico</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Pais_sp_controlador_agregar" data-live-search="true" id="Pais_sp_controlador_agregar"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_tipo_lugar" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_controlador_agregar" data-live-search="true" id="TipoLugar_controlador_agregar"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6">Service Provider</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 ServiceProvider_controlador_agregar" data-live-search="true" id="ServiceProvider_controlador_agregar"></select>
                                        </div>
                                    </div>

                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="pais">País</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Pais_controlador_agregar" data-live-search="true" id="Pais_controlador_agregar" disabled></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tecnicoinstaladoragregarservicio">Técnico Instalador</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Instalador_agregar"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="ciudad">Ciudad</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_controlador_agregar" data-live-search="true" id="Ciudad_controlador_agregar" disabled></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="temeperaturaagregarservicio">Temperatura Contenedor</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" step="0.1" max="20" id="Temperatura_contenedor_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Temperatura Contenedor">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_controlador_agregar" data-live-search="true" id="Lugar_controlador_agregar" disabled></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="numerocandadoservicio">N° Candado</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" min="0" id="Candado_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese N° Candado">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12" hidden="hidden">
                                        <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="folioagregarservicio">Folio Service Report</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" min="0" id="Folio_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Folio Service Report">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12" hidden="hidden">
                                        <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6">N° Precinto Security</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" min="0" id="Precinto_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese N° Precinto Security">
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            <!--Instalacion de controlador-->

                            <!--Gasificación-->
                            <div class="row x_panel">
                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <h4 class="tr" key="gasificacion">Gasificacion</h4>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="fechaagregarcortinaservicio">Fecha Gasificación</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="text" id="Fecha_gasificacion_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Fecha Gasificacion">
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="paistecnicoagregarservicio">Pais SP Tecnico</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Pais_sp_gasificacion_agregar" data-live-search="true" id="Pais_sp_gasificacion_agregar"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_gasificacion_agregar" data-live-search="true" id="TipoLugar_gasificacion_agregar"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6">Service Provider</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 ServiceProvider_gasificacion_agregar" data-live-search="true" id="ServiceProvider_gasificacion_agregar" ></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="pais">Pais</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Pais_gasificacion_agregar" data-live-search="true" id="Pais_gasificacion_agregar" disabled="disabled"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tecnicogasificador">Tecnico Gasificador</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Gasificador_agregar" data-live-search="true" id="Gasificador_agregar" ></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="ciudad">Ciudad</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_gasificacion_agregar" data-live-search="true" id="Ciudad_gasificacion_agregar" disabled="disabled"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_service_report" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_gasificacion_agregar" data-live-search="true" id="Lugar_gasificacion_agregar" disabled="disabled"></select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Gasificación-->

                            <!--Tratamiento CO2-->
                            <div class="row x_panel">
                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <h4 class="tr" key="tratamientoco2agregarservicio">Tratamiento de CO2</h4>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <label id="lb_tratamiento" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipotratamientoco2agregarservicio">Tipo</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="selectpicker form-control col-md-7 col-xs-12 TratamientoCO2_agregar" data-live-search="true" id="TratamientoCO2_agregar"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12" id="div_filtros_agregar" hidden>
                                        <label id="lb_cantidad_scrubber" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="cantidadscrubberagregarservicio">Cantidad Filtros Scrubber</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <select class="form-control col-md-7 col-xs-12" data-live-search="true" id="Filtros_agregar">
                                                <option value="0">W/O DATA</option>
                                                <option value="1">SINGLE</option>
                                                <option value="2">DOUBLE</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12" id="div_cal_agregar" hidden>
                                        <label id="lb_cal" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="cantidadcalagregarservicio">Cantidad Cal (Kg)</label>
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <input type="number" min="0" id="Cal_agregar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Cantidad Cal">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Tratamiento CO2-->

                            <div class="row x_panel">
                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <h4 class="tr" key="sellosagregarservicio">Sellos</h4>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="sellotapa">Sello Security Leak Test</label>
                                        <div>
                                            <input type="text" name="sellotapa" class="form-control" id="SellotapaAgregar" onkeyup="this.value = this.value.toUpperCase();">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="selloperno1">Sello panel 1 Leak Test</label>
                                        <div>
                                            <input type="text" name="selloperno1" class="form-control" id="Selloperno1Agregar" onkeyup="this.value = this.value.toUpperCase();">
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="selloperno2">Sello panel 2 Leak Test</label>
                                        <div>
                                            <input type="text" name="selloperno2" class="form-control" id="Selloperno2Agregar" onkeyup="this.value = this.value.toUpperCase();">
                                        </div>
                                    </div>
                                    
                                </div>
                                <br />
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label id="lb_gasificado" class="control-label col-md-6 col-sm-6 col-xs-6">Sellos fueron alterados</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="Sellos_alterados_agregar" type="checkbox" onclick="Verificar()" class="checkbox-inline Sellos_alterados_agregar" />
                                    </div>
                                </div>
                                <br />
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="sellotapa">Sello Security Servicio</label>
                                        <div>
                                            <input type="text" name="SelloSecurity_servicio" class="form-control" id="SelloSecurity_servicio" onkeyup="this.value = this.value.toUpperCase();"/>
                                        </div>
                                    </div>
                                    <div id="div_sellotapaAgregar_servicio" hidden="hidden">
                                        <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                            <label class="control-label tr" key="sellopanel1">Sello panel 1 Servicio</label>
                                            <div>
                                                <input type="text" name="SelloPanel1_servicio" class="form-control" id="SelloPanel1_servicio" onkeyup="this.value = this.value.toUpperCase();"/>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                            <label class="control-label tr" key="sellopanel2">Sello panel 2 Servicio</label>
                                            <div>
                                                <input type="text" name="SelloPanel2_servicio" class="form-control" id="SelloPanel2_servicio" onkeyup="this.value = this.value.toUpperCase();" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group col-lg-12 col-md-12 col-sm-12"  id="ObservacionSellos" hidden="hidden">
                                    <textarea class="form-control" rows="5" id="ObservacionSellosTextoAgregar">INGRESAR COMENTARIO DE SELLOS ALTERADOS</textarea>
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <label id="lb_gasificado" class="control-label col-md-6 col-sm-6 col-xs-6">Habilitación</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="Habilitacion_agregar" type="checkbox" class="checkbox-inline Habilitacion_agregar" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-18 col-sm-18 col-xs-18">
                                    <label id="lb_gasificado" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="notasservicio">Notas Servicio</label>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <textarea class="form-control" rows="5" id="Observaciones_agregar"> SIN OBSERVACIONES</textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-18 col-sm-18 col-xs-18">
                                    <label id="lb_gasificado" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="notaslogisticas">Notas Logisticas</label>
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <textarea class="form-control" rows="5" id="Observaciones_logistica_agregar"> SIN OBSERVACIONES</textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <label id="lb_viaje" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="adjuntararchivo">Adjuntar archivo</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="file" id="adjunto" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-success tr" id="GuardarServicio" key="botonguardarservicio">Ingresar Servicio</button>
                    <button type="button" class="btn btn-primary tr" onclick="ExportarServiceReport()" key="botonservicereport"> Generar Service Report e Ingresar Servicio</button>
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncerrarmodificaciones">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal para Agregar Servicio-->
    <!-- Modal para Editar Servicio-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title tr" id="myModalLabel" key="tituloeditarservicio">Editar Servicio</h3>
                </div>
                <div class="modal-body">
                    <form id="FormControl" data-parsley-validate class="form-horizontal form-label-left">
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="indentificacionservicio">Identificacion Servicio</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-6" hidden="hidden">
                                    <input type="text" id="IdReserva_editar" class="form-control col-md-7 col-xs-12" hidden="hidden">
                                    <input type="text" id="IdServicio_editar" class="form-control col-md-7 col-xs-12" hidden="hidden">
                                    <input type="text" id="IdControlador_editar" class="form-control col-md-7 col-xs-12" hidden="hidden">
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_booking_agregar" class="control-label col-md-3 col-sm-3 col-xs-6">Booking</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Booking_editar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-3 col-sm-3 col-xs-6">Naviera</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Naviera_editar" class="form-control col-md-7 col-xs-12" readonly="readonly" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_exportador" class="control-label col-md-3 col-sm-3 col-xs-6">Exportador</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Exportador_editar" class="form-control col-md-7 col-xs-12" readonly="readonly" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_consignatario" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="consignatarioservicio">Consignatario</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Consignatario_editar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_PuertoOrigen" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="puertoorigen">Puerto Origen (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="PuertoOrigen_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_PuertoDestino" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="puertodestino">Puerto Destino (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="PuertoDestino_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_Viaje" class="control-label col-md3 col-sm-3 col-xs-6 tr" key="viajeservicio">Viaje (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Viaje_editar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="contenedor"> Contenedor (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Contenedor_editar" name="Contenedor_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_ETA" class="control-label col-md-3 col-sm-3 col-xs-6">ETA (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="ETA_editar" class="form-control col-md-7 col-xs-12" autocomplete="off">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="naveagregarservicio">Nave (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_editar"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-plus-square" onclick="MostrarNuevaNave()" title="Agregar Nave" id="Agregar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" hidden="hidden" id="div_nueva_nave1">
                                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-6 col-sm-offset-6">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="nave">Nave</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_editar2"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-plus-square" onclick="MostrarNuevaNave2()" title="Agregar Nave" id="Agregar"></i>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-trash" onclick="OcultarNuevaNave()" title="Eliminar Nave" id="Eliminar"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group" hidden="hidden" id="div_nueva_nave2">
                                <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-6 col-sm-offset-6">
                                    <label id="lb_contenedor" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="nave">Nave</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12" data-live-search="true" id="Nave_editar3"></select>
                                    </div>
                                    <div class="col-sm-2 icono">
                                        <i class="fa fa-trash" onclick="OcultarNuevaNave2()" title="Eliminar Nave" id="Eliminar"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Instalación de cortina-->
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="posturacortinaservicio">Instalacion Cortina</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_TipoLugar" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_cortina_editar" data-live-search="true" id="TipoLugar_cortina_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="pais">Pais</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Pais_cortina_editar" data-live-search="true" id="Pais_cortina_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_Fecha_cortina" class="control-label col-md-3 col-sm-3 col-xs-6">
                                        Fecha Instalacion
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Fecha_cortina_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Fecha de Instalacion Cortina">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="ciudad">Ciudad</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_cortina_editar" data-live-search="true" id="Ciudad_cortina_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_Purafil" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="cantidadpurafilagregarservicio">Cantidad Sachet Purafil</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" min="0" id="Purafil_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Cantidad Sachet Purafil">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_cortina_editar" data-live-search="true" id="Lugar_cortina_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="instaladorcortinaagregarservicio">Instalador Cortina</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Instalador_cortina_editar" data-live-search="true" id="Instalador_cortina_editar">
                                            <option value="0">Seleccione Instalador</option>
                                            <option value="1">PERSONAL LIVENTUS</option>
                                            <option value="2">TERCEROS</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Instalación de cortina-->
                        <!--Instalacion de controlador-->
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="instalacioncontrolador">Instalacion Controlador</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="controladoragregarservicio">Controlador (ESN) (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Controlador_editar" class="form-control col-md-7 col-xs-12" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_service_report" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="bateriaagregarservicio">Bateria (*)</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Bateria_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese N° Bateria Controlador" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_hora_llegada" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="horallegadaagregarservicio">Hora Llegada Tranportista</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="time" id="Hora_llegada_editar" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_hora_termino" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="horasalidaagregarservicio">Hora Salida Transportista</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="time" id="Hora_salida_editar" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_fecha_ins" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="fechaagregarcortinaservicio">Fecha Programación Controlador</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Fecha_servicio_editar" class="form-control col-md-7 col-xs-12 Fecha_servicio_editar" placeholder="Ingrese Fecha Instalacion Controlador">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="paistecnicoagregarservicio">Pais SP Tecnico</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Pais_sp_controlador_editar" data-live-search="true" id="Pais_sp_controlador_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_tipo_lugar" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_controlador_editar" data-live-search="true" id="TipoLugar_controlador_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6">Service Provider</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 ServiceProvider_controlador_editar" data-live-search="true" id="ServiceProvider_controlador_editar"></select>
                                    </div>
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="pais">País</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Pais_controlador_editar" data-live-search="true" id="Pais_controlador_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tecnicoinstaladoragregarservicio">Técnico Instalador</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Instalador_editar" data-live-search="true" id="Instalador_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="ciudad">Ciudad</label>

                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_controlador_editar" data-live-search="true" id="Ciudad_controlador_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="temeperaturaagregarservicio">Temperatura Contenedor</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" step="0.1" min="0" max="10" id="Temperatura_contenedor_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Temperatura Contenedor">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>

                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_controlador_editar" data-live-search="true" id="Lugar_controlador_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="numerocandadoservicio">N° Candado</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" min="0" id="Candado_editar" class="form-control col-md-7 col-xs-12" placeholder="ingrese N° Candado">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12" hidden="hidden">
                                    <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="folioagregarservicio">Folio Service Report</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" min="0" id="Folio_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Folio Service Report">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12" hidden="hidden">
                                    <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6">N° Precinto Security</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" min="0" id="Precinto_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese N° Precinto Security">
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <!--Instalacion de controlador-->
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="gasificacion">Gasificacion</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_fecha_servicio" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="fechaagregarcortinaservicio">Fecha Gasificación</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Fecha_gasificacion_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Fecha Gasificacion">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="paistecnicoagregarservicio">Pais SP Tecnico</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Pais_sp_gasificacion_editar" data-live-search="true" id="Pais_sp_gasificacion_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_lugar_esn" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipolugaragregarcortinaservicio">Tipo Lugar</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 TipoLugar_gasificacion_editar" data-live-search="true" id="TipoLugar_gasificacion_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6">Service Provider</label>

                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 ServiceProvider_gasificacion_editar" data-live-search="true" id="ServiceProvider_gasificacion_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="pais">Pais</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Pais_gasificacion_editar" data-live-search="true" id="Pais_gasificacion_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_lugar_cortina" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tecnicogasificador">Tecnico Gasificador</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Gasificador_editar" data-live-search="true" id="Gasificador_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_controlador" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="ciudad">Ciudad</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Ciudad_gasificacion_editar" data-live-search="true" id="Ciudad_gasificacion_editar"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_service_report" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="lugarcortinagregarservicio">Lugar</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 Lugar_gasificacion_editar" data-live-search="true" id="Lugar_gasificacion_editar"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="tratamientoco2agregarservicio">Tratamiento de CO2</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_tratamiento" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tipotratamientoco2agregarservicio">Tipo</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="selectpicker form-control col-md-7 col-xs-12 TratamientoCO2_editar" data-live-search="true" id="TratamientoCO2_editar"></select>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12" id="div_filtros_editar">
                                    <label id="lb_cantidad_scrubber" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="cantidadscrubberagregarservicio">Cantidad Filtros Scrubber</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <select class="form-control col-md-7 col-xs-12" data-live-search="true" id="Filtros_editar">
                                            <option value="0">W/O DATA</option>
                                            <option value="1">SINGLE</option>
                                            <option value="2">DOUBLE</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12" id="div_cal_editar">
                                    <label id="lb_cal" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="cantidadcalagregarservicio">Cantidad Cal (Kg)</label>

                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="number" min="0" id="Cal_editar" class="form-control col-md-7 col-xs-12" placeholder="Ingrese Cantidad Cal">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row x_panel">
                            <div class="x_title">
                                <div class="row">
                                    <div class="col-sm-7">
                                        <h4 class="tr" key="selloseditarservicio">Sellos</h4>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr" key="sellotapa">Sello Security Leak Test</label>
                                    <div>
                                        <input type="text" name="sellotapaeditar" class="form-control" id="SellotapaEditar" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr" key="selloperno1">Sello panel 1 Leak Test</label>
                                    <div>
                                        <input type="text" name="selloperno1editar" class="form-control" id="Selloperno1Editar" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr" key="selloperno2">Sello panel 2 Leak Test</label>
                                    <div>
                                        <input type="text" name="selloperno2editar" class="form-control" id="Selloperno2Editar" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>

                            </div>
                            <br />
                            <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                <label id="lb_gasificado" class="control-label col-md-6 col-sm-6 col-xs-6">Sellos fueron alterados</label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input id="Sellos_alterados_editar" type="checkbox" onclick="VerificarEditar()" class="checkbox-inline Sellos_alterados_editar" />
                                </div>
                            </div>
                            <br />
                            <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr" key="sellotapa">Sello Security Servicio</label>
                                    <div>
                                        <input type="text" name="SelloSecurity_servicio_editar" class="form-control" id="SelloSecurity_servicio_editar" />
                                    </div>
                                </div>
                                <div id="div_sellotapaEditar_servicio" hidden="hidden">
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="sellopanel1">Sello panel 1 Servicio</label>
                                        <div>
                                            <input type="text" name="SelloPanel1_servicio_editar" class="form-control" id="SelloPanel1_servicio_editar" />
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                        <label class="control-label tr" key="sellopanel2">Sello panel 2 Servicio</label>
                                        <div>
                                            <input type="text" name="SelloPanel2_servicio_editar" class="form-control" id="SelloPanel2_servicio_editar" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group col-lg-12 col-md-12 col-sm-12" id="ObservacionSellosEditar" hidden="hidden">
                                <textarea class="form-control" rows="5" id="ObservacionSellosEditarTexto">INGRESAR COMENTARIO DE SELLOS ALTERADOS</textarea>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-18 col-sm-18 col-xs-18">
                                <label id="lb_gasificado" class="control-label col-md-6 col-sm-6 col-xs-6">Habilitación</label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input id="Habilitacion_editar" type="checkbox" class="checkbox-inline Habilitacion_editar">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-18 col-sm-18 col-xs-18">
                                <label id="lb_gasificado" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="notasservicio">Notas Servicio</label>
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <textarea class="form-control" rows="5" id="Observaciones_editar"> SIN OBSERVACIONES</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-18 col-sm-18 col-xs-18">
                                <label id="lb_gasificado" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="notaslogisticas">Notas Logisticas</label>
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <textarea class="form-control" rows="5" id="Observaciones_logistica_editar"> SIN OBSERVACIONES</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <label id="lb_viaje" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="adjuntararchivo">Adjuntar archivo</label>
                                <div class="col-md-6 col-sm-6 col-xs-6">
                                    <input type="file" id="adjunto" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                        </div>

                        
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-success tr" id="EditarResultadoServicio" key="botoneditarservicio">Editar Servicio</button>
                    <button type="button" class="btn btn-primary tr" onclick="ExportarServiceReportEditar()" key="botonservicereport"> Generar Service Report y Editar Servicio</button>
                    <button type="button" class="btn btn-danger tr " data-dismiss="modal" key="botoncerrarmodificaciones">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal para Editar Servicio-->
    <!--Modal para Detalle de LeakTest -->
    <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel3" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title tr" id="myModalLabel3" key="titulodetalleleaktest">Detalle Leak Test</h3>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <form id="FormControl" data-parsley-validate class="form-horizontal form-label-left">
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_id" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="idreservaleaktest">Id Solicitud</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Reserva_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_deposito" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="idresultadoleaktest">Id Resultado</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Resultado_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_id" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="depositoleaktest">Deposito</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Deposito_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="navieraleaktest">Naviera</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Naviera_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="fecharegistroreservaservicio">Fecha Registro Reserva</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Fecha_reserva_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="fecharealreservaservicio">Fecha de Realización Real</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Fecha_realizacion_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_viaje" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="maquinariaservicio">Maquinaria</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Maquinaria_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_viaje" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="contenedorservicio">Contenedor</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Contenedor_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_estado" class="control-label col-md-3 col-sm-3 col-xs-6 tr" key="resultadoleaktestservicio">Resultado Leak Test</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Estado_resultado_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tiemposervicio">Tiempo</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Tiempo_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_naviera" class="control-label col-md3 col-sm-3 col-xs-6">Service Provider</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="ServiceProvider_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <label id="lb_viaje" class="control-label col-md-4 col-sm-4 col-xs-6 tr" key="tecnicoservicio">Técnico</label>
                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                        <input type="text" id="Tecnico_leaktest" class="form-control col-md-7 col-xs-12" readonly="readonly">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncerrarmodificaciones">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal para Detalle de LeakTest -->  
    <!--Modal Ultimas modificaciones-->
    <div class="modal fade" id="myModal7" tabindex="-1" role="dialog" aria-labelledby="myModalLabel7" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel7">Historial Modificaciones</h4>
                </div>
                <div class="modal-body">
                    <table id="Tb_Operaciones" class="table table-striped table-bordered" width="100%">
                        <thead>
                            <tr>
                                <th class="tr" key="operaciontablareserva">ID OPERACION</th>
                                <th class="tr" key="usuariotablareserva">USUARIO</th>
                                <th class="tr" key="fechatablareserva">FECHA</th>
                                <th class="tr" key="observaciontablareserva">DESCRIPCION</th>
                                <th>CONTENEDOR</th>
                                <th>CONTROLADOR</th>
                                <th>TRATAMIENTO</th>
                                <th>DETALLE CORTINA</th>
                                <th>DETALLE GASIFICACION</th>
                                <th>PUERTO ORIGEN</th>
                                <th>PUERTO DESTINO</th>
                                <th>CONSIGNATARIO</th>
                                <th>VIAJE</th>
                                <th>CORTINA INSTALADA</th>
                                <th>GASIFICADO</th>
                                <th>HABILITADO</th>
                                <th>VALIDADO</th>
                                <th>TEMPERATURA</th>
                                <th>CANDADO</th>
                                <th>CANTIDAD FILTROS</th>
                                <th>CANTIDAD CAL</th>
                                <th>ETA</th>
                                <th>ULTIMA NAVE</th>
                                <th>ULTIMO CONTROLADOR</th>
                                <th>HORA LLEGADA</th>
                                <th>HORA SALIDA</th>
                                <th>SELLO PANEL 1 LEAKTEST</th>
                                <th>SELLO PANEL 2 LEAKTEST</th>
                                <th>SELLO SECURITY LEAKTEST</th>
                                <th>SELLO PANEL 1 SERVICIO</th>
                                <th>SELLO PANEL 2 SERVICIO</th>
                                <th>SELLO SECURITY SERVICIO</th>
                                <th>ESTADO SERVICIO</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th class="tr" key="operaciontablareserva">ID OPERACION</th>
                                <th class="tr" key="usuariotablareserva">USUARIO</th>
                                <th class="tr" key="fechatablareserva">FECHA</th>
                                <th class="tr" key="observaciontablareserva">DESCRIPCION</th>
                                <th>CONTENEDOR</th>
                                <th>CONTROLADOR</th>
                                <th>TRATAMIENTO</th>
                                <th>DETALLE CORTINA</th>
                                <th>DETALLE GASIFICACION</th>
                                <th>PUERTO ORIGEN</th>
                                <th>PUERTO DESTINO</th>
                                <th>CONSIGNATARIO</th>
                                <th>VIAJE</th>
                                <th>CORTINA INSTALADA</th>
                                <th>GASIFICADO</th>
                                <th>HABILITADO</th>
                                <th>VALIDADO</th>
                                <th>TEMPERATURA</th>
                                <th>CANDADO</th>
                                <th>CANTIDAD FILTROS</th>
                                <th>CANTIDAD CAL</th>
                                <th>ETA</th>
                                <th>ULTIMA NAVE</th>
                                <th>ULTIMO CONTROLADOR</th>
                                <th>HORA LLEGADA</th>
                                <th>HORA SALIDA</th>
                                <th>SELLO PANEL 1 LEAKTEST</th>
                                <th>SELLO PANEL 2 LEAKTEST</th>
                                <th>SELLO SECURITY LEAKTEST</th>
                                <th>SELLO PANEL 1 SERVICIO</th>
                                <th>SELLO PANEL 2 SERVICIO</th>
                                <th>SELLO SECURITY SERVICIO</th>
                                <th>ESTADO SERVICIO</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncerrarmodificaciones">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal Ultimas modificaciones-->
    <!--Modal Historico Controladores-->
    <div class="modal fade" id="myModal8" tabindex="-1" role="dialog" aria-labelledby="myModalLabel8" style="margin-left:80px; margin-right:10px;">
        <div class="modal-dialog" role="document" style="width:100%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title tr" id="myModalLabel8" key="titulohistoricocontroladores">Historico controladores asociados al servicio</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-12 col-md-12 col-lg-12">
                            <table id="Tb_Controladores" class="table table-striped table-bordered" width="100%">
                                <thead>
                                    <tr>
                                        <th class="tr" key="idcontroladorservicio">ID CONTROLADOR</th>
                                        <th class="tr" key="numerocontroladorservicio">N° CONTROLADOR</th>
                                        <th class="tr" key="idservicio">ID SERVICIO</th>
                                        <th class="tr" key="fechainstalacioncontroladorservicio">FECHA INSTALACION</th>
                                        <th class="tr" key="tipolugarcontroladorservicio">TIPO LUGAR</th>
                                        <th class="tr" key="lugarcontroladorservicio">LUGAR CONTROLADOR</th>
                                        <th class="tr" key="tecnicocontraladorservicio">TECNICO</th>
                                        <th class="tr" key="bateriacontroladorservicio">BATERIA</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th class="tr" key="idcontroladorservicio">ID CONTROLADOR</th>
                                        <th class="tr" key="numerocontroladorservicio">N° CONTROLADOR</th>
                                        <th class="tr" key="idservicio">ID SERVICIO</th>
                                        <th class="tr" key="fechainstalacioncontroladorservicio">FECHA INSTALACION</th>
                                        <th class="tr" key="tipolugarcontroladorservicio">TIPO LUGAR</th>
                                        <th class="tr" key="lugarcontroladorservicio">LUGAR CONTROLADOR</th>
                                        <th class="tr" key="tecnicocontraladorservicio">TECNICO</th>
                                        <th class="tr" key="bateriacontroladorservicio">BATERIA</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncerrarmodificaciones">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
    <!--Modal Historico Controladores-->
</div>
  
<input type="text" class="input form_control" id="Selloperno1Validar" disabled="disabled" placeholder="ESTADO" style="text-align:center; text-align-last:center;" hidden />
<input type="text" class="input form_control" id="Selloperno2Validar" disabled="disabled" placeholder="ESTADO" style="text-align:center; text-align-last:center;" hidden />
<input type="text" class="input form_control" id="SellotapaValidar" disabled="disabled" placeholder="ESTADO" style="text-align:center; text-align-last:center;" hidden />
  
<input type="text" class="input form_control" id="Estado" disabled="disabled" placeholder="ESTADO" style="text-align:center; text-align-last:center;" hidden />
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModalAgregar" id="AgregarServicio" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" id="EditarServicio" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal3" id="DetalleLeaktest" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal7" id="UltimasModificaciones" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal8" id="HistoricoControladores" style="display:none;"></button>

<script src="~/build/js/Perfiles.js"></script>
<script src="~/build/js/PerfilGestionServicios.js"></script>
<script type="text/javascript">

    var lenguaje = document.cookie;

    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    $("#Fecha_inicio, #Fecha_termino").datepicker({
        dateFormat: "dd-mm-yy",
        firstDay: 1,
        dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
        dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
        monthNames:
            ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
            "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        monthNamesShort:
            ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
            "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
        showWeek: true
    });


    $(document).ready(function () {


        $('#Tb_Servicios tfoot th').each(function (i) {
            var title = $('#Tb_Servicios thead th').eq($(this).index()).text();
            if (lenguaje == "es") {
                $(this).html('<input class="form-control" type="text" placeholder="FILTRAR"/>');
            } else {

                $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');
            }
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServicios", "Reservas")',
            data: { IdReserva: getParameterByName("Id") },
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                for (var i = 0 ; i < cuenta ; i++) {

                    if (json[i].Eta == null) {
                        var eta  = "";
                    } else {
                        var eta  = formatDate(json[i].Eta);
                    }

                    if (json[i].FechaCortina == null) {
                        var fechaCortina = "";
                    } else {
                        var fechaCortina = formatDate(json[i].FechaCortina);
                    }

                    if (json[i].FechaGasificacion == null) {
                        var fechaGasificacion = "";
                    } else {
                        var fechaGasificacion = formatDate(json[i].FechaGasificacion);
                    }
                    if(@PerfilInterior == 16){
                        if(json[i].EstadoServicio == "ON SERVICE TRIP" || json[i].EstadoServicio == "NOT RECOVERED" || json[i].EstadoServicio == "RECOVERED" ){
                            json[i].EstadoServicio = "ON SERVICE TRIP";
                        }
                        data.push([json[i].Id, json[i].Booking,json[i].Commodity, json[i].Exportador, json[i].Contenedor, eta, json[i].Nave, json[i].Nave2, json[i].Nave3, json[i].UltimoControlador, json[i].EstadoServicio, json[i].N_CortinaInstalada, json[i].N_Gasificado,
                            json[i].N_Validado, fechaCortina, json[i].TipoLugarCortina, json[i].LugarCortina, json[i].Instalador, json[i].CantidadPurafil, fechaGasificacion, json[i].TecnicoGasificador, json[i].TipoLugarGasificacion, json[i].LugarGasificacion,
                            json[i].TratamientoCO2, json[i].Scrubber, json[i].Cal]);
                    }else{
                        data.push([json[i].Id, json[i].Booking,json[i].Commodity, json[i].Exportador, json[i].Contenedor, eta, json[i].Nave, json[i].Nave2, json[i].Nave3, json[i].UltimoControlador, json[i].EstadoServicio, json[i].N_CortinaInstalada, json[i].N_Gasificado,
                            json[i].N_Validado, fechaCortina, json[i].TipoLugarCortina, json[i].LugarCortina, json[i].Instalador, json[i].CantidadPurafil, fechaGasificacion, json[i].TecnicoGasificador, json[i].TipoLugarGasificacion, json[i].LugarGasificacion,
                            json[i].TratamientoCO2, json[i].Scrubber, json[i].Cal]);
                    }

                }

                if (lenguaje == "es") {
                    var table = $('#Tb_Servicios').DataTable({
                        data: data,
                        "language": {
                            "lengthMenu": "Mostrar _MENU_ Resultados por pagina",
                            "zeroRecords": "No hay Resultados para mostrar",
                            "info": "Mostrando pagina _PAGE_ de _PAGES_ paginas",
                            "infoEmpty": "No hay Resultados disponibles",
                            "search": "Buscar: ",
                            "paginate": {
                                "first": "Primera",
                                "last": "Última",
                                "next": "Siguiente",
                                "previous": "Anterior"
                            }
                        },
                        dom: 'Bfrtip',
                        buttons: [
                            'copy', 'csv', 'excel'
                        ],
                        scrollX: true
                    });
                } else {
                    var table = $('#Tb_Servicios').DataTable({
                        data: data,
                        dom: 'Bfrtip',
                        buttons: [
                            'copy', 'csv', 'excel'
                        ],
                        scrollX: true
                    });
                }

                table.columns().every(function () {
                    if(@PerfilInterior == 16){
                        table.columns([2,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]).visible(false);
                    }
                    var that = this;
                    $('input', this.footer()).on('keyup change', function () {
                        if (that.search() !== this.value) {
                            that
                                .search(this.value)
                                .draw();
                        }
                    });
                });

                $('#Tb_Servicios tbody').on('click', 'tr', function () {
                    if (cuenta != 0) {
                        if ($(this).hasClass('selected')) {
                            $("#IdServicio").val(this.children[0].innerText);
                            $("#Estado").val(this.children[10].innerText);
                            $(this).removeClass('selected');
                        }
                        else {
                            table.$('tr.selected').removeClass('selected');
                            $("#IdServicio").val(this.children[0].innerText);
                            $("#Estado").val(this.children[10].innerText);
                            $(this).addClass('selected');
                        }
                    }
                });
            },
        });

        ObtenerDatos();

    });

    function formatDate(date) {
        var fecha = date.substring(0, 10);
        var ano = date.substring(0, 4);
        var mes = date.substring(5, 7);
        var dia = date.substring(8, 10);
        return dia + "-" + mes + "-" + ano;
    }

    $("#Limpiar").click(function () {
        location.reload();
    });


    function ObtenerPaises() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Pais</option>";
                $('#Pais_cortina_editar').empty();
                $('#Pais_controlador_editar').empty();
                $('#Pais_gasificacion_editar').empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $('#Pais_gasificacion_editar').append(optionsAsString);
                $('#Pais_gasificacion_editar').selectpicker('refresh');
                $('#Pais_controlador_editar').append(optionsAsString);
                $('#Pais_controlador_editar').selectpicker('refresh');
                $('#Pais_cortina_editar').append(optionsAsString);
                $('#Pais_cortina_editar').selectpicker('refresh');
                $('#Pais_sp_controlador_editar').append(optionsAsString);
                $('#Pais_sp_controlador_editar').selectpicker('refresh');
                $('#Pais_sp_gasificacion_editar').append(optionsAsString);
                $('#Pais_sp_gasificacion_editar').selectpicker('refresh');
            },
        });
    }

    function ObtenerSP() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#ServiceProvider_controlador_editar').empty();
                $('#ServiceProvider_gasificacion_editar').empty();
                optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                }
                $('#ServiceProvider_controlador_editar').append(optionsAsString);
                $('#ServiceProvider_controlador_editar').selectpicker('refresh');
                $('#ServiceProvider_gasificacion_editar').append(optionsAsString);
                $('#ServiceProvider_gasificacion_editar').selectpicker('refresh');
            },
        });
    }

    function ObtenerCiudades() {
        //OBTENER CIUDADES
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione una Ciudad</option>";
                $('#Ciudad_cortina_editar').empty();
                $('#Ciudad_controlador_editar').empty();
                $('#Ciudad_gasificacion_editar').empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }

                $('#Ciudad_cortina_editar').append(optionsAsString);
                $('#Ciudad_cortina_editar').selectpicker('refresh');
                $('#Ciudad_controlador_editar').append(optionsAsString);
                $('#Ciudad_controlador_editar').selectpicker('refresh');
                $('#Ciudad_gasificacion_editar').append(optionsAsString);
                $('#Ciudad_gasificacion_editar').selectpicker('refresh');
            },
        });
        //OBTENER CIUDADES
    }

    function ObtenerTecnicos() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTecnicos", "Usuarios")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#Instalador_editar').empty();
                $('#Gasificador_editar').empty();
                optionsAsString += "<option value='0'>Seleccione Técnico</option>";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                }
                $('#Instalador_editar').append(optionsAsString);
                $('#Instalador_editar').selectpicker('refresh');
                $('#Gasificador_editar').append(optionsAsString);
                $('#Gasificador_editar').selectpicker('refresh');

            },
        });
    }

    function ObtenerTipoLugares() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTipoLugares", "TipoLugar")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#TipoLugar_cortina_editar').empty();
                $('#TipoLugar_controlador_editar').empty();
                $('#TipoLugar_gasificacion_editar').empty();

                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $('#TipoLugar_cortina_editar').append(optionsAsString);
                $('#TipoLugar_cortina_editar').selectpicker('refresh');
                $('#TipoLugar_controlador_editar').append(optionsAsString);
                $('#TipoLugar_controlador_editar').selectpicker('refresh');
                $('#TipoLugar_gasificacion_editar').append(optionsAsString);
                $('#TipoLugar_gasificacion_editar').selectpicker('refresh');
            },
        });
    }

    function ObtenerTratamientoCO2() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTratamientoCO2", "TratamientoCO2")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#TratamientoCO2_editar').empty();

                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $('#TratamientoCO2_editar').append(optionsAsString);
                $('#TratamientoCO2_editar').selectpicker('refresh');
            },
        });
    }

    function ObtenerNaves() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNavesActivas", "Nave")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#Nave_editar').empty();
                $('#Nave_editar2').empty();
                $('#Nave_editar3').empty();
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdNave + "'>" + json[i].NombreNave + "</option>";
                }
                $('#Nave_editar').append(optionsAsString);
                $('#Nave_editar').selectpicker('refresh');
                $('#Nave_editar2').append(optionsAsString);
                $('#Nave_editar2').selectpicker('refresh');
                $('#Nave_editar3').append(optionsAsString);
                $('#Nave_editar3').selectpicker('refresh');
            },
        });
    }

    function ObtenerPuertosOrigen() {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPuertos", "Puertos")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#PuertoOrigen_editar').empty();
                $('#PuertoDestino_editar').empty();
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione un Puerto de Origen</option>";

                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                }

                $('#PuertoOrigen_editar').append(optionsAsString);
                $('#PuertoOrigen_editar').selectpicker('refresh');
                $('#PuertoDestino_editar').append(optionsAsString);
                $('#PuertoDestino_editar').selectpicker('refresh');
            },
        });
    }

    function MostrarNuevaNave() {
        $("#div_nueva_nave1").show();
    }
    function MostrarNuevaNave2() {
        $("#div_nueva_nave2").show();
    }

    function OcultarNuevaNave() {
        $("#div_nueva_nave1").hide();
    }
    function OcultarNuevaNave2() {
        $("#div_nueva_nave2").hide();
    }

    function MostrarNuevaNaveAgregar() {
        $("#div_nueva_nave1_agregar").show();
    }
    function MostrarNuevaNave2Agregar() {
        $("#div_nueva_nave2_agregar").show();
    }

    function OcultarNuevaNaveAgregar() {
        $("#div_nueva_nave1_agregar").hide();
    }
    function OcultarNuevaNave2Agregar() {
        $("#div_nueva_nave2_agregar").hide();
    }

    function Verificar() {
        if ($('#Sellos_alterados_agregar').prop('checked')) {
            $('#div_sellotapaAgregar_servicio').show();
            $('#ObservacionSellos').show();
        } else {
            $('#div_sellotapaAgregar_servicio').hide();
            $('#ObservacionSellos').hide();
        }
    }

    function VerificarEditar() {
        if ($('#Sellos_alterados_editar').prop('checked')) {
            $('#div_sellotapaEditar_servicio').show();
            $('#ObservacionSellosEditar').show();
        } else {
            $('#div_sellotapaEditar_servicio').hide();
            $('#ObservacionSellosEditar').hide();
        }
    }

    $("#Editar").click(function () {
        var text = document.getElementById("myModalLabel");
        text.textContent = "Editar Servicio";
        var optionsAsString = "";


        if ($("#IdServicio").val() != "") {

            $("#IdServicio_editar").val($("#IdServicio").val());
            $("#IdReserva_editar").val(getParameterByName("Id"));


            if ($("#Estado").val() != "CANCELLED") {
                $("#Booking_editar").focus();
                //ObtenerDatos();
                ObtenerDatos2();

                $('#EditarServicio').trigger('click');

            } else {
                swal('Ups!', '<span class="alerta" key="erroreditarserviciocancelado">No puedes editar un servicio cancelado</span>', 'error');
            }
        } else {
            swal('Ups!', '<span class="alerta" key="erroreditarservicio">Debe Seleccionar un Servicio a Editar</span>', 'error');
        }
    });

    $("#Fecha_servicio_editar,#Fecha_cortina_editar,#Fecha_gasificacion_editar,#ETA_editar").datepicker({
        dateFormat: "dd-mm-yy",
        firstDay: 1,
        dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
        dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
        monthNames:
            ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
            "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        monthNamesShort:
            ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
            "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
        showWeek: true
    });


    $("#TipoLugar_cortina_editar").change(function () {

        $('#Pais_cortina_editar').empty();
        $('#Pais_cortina_editar').selectpicker('refresh');
        $('#Ciudad_cortina_editar').empty();
        $('#Ciudad_cortina_editar').selectpicker('refresh');

        if ($("#TipoLugar_cortina_editar").val() != "0") {

            ObtenerPaises();
            ObtenerCiudades();

            if ($("#TipoLugar_cortina_editar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_cortina_editar').empty();
                        $('#Lugar_cortina_editar').selectpicker('refresh');
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_cortina_editar').empty();
                        $('#Lugar_cortina_editar').selectpicker('refresh');
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_cortina_editar').empty();
                        $('#Lugar_cortina_editar').selectpicker('refresh');
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_cortina_editar').empty();
                        $('#Lugar_cortina_editar').selectpicker('refresh');
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
        }
    });

    $("#TipoLugar_controlador_editar").change(function () {

        if ($("#TipoLugar_controlador_editar").val() != "0") {

            $('#Pais_controlador_editar').removeAttr('disabled');
            $('#Ciudad_controlador_editar').removeAttr('disabled');
            $('#Lugar_controlador_editar').removeAttr('disabled');
            $('#Pais_controlador_editar').selectpicker('refresh');
            $('#Ciudad_controlador_editar').selectpicker('refresh');

            ObtenerPaises();
            ObtenerCiudades();

            if ($("#TipoLugar_controlador_editar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_controlador_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_controlador_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_controlador_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_controlador_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        }
                    },
                });
            }
        } else {
            $('.Pais_controlador_editar').attr('disabled', 'disabled');
            $('.Pais_controlador_editar').selectpicker('refresh');
            $('.Ciudad_controlador_editar').attr('disabled', 'disabled');
            $('.Ciudad_controlador_editar').selectpicker('refresh');
            $('.Lugar_controlador_editar').attr('disabled', 'disabled');
            $('.Lugar_controlador_editar').selectpicker('refresh');
        }
    });

    $("#TipoLugar_gasificacion_editar").change(function () {

        if ($("#TipoLugar_gasificacion_editar").val() != "0") {

            $('#Pais_gasificacion_editar').removeAttr('disabled');
            $('#Ciudad_gasificacion_editar').removeAttr('disabled');
            $('#Lugar_gasificacion_editar').removeAttr('disabled');
            $('#Pais_gasificacion_editar').selectpicker('refresh');
            $('#Ciudad_gasificacion_editar').selectpicker('refresh');

            ObtenerPaises();
            ObtenerCiudades();

            if ($("#TipoLugar_gasificacion_editar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositosActivos", "Deposito")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_gasificacion_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        }
                    },
                });
            }

            if ($("#TipoLugar_gasificacion_editar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingActivos", "Packing")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_gasificacion_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_editar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_gasificacion_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_editar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertos", "Puertos")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Selecciona un Lugar</option>";
                        $('#Lugar_gasificacion_editar').empty();
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        }
                    },
                });
            }
        } else {
            $('.Pais_gasificacion_editar').attr('disabled', 'disabled');
            $('.Pais_gasificacion_editar').selectpicker('refresh');
            $('.Ciudad_gasificacion_editar').attr('disabled', 'disabled');
            $('.Ciudad_gasificacion_editar').selectpicker('refresh');
            $('.Lugar_gasificacion_editar').attr('disabled', 'disabled');
            $('.Lugar_gasificacion_editar').selectpicker('refresh');
        }
    });

    $("#Pais_sp_controlador_editar").change(function () {

        if ($("#Pais_sp_controlador_editar").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetServiceProviderPais", "ServiceProvider")',
                data: { IdPais: $("#Pais_sp_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#ServiceProvider_controlador_editar').empty();
                    optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                    }
                    $('#ServiceProvider_controlador_editar').append(optionsAsString);
                    $('#ServiceProvider_controlador_editar').selectpicker('refresh');
                },
            });
        }
    });

    $(document).on('change', '.TratamientoCO2_editar', function () {
        if ($(this).val() == "2") {
            $("#div_filtros_editar").show();
            $("#div_cal_editar").show();
        } else {
            if ($(this).val() == "3") {
                $("#div_filtros_editar").hide();
                $("#div_cal_editar").show();
            } else {
                $("#div_filtros_editar").hide();
                $("#div_cal_editar").hide();
            }
        }
    });

    $("#ServiceProvider_controlador_editar").change(function () {
        if ($("#ServiceProvider_controlador_editar").val() == "0") {
            $('#Instalador_editar').val("0");
            $('#Instalador_editar').selectpicker('refresh');
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTecnicosByServiceProvider", "Usuarios")',
                data: { IdServiceProvider: $("#ServiceProvider_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Instalador_editar').empty();
                    optionsAsString += "<option value='0'>Seleccione Técnico</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                    }
                    $('#Instalador_editar').append(optionsAsString);
                    $('#Instalador_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#Pais_sp_gasificacion_editar").change(function () {
        if ($(this).val() == "0") {
            $('#ServiceProvider_gasificacion_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Service Provider</option>";
            $('#ServiceProvider_gasificacion_editar').append(optionsAsString);
            $('#ServiceProvider_gasificacion_editar').selectpicker('refresh');

            $('#Gasificador_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Tecnico</option>";
            $('#Gasificador_editar').append(optionsAsString);
            $('#Gasificador_editar').selectpicker('refresh');
        } else {

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetServiceProviderPais", "ServiceProvider")',
                data: { IdPais: $("#Pais_sp_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#ServiceProvider_gasificacion_editar').empty();
                    optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                    }
                    $('#ServiceProvider_gasificacion_editar').append(optionsAsString);
                    $('#ServiceProvider_gasificacion_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#ServiceProvider_gasificacion_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Gasificador_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Tecnico</option>";
            $('#Gasificador_editar').append(optionsAsString);
            $('#Gasificador_editar').selectpicker('refresh');
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTecnicosByServiceProvider", "Usuarios")',
                data: { IdServiceProvider: $("#ServiceProvider_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Gasificador_editar').empty();
                    optionsAsString += "<option value='0'>Seleccione un Tecnico</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                    }
                    $('#Gasificador_editar').append(optionsAsString);
                    $('#Gasificador_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#Pais_cortina_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Ciudad_cortina_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
            $('#Ciudad_cortina_editar').append(optionsAsString);
            $('#Ciudad_cortina_editar').selectpicker('refresh');

        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("#Pais_cortina_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Ciudad_cortina_editar').empty();
                    optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#Ciudad_cortina_editar').append(optionsAsString);
                    $('#Ciudad_cortina_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#Ciudad_cortina_editar").change(function () {

        if ($(this).val() == "0") {
            $('#Lugar_cortina_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
            $('#Lugar_cortina_editar').append(optionsAsString);
            $('#Lugar_cortina_editar').selectpicker('refresh');

        } else {
            if ($("#TipoLugar_cortina_editar").val() == "1") {
                //OPCION DEPOSITO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("#Ciudad_cortina_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_cortina_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "2") {
                //OPCION PACKING
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingCiudad", "Packing")',
                    data: { IdCiudad: $("#Ciudad_cortina_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_cortina_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "3") {
                //OPCION ANTEPUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("#Ciudad_cortina_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_cortina_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_editar").val() == "4") {
                //OPCION PUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_cortina_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_cortina_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        if (cuenta != 0) {
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        }
                    },
                });
            }
        }
    });

    $("#Pais_controlador_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Ciudad_controlador_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
            $('#Ciudad_controlador_editar').append(optionsAsString);
            $('#Ciudad_controlador_editar').selectpicker('refresh');
        } else {
            $('#Ciudad_controlador_editar').removeProp('disabled');
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("#Pais_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Ciudad_controlador_editar').empty();
                    optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#Ciudad_controlador_editar').append(optionsAsString);
                    $('#Ciudad_controlador_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#Ciudad_controlador_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Lugar_controlador_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
            $('#Lugar_controlador_editar').append(optionsAsString);
            $('#Lugar_controlador_editar').selectpicker('refresh');
        } else {
            $('#Lugar_controlador_editar').removeProp('disabled');
            if ($("#TipoLugar_controlador_editar").val() == "1") {
                //OPCION DEPOSITO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("#Ciudad_controlador_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_controlador_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_controlador_editar').append(optionsAsString);
                        $('#Lugar_controlador_editar').selectpicker('refresh');
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "2") {
                //OPCION PACKING
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingCiudad", "Packing")',
                    data: { IdCiudad: $("#Ciudad_controlador_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_controlador_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_controlador_editar').append(optionsAsString);
                        $('#Lugar_controlador_editar').selectpicker('refresh');
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "3") {
                //OPCION ANTEPUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("#Ciudad_controlador_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_controlador_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_controlador_editar').append(optionsAsString);
                        $('#Lugar_controlador_editar').selectpicker('refresh');
                    },
                });
            }
            if ($("#TipoLugar_controlador_editar").val() == "4") {
                //OPCION PUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_controlador_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_controlador_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_controlador_editar').append(optionsAsString);
                        $('#Lugar_controlador_editar').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Pais_gasificacion_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Ciudad_gasificacion_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
            $('#Ciudad_gasificacion_editar').append(optionsAsString);
            $('#Ciudad_gasificacion_editar').selectpicker('refresh');
        } else {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("#Pais_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Ciudad_gasificacion_editar').empty();
                    optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#Ciudad_gasificacion_editar').append(optionsAsString);
                    $('#Ciudad_gasificacion_editar').selectpicker('refresh');
                },
            });
        }
    });

    $("#Ciudad_gasificacion_editar").change(function () {
        if ($(this).val() == "0") {
            $('#Lugar_gasificacion_editar').empty();
            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
            $('#Lugar_gasificacion_editar').append(optionsAsString);
            $('#Lugar_gasificacion_editar').selectpicker('refresh');
        } else {
            if ($("#TipoLugar_gasificacion_editar").val() == "1") {
                //OPCION DEPOSITO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                    data: { IdCiudad: $("#Ciudad_gasificacion_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_gasificacion_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_gasificacion_editar').append(optionsAsString);
                        $('#Lugar_gasificacion_editar').selectpicker('refresh');

                    },
                });
            }
            if ($("#TipoLugar_gasificacion_editar").val() == "2") {
                //OPCION PACKING
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPackingCiudad", "Packing")',
                    data: { IdCiudad: $("#Ciudad_gasificacion_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_gasificacion_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_gasificacion_editar').append(optionsAsString);
                        $('#Lugar_gasificacion_editar').selectpicker('refresh');
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_editar").val() == "3") {
                //OPCION ANTEPUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                    data: { IdCiudad: $("#Ciudad_gasificacion_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_gasificacion_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_gasificacion_editar').append(optionsAsString);
                        $('#Lugar_gasificacion_editar').selectpicker('refresh');
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_editar").val() == "4") {
                //OPCION PUERTO
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                    data: { IdCiudad: $("#Ciudad_gasificacion_editar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Lugar_gasificacion_editar').empty();
                        optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Lugar_gasificacion_editar').append(optionsAsString);
                        $('#Lugar_gasificacion_editar').selectpicker('refresh');
                    },
                });
            }
        }
    });

    $("#Lugar_cortina_editar").change(function () {
        if ($("#TipoLugar_cortina_editar").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("#Lugar_cortina_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_cortina_editar").val(json[0].IdPais);
                        $("#Pais_cortina_editar").selectpicker('refresh');
                        $("#Ciudad_cortina_editar").val(json[0].IdCiudad);
                        $("#Ciudad_cortina_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_cortina_editar").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPacking", "Packing")',
                data: { IdPacking: $("#Lugar_cortina_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_cortina_editar").val(json[0].IdPais);
                        $("#Pais_cortina_editar").selectpicker('refresh');
                        $("#Ciudad_cortina_editar").val(json[0].IdCiudad);
                        $("#Ciudad_cortina_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_cortina_editar").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                data: { IdAntepuerto: $("#Lugar_cortina_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_cortina_editar").val(json[0].IdPais);
                        $("#Pais_cortina_editar").selectpicker('refresh');
                        $("#Ciudad_cortina_editar").val(json[0].IdCiudad);
                        $("#Ciudad_cortina_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_cortina_editar").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                data: { IdPuertoOrigen: $("#Lugar_cortina_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_cortina_editar").val(json[0].IdPais);
                        $("#Pais_cortina_editar").selectpicker('refresh');
                        $("#Ciudad_cortina_editar").val(json[0].IdCiudad);
                        $("#Ciudad_cortina_editar").selectpicker('refresh');
                    }
                },
            });
        }
    });

    $("#Lugar_controlador_editar").change(function () {
        if ($("#TipoLugar_controlador_editar").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("#Lugar_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_controlador_editar").val(json[0].IdPais);
                        $("#Pais_controlador_editar").selectpicker('refresh');
                        $("#Ciudad_controlador_editar").val(json[0].IdCiudad);
                        $("#Ciudad_controlador_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_controlador_editar").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPacking", "Packing")',
                data: { IdPacking: $("#Lugar_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_controlador_editar").val(json[0].IdPais);
                        $("#Pais_controlador_editar").selectpicker('refresh');
                        $("#Ciudad_controlador_editar").val(json[0].IdCiudad);
                        $("#Ciudad_controlador_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_controlador_editar").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                data: { IdAntepuerto: $("#Lugar_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_controlador_editar").val(json[0].IdPais);
                        $("#Pais_controlador_editar").selectpicker('refresh');
                        $("#Ciudad_controlador_editar").val(json[0].IdCiudad);
                        $("#Ciudad_controlador_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_controlador_editar").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                data: { IdPuertoOrigen: $("#Lugar_controlador_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_controlador_editar").val(json[0].IdPais);
                        $("#Pais_controlador_editar").selectpicker('refresh');
                        $("#Ciudad_controlador_editar").val(json[0].IdCiudad);
                        $("#Ciudad_controlador_editar").selectpicker('refresh');
                    }
                },
            });
        }
    });

    $("#Lugar_gasificacion_editar").change(function () {
        if ($("#TipoLugar_gasificacion_editar").val() == "1") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("#Lugar_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_gasificacion_editar").val(json[0].IdPais);
                        $("#Pais_gasificacion_editar").selectpicker('refresh');
                        $("#Ciudad_gasificacion_editar").val(json[0].IdCiudad);
                        $("#Ciudad_gasificacion_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_gasificacion_editar").val() == "2") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPacking", "Packing")',
                data: { IdPacking: $("#Lugar_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_gasificacion_editar").val(json[0].IdPais);
                        $("#Pais_gasificacion_editar").selectpicker('refresh');
                        $("#Ciudad_gasificacion_editar").val(json[0].IdCiudad);
                        $("#Ciudad_gasificacion_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_gasificacion_editar").val() == "3") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                data: { IdAntepuerto: $("#Lugar_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_gasificacion_editar").val(json[0].IdPais);
                        $("#Pais_gasificacion_editar").selectpicker('refresh');
                        $("#Ciudad_gasificacion_editar").val(json[0].IdCiudad);
                        $("#Ciudad_gasificacion_editar").selectpicker('refresh');
                    }
                },
            });
        }
        if ($("#TipoLugar_gasificacion_editar").val() == "4") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                data: { IdPuertoOrigen: $("#Lugar_gasificacion_editar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_gasificacion_editar").val(json[0].IdPais);
                        $("#Pais_gasificacion_editar").selectpicker('refresh');
                        $("#Ciudad_gasificacion_editar").val(json[0].IdCiudad);
                        $("#Ciudad_gasificacion_editar").selectpicker('refresh');
                    }
                },
            });
        }
    });

    $("#Instalador_editar").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetInfoTecnico", "Usuarios")',
            data: { IdTecnico: $("#Instalador_editar").val() },
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                if (cuenta != 0) {
                    $("#Pais_sp_controlador_editar").val(json[0].IdPaisSP);
                    $("#Pais_sp_controlador_editar").selectpicker('refresh');
                    $("#ServiceProvider_controlador_editar").val(json[0].IdSP);
                    $("#ServiceProvider_controlador_editar").selectpicker('refresh');
                }
            },
        });
    });

    $("#Gasificador_editar").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetInfoTecnico", "Usuarios")',
            data: { IdTecnico: $("#Gasificador_editar").val() },
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                if (cuenta != 0) {
                    $("#Pais_sp_gasificacion_editar").val(json[0].IdPaisSP);
                    $("#Pais_sp_gasificacion_editar").selectpicker('refresh');
                    $("#ServiceProvider_gasificacion_editar").val(json[0].IdSP);
                    $("#ServiceProvider_gasificacion_editar").selectpicker('refresh');
                }
            },
        });
    });
    function ObtenerDatos() {
        ObtenerPaises();
        ObtenerSP();
        ObtenerCiudades();
        ObtenerTecnicos();
        ObtenerTipoLugares();
        ObtenerTratamientoCO2();
        ObtenerNaves();
        ObtenerPuertosOrigen();
    }

    function ObtenerDatos2() {

        //OBTENER CONTENEDORES
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContenedoresEditar", "Contenedores")',
            data: { IdServicio: $('#IdServicio').val() },
            async:false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#Contenedor_editar').empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdContenedor + "'>" + json[i].NumeroContenedor + "</option>";
                }
                $('#Contenedor_editar').append(optionsAsString);
                $('#Contenedor_editar').selectpicker('refresh');
            },
        });
        //OBTENER CONTENEDORES

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServicioById", "Reservas")',
            data: { IdServicio: $('#IdServicio').val() },
            async: false,
            success: function (response) {
                var json = JSON.parse(response);
                var text = "";
                var aux = "";
                var largo = 0;
                var cuenta = 0;
                cuenta = json.length;

                if (json[0].IdNave2 != 0) {
                    $("#div_nueva_nave1").show();
                }

                if (json[0].IdNave3 != 0) {
                    $("#div_nueva_nave2").show();
                }

                $("#Booking_editar").val(json[0].Booking);
                $("#Viaje_editar").val(json[0].Viaje);
                $("#Naviera_editar").val(json[0].Naviera);
                $("#Exportador_editar").val(json[0].Exportador);
                $("#ETA_editar").val(formatDate(json[0].Eta));
                $("#Nave_editar").val(json[0].IdNave1);
                $('#Nave_editar').selectpicker('refresh');
                $("#Nave_editar2").val(json[0].IdNave2);
                $('#Nave_editar2').selectpicker('refresh');
                $("#Nave_editar3").val(json[0].IdNave3);
                $('#Nave_editar3').selectpicker('refresh');
                $("#PuertoOrigen_editar").val(json[0].PuertoOrigen);
                $('#PuertoOrigen_editar').selectpicker('refresh');
                $("#PuertoDestino_editar").val(json[0].PuertoDestino);
                $('#PuertoDestino_editar').selectpicker('refresh');
                $("#Consignatario_editar").val(json[0].Consignatario);
                $("#Instalador_cortina_editar").selectpicker();
                $("#Instalador_cortina_editar").selectpicker('val', parseInt(json[0].InstaladorCortina));
                if (formatDate(json[0].FechaCortina) == "01-01-1900")
                {
                    $("#Fecha_cortina_editar").val("");
                } else
                {
                    $("#Fecha_cortina_editar").val(formatDate(json[0].FechaCortina));
                }
                $("#TipoLugar_cortina_editar").val(json[0].IdTipoLugarCortina);
                $('#TipoLugar_cortina_editar').selectpicker('refresh');
                $("#Pais_cortina_editar").selectpicker();
                $("#Pais_cortina_editar").selectpicker('val', parseInt(json[0].IdPaisCortina));
                $("#Ciudad_cortina_editar").selectpicker();
                $("#Ciudad_cortina_editar").selectpicker('val', parseInt(json[0].IdCiudadCortina));
                $("#TipoLugar_controlador_editar").selectpicker();
                $("#TipoLugar_controlador_editar").selectpicker('val', parseInt(json[0].IdTipoLugarControlador));
                $("#Pais_controlador_editar").selectpicker();
                $("#Pais_controlador_editar").selectpicker('val', parseInt(json[0].IdPaisControlador));
                $("#Ciudad_controlador_editar").selectpicker();
                $("#Ciudad_controlador_editar").selectpicker('val', parseInt(json[0].IdCiudadControlador));
                $("#TipoLugar_gasificacion_editar").selectpicker();
                $("#TipoLugar_gasificacion_editar").selectpicker('val', parseInt(json[0].IdTipoLugarGasificacion));
                $("#Pais_gasificacion_editar").selectpicker();
                $("#Pais_gasificacion_editar").selectpicker('val', parseInt(json[0].IdPaisGasificacion));
                $("#Ciudad_gasificacion_editar").selectpicker();
                $("#Ciudad_gasificacion_editar").selectpicker('val', parseInt(json[0].IdCiudadGasificacion));
                $("#Pais_sp_controlador_editar").selectpicker();
                $("#Pais_sp_controlador_editar").selectpicker('val', parseInt(json[0].IdPaisSPControlador));
                $("#ServiceProvider_controlador_editar").selectpicker();
                $('#ServiceProvider_controlador_editar').selectpicker('val', parseInt(json[0].IdSPControlador));
                $("#Instalador_editar").selectpicker();
                $('#Instalador_editar').selectpicker('val', parseInt(json[0].IdTecnicoInstalador));
                $("#Pais_sp_gasificacion_editar").selectpicker();
                $("#Pais_sp_gasificacion_editar").selectpicker('val', parseInt(json[0].IdPaisSPGasificacion));
                $("#ServiceProvider_gasificacion_editar").selectpicker();
                $('#ServiceProvider_gasificacion_editar').selectpicker('val', parseInt(json[0].IdSPGasificacion));
                $("#Gasificador_editar").selectpicker();
                $('#Gasificador_editar').selectpicker('val', parseInt(json[0].IdTecnicoGasificador));
                $("#Purafil_editar").val(json[0].CantidadPurafil);
                $('#Controlador_editar').val(json[0].Controlador);
                $("#Bateria_editar").val(json[0].Bateria);
                $("#Hora_llegada_editar").val(json[0].HoraLlegada);
                $("#Hora_salida_editar").val(json[0].HoraSalida);
                if (formatDate(json[0].FechaInstControlador) == "01-01-1900")
                {                
                    $("#Fecha_servicio_editar").val("");
                } else
                {
                    $("#Fecha_servicio_editar").val(formatDate(json[0].FechaInstControlador));
                }
                $("#Temperatura_contenedor_editar").val(json[0].TemperaturaContenedor);
                $("#Folio_editar").val(json[0].FolioServiceReport);
                $("#Precinto_editar").val(json[0].PrecintoSecurity);
                $("#Candado_editar").val(json[0].Candado);

                if (formatDate(json[0].FechaGasificacion) == "01-01-1900")
                {
                    $("#Fecha_gasificacion_editar").val("");
                } else
                {
                    $("#Fecha_gasificacion_editar").val(formatDate(json[0].FechaGasificacion));
                }

                $("#CO2_editar").val(json[0].CO2);
                $("#N2_editar").val(json[0].N2);
                $("#TratamientoCO2_editar").selectpicker();
                $('#TratamientoCO2_editar').selectpicker('val', parseInt(json[0].IdTratamientoCO2));
                $("#Observaciones_editar").val(json[0].NotaServicio);
                $("#Observaciones_logistica_editar").val(json[0].NotaLogistica);
                //SELLOS
                $("#Selloperno1Editar").val(json[0].Selloperno1);
                $("#Selloperno2Editar").val(json[0].Selloperno2);
                $("#SellotapaEditar").val(json[0].Sellotapa);
                $("#SelloPanel1_servicio_editar").val(json[0].SelloPanel1);
                $("#SelloPanel2_servicio_editar").val(json[0].SelloPanel2);
                $("#SelloSecurity_servicio_editar").val(json[0].SelloSecurity);

                $('select[name=Contenedor_editar]').val(json[0].IdContenedor);
                $('.selectpicker').selectpicker('refresh')

                if (json[0].SelloPanel1 != "") {
                    $("#div_sellotapaEditar_servicio").show();
                    $("#Sellos_alterados_editar").prop("checked", true);
                }

                if (json[0].IdTratamientoCO2 == "0" || json[0].IdTratamientoCO2 == "1") {
                    $("#div_filtros_editar").hide();
                    $("#div_cal_editar").hide();
                } else {
                    $("#div_filtros_editar").show();
                    $("#div_cal_editar").show();
                    $("#Filtros_editar").val(json[0].Scrubber);
                    $("#Cal_editar").val(json[0].Cal);
                }

                if (json[0].Habilitado == "1") {
                    document.getElementById("Habilitacion_editar").checked = true;
                } else {
                    document.getElementById("Habilitacion_editar").checked = false;
                }

                if (json[0].IdTipoLugarCortina == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        data: { IdCiudad: json[0].IdCiudadCortina },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarCortina == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }

                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');

                        },
                    });
                }
                if (json[0].IdTipoLugarCortina == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: json[0].IdCiudadCortina },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarCortina == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarCortina == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: json[0].IdCiudadCortina },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarCortina == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarCortina == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        data: { IdCiudad: json[0].IdCiudadCortina },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarCortina == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_cortina_editar').append(optionsAsString);
                            $('#Lugar_cortina_editar').selectpicker('refresh');
                        },
                    });
                }

                if (json[0].IdTipoLugarControlador == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        data: { IdCiudad: json[0].IdCiudadControlador },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarInstControlador == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');

                        },
                    });
                }
                if (json[0].IdTipoLugarControlador == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: json[0].IdCiudadControlador },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarInstControlador == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarControlador == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: json[0].IdCiudadControlador },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarInstControlador == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarControlador == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        async: false,
                        data: { IdCiudad: json[0].IdCiudadControlador },
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarInstControlador == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_controlador_editar').append(optionsAsString);
                            $('#Lugar_controlador_editar').selectpicker('refresh');
                        },
                    });
                }

                if (json[0].IdTipoLugarGasificacion == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        async: false,
                        data: { IdCiudad: json[0].IdCiudadGasificacion },
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarGasificacion == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');

                        },
                    });
                }
                if (json[0].IdTipoLugarGasificacion == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: json[0].IdCiudadGasificacion },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarGasificacion == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarGasificacion == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: json[0].IdCiudadGasificacion },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarGasificacion == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        },
                    });
                }
                if (json[0].IdTipoLugarGasificacion == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        data: { IdCiudad: json[0].IdCiudadGasificacion },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json2 = JSON.parse(response);
                            var cuenta2 = json2.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_editar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta2; i++) {
                                if (json[0].IdLugarGasificacion == json2[i].Id) {
                                    optionsAsString += "<option value='" + json2[i].Id + "' selected>" + json2[i].Nombre + "</option>";
                                } else {
                                    optionsAsString += "<option value='" + json2[i].Id + "'>" + json2[i].Nombre + "</option>";
                                }
                            }
                            $('#Lugar_gasificacion_editar').append(optionsAsString);
                            $('#Lugar_gasificacion_editar').selectpicker('refresh');
                        },
                    });
                }
            }
        });
    }


    $("#EditarResultadoServicio").click(function () {
        if ($("#Booking_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#PuertoOrigen_editar").val() == "0") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(0);
        } else if ($("#Viaje_editar").val() == "") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModal').scrollTop(0);
        } else if ($("#ETA_editar").val() == "") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModal').scrollTop(0);
        } else if ($("#PuertoDestino_editar").val() == "0") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(0);
        } else if ($("#Contenedor_editar").val() == "0") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(0);
        } else if ($("#Nave_editar").val() == "0") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(0);
        } else if ($("#Controlador_editar").val() == "" || $("#Controlador_editar").val() == "0") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Controlador_editar").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(500);
        } else if ($("#Bateria_editar").val() == "0" || $("#Bateria_editar").val() == "") {
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0.)");
            $("#Controlador_editar").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Bateria_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModal').scrollTop(500);
        } else {

            var IdServicio = $("#IdServicio_editar").val();
            var Consignatario = $("#Consignatario_editar").val();
            var Viaje = $("#Viaje_editar").val();
            var PuertoOrigen = $("#PuertoOrigen_editar").val();
            var PuertoDestino = $("#PuertoDestino_editar").val();
            var Nave1 = $("#Nave_editar").val();
            var Nave2 = $("#Nave_editar2").val();
            var Nave3 = $("#Nave_editar3").val();
            var Contenedor = $("#Contenedor_editar").val();
            var Eta = $("#ETA_editar").val();
            var FechaCortina = $("#Fecha_cortina_editar").val();
            var TLCortina = $("#TipoLugar_cortina_editar").val();
            var LugarCortina = $("#Lugar_cortina_editar").val();
            var Purafil = $("#Purafil_editar").val();
            var Controlador = $("#Controlador_editar").val();
            var Bateria = $("#Bateria_editar").val();
            var HoraLlegada = $("#Hora_llegada_editar").val();
            var HoraSalida = $("#Hora_salida_editar").val();
            var FechaInstContr = $("#Fecha_servicio_editar").val();
            var TLInstContr = $("#TipoLugar_controlador_editar").val();
            var LugarInstContr = $("#Lugar_controlador_editar").val();
            var PaisSPControlador = $("#Pais_sp_controlador_editar").val();
            var SPControlador = $("#ServiceProvider_controlador_editar").val();
            var TecnicoInstalador = $("#Instalador_editar").val();
            var TemperaturaContenedor = $("#Temperatura_contenedor_editar").val();
            var Folio = $("#Folio_editar").val();
            var Precinto = $("#Precinto_editar").val();
            var Candado = $("#Candado_editar").val();
            var FechaGasificacion = $("#Fecha_gasificacion_editar").val();
            var TLGasificacion = $("#TipoLugar_gasificacion_editar").val();
            var LugarGasificacion = $("#Lugar_gasificacion_editar").val();
            var PaisSPControlador = $("#Pais_sp_gasificacion_editar").val();
            var SPControlador = $("#ServiceProvider_gasificacion_editar").val();
            var TecnicoGasificador = $("#Gasificador_editar").val();
            var CO2 = $("#CO2_editar").val();
            var N2 = $("#N2_editar").val();
            var TipoTratamientoCO2 = $("#TratamientoCO2_editar").val();
            var Scrubber = $("#Filtros_editar").val();
            var Cal = $("#Cal_editar").val();
            var EstadoServicio = "1";
            var CortinaInstalada = "1";
            var Gasificado = "1";
            var UltimaNave = "";
            var UltimoControlador = $("#Controlador_editar").val();
            var InstaladorCortina = $("#Instalador_cortina_editar").val();
            var NotaServicio = $("#Observaciones_editar").val();
            var NotaLogistica = $("#Observaciones_logistica_editar").val();

            if ($('#div_nueva_nave1').is(':hidden')) {
                Nave2 = "0";
            }

            if ($('#div_nueva_nave2').is(':hidden')) {
                Nave3 = "0";
            }

            if (LugarCortina != "0" && TLCortina != "0") {
                CortinaInstalada = "0";
            } else {
                CortinaInstalada = "1";
            }

            if (LugarGasificacion != "0" && TLGasificacion != "0" && TecnicoGasificador != "0") {
                Gasificado = "0";
            } else {
                Gasificado = "1";
            }

            if ($('#Habilitacion_editar').prop('checked')) {
                Habilitado = "1";
            } else {
                Habilitado = "0";
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarContenedorById", "Controlador")',
                data: { IdContenedor: Contenedor },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 1 || json.validador == 4) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarControladorByIdEditar", "Controlador")',
                            data: { IdControlador: Controlador,
                                    IdServicio: IdServicio},
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador != 5) {
                                    $.ajax({
                                        type: "POST",
                                        url: '@Url.Action("EditarServicio", "Reservas")',
                                        data: {
                                            IdServicio: IdServicio,
                                            Consignatario: Consignatario,
                                            Viaje: Viaje,
                                            PuertoOrigen: PuertoOrigen,
                                            PuertoDestino: PuertoDestino,
                                            Nave1: Nave1,
                                            Nave2: Nave2,
                                            Nave3: Nave3,
                                            Contenedor: Contenedor,
                                            Eta: Eta,
                                            FechaCortina: FechaCortina,
                                            TipoLugarCortina: TLCortina,
                                            LugarCortina: LugarCortina,
                                            Purafil: Purafil,
                                            Controlador: Controlador,
                                            Bateria: Bateria,
                                            HoraLlegada: HoraLlegada,
                                            HoraSalida: HoraSalida,
                                            FechaInstContr: FechaInstContr,
                                            TipoLugarInstContr: TLInstContr,
                                            LugarInstContr: LugarInstContr,
                                            TecnicoInstalador: TecnicoInstalador,
                                            TemperaturaContenedor: TemperaturaContenedor,
                                            Folio: Folio,
                                            Precinto: Precinto,
                                            Candado: Candado,
                                            FechaGasificacion: FechaGasificacion,
                                            TipoLugarGasificacion: TLGasificacion,
                                            LugarGasificacion: LugarGasificacion,
                                            TecnicoGasificador: TecnicoGasificador,
                                            CO2: CO2,
                                            N2: N2,
                                            TipoTratamientoCO2: TipoTratamientoCO2,
                                            Scrubber: Scrubber,
                                            Cal: Cal,
                                            CortinaInstalada: CortinaInstalada,
                                            Gasificado: Gasificado,
                                            EstadoServicio: EstadoServicio,
                                            UltimaNave: UltimaNave,
                                            UltimoControlador: UltimoControlador,
                                            Habilitado: Habilitado,
                                            InstaladorCortina: InstaladorCortina,
                                            NotaServicio: NotaServicio,
                                            NotaLogistica: NotaLogistica,
                                            Selloperno1: $("#Selloperno1Editar").val(),
                                            Selloperno2: $("#Selloperno2Editar").val(),
                                            Sellotapa: $("#SellotapaEditar").val(),
                                            SelloPanel1: $("#SelloPanel1_servicio_editar").val(),
                                            SelloPanel2: $("#SelloPanel2_servicio_editar").val(),
                                            SelloSecurity: $("#SelloSecurity_servicio_editar").val(),
                                            ObservacionSellosEditar: $("#ObservacionSellosEditarTexto").val(),
                                            Booking: $("#Booking_editar").val()
                                        },
                                        success: function (response) {
                                            var json = JSON.parse(response);
                                            if (json.validador == 0) {
                                                var aux = 'success';
                                            } else {
                                                var aux = 'warning';
                                            }
                                            swal({
                                                title: '',
                                                text: json.Mensaje,
                                                type: aux,
                                                showCancelButton: false,
                                                confirmButtonColor: '#3085d6',
                                                cancelButtonColor: '#d33',
                                                confirmButtonText: 'Aceptar'
                                            }).then((result) => {
                                                location.reload();
                                            })
                                        }
                                    });
                                } else {
                                    var aux = 'warning';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        //NO SE PUEDE UTILIZAR ESE CONTROLADOR
                                        //location.reload();
                                    })
                                }

                            }
                        });

                    } else {
                        var aux = 'warning';
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            //NO SE PUEDE UTILIZAR ESE CONTENEDOR
                        })
                    }
                }
            });
        }
    });

    function GetTodayDate() {
        var tdate = new Date();
        var dd = tdate.getDate(); //yields day
        var MM = tdate.getMonth(); //yields month
        var yyyy = tdate.getFullYear(); //yields year
        MM = MM + 1;
        if (parseInt(MM) < 10) {
            MM = "0" + MM;
        }
        var currentDate = dd + "-" + MM + "-" + yyyy;

        return currentDate;
    }

    $("#AgregarServ").click(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("ValidarNumServicios", "Reservas")',
            data: {
                IdReserva: getParameterByName("Id")
            },
            success: function (response) {
                var json = JSON.parse(response);
                if (json.validador == 0) {
                    //var aux = 'success';
                    IngresarServicio();
                } else {
                    var aux = 'warning';
                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        IngresarServicio();
                    })
                }
            }
        });
    });

    function IngresarServicio() {

        optionsAsString = "";
        $('#Contenedor_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione Contenedor</option>";
        $('#Contenedor_agregar').append(optionsAsString);
        $('#Contenedor_agregar').selectpicker('refresh');

        optionsAsString = "";
        $('#TipoLugar_cortina_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione Tipo Lugar</option>";
        $('#TipoLugar_cortina_agregar').append(optionsAsString);
        $('#TipoLugar_cortina_agregar').selectpicker('refresh');
        $('#TipoLugar_controlador_agregar').empty();
        $('#TipoLugar_controlador_agregar').append(optionsAsString);
        $('#TipoLugar_controlador_agregar').selectpicker('refresh');
        $('#TipoLugar_gasificacion_agregar').empty();
        $('#TipoLugar_gasificacion_agregar').append(optionsAsString);
        $('#TipoLugar_gasificacion_agregar').selectpicker('refresh');

        optionsAsString = "";
        $('#Pais_cortina_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione País</option>";
        $('#Pais_cortina_agregar').append(optionsAsString);
        $('#Pais_cortina_agregar').selectpicker('refresh');
        $('#Pais_controlador_agregar').empty();
        $('#Pais_controlador_agregar').append(optionsAsString);
        $('#Pais_controlador_agregar').selectpicker('refresh');
        $('#Pais_gasificacion_agregar').empty();
        $('#Pais_gasificacion_agregar').append(optionsAsString);
        $('#Pais_gasificacion_agregar').selectpicker('refresh');
        $('#Pais_sp_gasificacion_agregar').empty();
        $('#Pais_sp_gasificacion_agregar').append(optionsAsString);
        $('#Pais_sp_gasificacion_agregar').selectpicker('refresh');
        $('#Pais_sp_controlador_agregar').empty();
        $('#Pais_sp_controlador_agregar').append(optionsAsString);
        $('#Pais_sp_controlador_agregar').selectpicker('refresh');

        $('#Ciudad_cortina_agregar').empty();

        $('#Ciudad_controlador_agregar').empty();

        $('#Ciudad_gasificacion_agregar').empty();

        optionsAsString = "";
        $('#Lugar_cortina_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione Lugar</option>";
        $('#Lugar_cortina_agregar').append(optionsAsString);
        $('#Lugar_cortina_agregar').selectpicker('refresh');
        $('#Lugar_controlador_agregar').empty();
        $('#Lugar_controlador_agregar').append(optionsAsString);
        $('#Lugar_controlador_agregar').selectpicker('refresh');
        $('#Lugar_gasificacion_agregar').empty();
        $('#Lugar_gasificacion_agregar').append(optionsAsString);
        $('#Lugar_gasificacion_agregar').selectpicker('refresh');

        optionsAsString = "";
        $('#ServiceProvider_controlador_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
        $('#ServiceProvider_controlador_agregar').append(optionsAsString);
        $('#ServiceProvider_controlador_agregar').selectpicker('refresh');
        $('#ServiceProvider_gasificacion_agregar').empty();
        $('#ServiceProvider_gasificacion_agregar').append(optionsAsString);
        $('#ServiceProvider_gasificacion_agregar').selectpicker('refresh');

        $('#Instalador_agregar').empty();
        $('#Gasificador_agregar').empty();


        optionsAsString = "";
        $('#TratamientoCO2_agregar').empty();
        optionsAsString += "<option value='0'>Seleccione Tipo Tratamiento</option>";
        $('#TratamientoCO2_agregar').append(optionsAsString);
        $('#TratamientoCO2_agregar').selectpicker('refresh');
        optionsAsString = "";

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }

                $('#Pais_controlador_agregar').append(optionsAsString);
                $('#Pais_controlador_agregar').selectpicker('refresh');
                $('#Pais_cortina_agregar').append(optionsAsString);
                $('#Pais_cortina_agregar').selectpicker('refresh');
                $('#Pais_gasificacion_agregar').append(optionsAsString);
                $('#Pais_gasificacion_agregar').selectpicker('refresh');
                $('#Pais_sp_controlador_agregar').append(optionsAsString);
                $('#Pais_sp_controlador_agregar').selectpicker('refresh');
                $('#Pais_sp_gasificacion_agregar').append(optionsAsString);
                $('#Pais_sp_gasificacion_agregar').selectpicker('refresh');
            },
        });

        //OBTENER CIUDADES
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione Ciudad</option>";

                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                }

                $('#Ciudad_cortina_agregar').append(optionsAsString);
                $('#Ciudad_cortina_agregar').selectpicker('refresh');
                $('#Ciudad_controlador_agregar').append(optionsAsString);
                $('#Ciudad_controlador_agregar').selectpicker('refresh');
                $('#Ciudad_gasificacion_agregar').append(optionsAsString);
                $('#Ciudad_gasificacion_agregar').selectpicker('refresh');
            },
        });
        //OBTENER CIUDADES


        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#ServiceProvider_controlador_agregar').empty();
                $('#ServiceProvider_gasificacion_agregar').empty();
                optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                }
                $('#ServiceProvider_controlador_agregar').append(optionsAsString);
                $('#ServiceProvider_controlador_agregar').selectpicker('refresh');
                $('#ServiceProvider_gasificacion_agregar').append(optionsAsString);
                $('#ServiceProvider_gasificacion_agregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTecnicos", "Usuarios")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                $('#Instalador_agregar').empty();
                $('#Gasificador_agregar').empty();
                optionsAsString += "<option value='0'>Seleccione Técnico</option>";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                }
                $('#Instalador_agregar').append(optionsAsString);
                $('#Instalador_agregar').selectpicker('refresh');
                $('#Gasificador_agregar').append(optionsAsString);
                $('#Gasificador_agregar').selectpicker('refresh');

            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetContenedores", "Contenedores")',
            data: { Estado: "1" },
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione Contenedor</option>";
                $('#Contenedor_agregar').empty();
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdContenedor + "'>" + json[i].NumeroContenedor + "</option>";
                }
                $('#Contenedor_agregar').append(optionsAsString);
                $('#Contenedor_agregar').selectpicker('refresh');
            },
        });


        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTipoLugares", "TipoLugar")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $('#TipoLugar_cortina_agregar').append(optionsAsString);
                $('#TipoLugar_cortina_agregar').selectpicker('refresh');
                $('#TipoLugar_controlador_agregar').append(optionsAsString);
                $('#TipoLugar_controlador_agregar').selectpicker('refresh');
                $('#TipoLugar_gasificacion_agregar').append(optionsAsString);
                $('#TipoLugar_gasificacion_agregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTratamientoCO2", "TratamientoCO2")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#TratamientoCO2_agregar').empty();
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                }
                $('#TratamientoCO2_agregar').append(optionsAsString);
                $('#TratamientoCO2_agregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPuertos", "Puertos")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                optionsAsString += "<option value='0'>Seleccione Puerto</option>";

                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                }

                $('#PuertoOrigen_agregar').append(optionsAsString);
                $('#PuertoOrigen_agregar').selectpicker('refresh');
                $('#PuertoDestino_agregar').append(optionsAsString);
                $('#PuertoDestino_agregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNavesActivas", "Nave")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdNave + "'>" + json[i].NombreNave + "</option>";
                }
                $('#Nave_agregar').append(optionsAsString);
                $('#Nave_agregar').selectpicker('refresh');
                $('#Nave_agregar2').append(optionsAsString);
                $('#Nave_agregar2').selectpicker('refresh');
                $('#Nave_agregar3').append(optionsAsString);
                $('#Nave_agregar3').selectpicker('refresh');
            },
        });



        $("#TipoLugar_cortina_agregar").change(function () {

            if ($("#TipoLugar_cortina_agregar").val() != "0") {

                $('#Pais_cortina_agregar').removeAttr('disabled');
                $('#Ciudad_cortina_agregar').removeAttr('disabled');
                $('#Lugar_cortina_agregar').removeAttr('disabled');
                $('#Instalador_cortina_agregar').removeAttr('disabled');
                $('#Pais_cortina_agregar').selectpicker('refresh');
                $('#Ciudad_cortina_agregar').selectpicker('refresh');
                $('#Instalador_cortina_agregar').selectpicker('refresh');
                //$('.Lugar_cortina_agregar').selectpicker('render');
                var optionsAsString = "";
                $('#Lugar_cortina_agregar').children('option:not(:first)').remove();
                $('#Lugar_cortina_agregar').selectpicker('refresh');


                if ($("#TipoLugar_cortina_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            } else {
                $('#Pais_cortina_agregar').attr('disabled', 'disabled');
                $('#Ciudad_cortina_agregar').attr('disabled', 'disabled');
                $('#Lugar_cortina_agregar').attr('disabled', 'disabled');
                $('#Instalador_cortina_agregar').attr('disabled', 'disabled');
                $('#Pais_cortina_agregar').selectpicker('refresh');
                $('#Ciudad_cortina_agregar').selectpicker('refresh');
                $('#Lugar_cortina_agregar').selectpicker('refresh');
                $('#Instalador_cortina_agregar').selectpicker('refresh');
            }
        });

        $("#TipoLugar_controlador_agregar").change(function () {

            if ($("#TipoLugar_controlador_agregar").val() != "0") {

                $('#Pais_controlador_agregar').removeAttr('disabled');
                $('#Ciudad_controlador_agregar').removeAttr('disabled');
                $('#Lugar_controlador_agregar').removeAttr('disabled');
                $('#Pais_controlador_agregar').selectpicker('refresh');
                $('#Ciudad_controlador_agregar').selectpicker('refresh');
                var optionsAsString = "";
                $('#Lugar_controlador_agregar').children('option:not(:first)').remove();
                $('#Lugar_controlador_agregar').selectpicker('refresh');


                if ($("#TipoLugar_controlador_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_controlador_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_controlador_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_controlador_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_controlador_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            } else {
                $('#Pais_controlador_agregar').attr('disabled', 'disabled');
                $('#Ciudad_controlador_agregar').attr('disabled', 'disabled');
                $('#Lugar_controlador_agregar').attr('disabled', 'disabled');
                $('#Pais_controlador_agregar').selectpicker('refresh');
                $('#Ciudad_controlador_agregar').selectpicker('refresh');
                $('#Lugar_controlador_agregar').selectpicker('refresh');
            }
        });

        $("#TipoLugar_gasificacion_agregar").change(function () {

            if ($("#TipoLugar_gasificacion_agregar").val() != "0") {

                $('#Pais_gasificacion_agregar').removeAttr('disabled');
                $('#Ciudad_gasificacion_agregar').removeAttr('disabled');
                $('#Lugar_gasificacion_agregar').removeAttr('disabled');
                $('#Pais_gasificacion_agregar').selectpicker('refresh');
                $('#Ciudad_gasificacion_agregar').selectpicker('refresh');
                var optionsAsString = "";
                $('#Lugar_gasificacion_agregar').children('option:not(:first)').remove();
                $('#Lugar_gasificacion_agregar').selectpicker('refresh');

                if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_gasificacion_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_gasificacion_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_gasificacion_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_gasificacion_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            } else {
                $('#Pais_gasificacion_agregar').attr('disabled', 'disabled');
                $('#Ciudad_gasificacion_agregar').attr('disabled', 'disabled');
                $('#Lugar_gasificacion_agregar').attr('disabled', 'disabled');
                $('#Pais_gasificacion_agregar').selectpicker('refresh');
                $('#Ciudad_gasificacion_agregar').selectpicker('refresh');
                $('#Lugar_gasificacion_agregar').selectpicker('refresh');

            }
        });

        $("#Pais_sp_controlador_agregar").change(function () {

            if ($("#Pais_sp_controlador_agregar").val() != "0") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetServiceProviderPais", "ServiceProvider")',
                    data: { IdPais: $("#Pais_sp_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#ServiceProvider_controlador_agregar').empty();
                        optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                        }
                        $('#ServiceProvider_controlador_agregar').append(optionsAsString);
                        $('#ServiceProvider_controlador_agregar').selectpicker('refresh');
                    },
                });
            }
        });

        $(document).on('change', '.TratamientoCO2_agregar', function () {
            if ($(this).val() == "2") {
                $("#div_filtros_agregar").show();
                $("#div_cal_agregar").show();
            } else {
                if ($(this).val() == "3") {
                    $("#div_filtros_agregar").hide();
                    $("#div_cal_agregar").show();
                } else {
                    $("#div_filtros_agregar").hide();
                    $("#div_cal_agregar").hide();
                }
            }
        });

        $("#ServiceProvider_controlador_agregar").change(function () {
            if ($("#ServiceProvider_controlador_agregar").val() == "0") {
                $('#Instalador_agregar').val("0");
                $('#Instalador_agregar').selectpicker('refresh');
            } else {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetTecnicosByServiceProvider", "Usuarios")',
                    data: { IdServiceProvider: $("#ServiceProvider_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Instalador_agregar').empty();
                        optionsAsString += "<option value='0'>Seleccione Técnico</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                        }
                        $('#Instalador_agregar').append(optionsAsString);
                        $('#Instalador_agregar').selectpicker('refresh');
                    },
                });
            }
        });

        $("#Pais_sp_gasificacion_agregar").change(function () {
            if ($(this).val() == "0") {
                $('#ServiceProvider_gasificacion_agregar').empty();
                optionsAsString = "<option value='0'>Seleccione Service Provider</option>";
                $('#ServiceProvider_gasificacion_agregar').append(optionsAsString);
                $('#ServiceProvider_gasificacion_agregar').selectpicker('refresh');

                $('#Gasificador_agregar').empty();
                optionsAsString = "<option value='0'>Seleccione Tecnico</option>";
                $('#Gasificador_agregar').append(optionsAsString);
                $('#Gasificador_agregar').selectpicker('refresh');
            } else {

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetServiceProviderPais", "ServiceProvider")',
                    data: { IdPais: $("#Pais_sp_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#ServiceProvider_gasificacion_agregar').empty();
                        optionsAsString += "<option value='0'>Seleccione Service Provider</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                        }
                        $('#ServiceProvider_gasificacion_agregar').append(optionsAsString);
                        $('#ServiceProvider_gasificacion_agregar').selectpicker('refresh');
                    },
                });
            }
        });

        $("#ServiceProvider_gasificacion_agregar").change(function () {
            if ($(this).val() == "0") {
                $('#Gasificador_agregar').empty();
                optionsAsString = "<option value='0'>Seleccione Tecnico</option>";
                $('#Gasificador_agregar').append(optionsAsString);
                $('#Gasificador_agregar').selectpicker('refresh');
            } else {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetTecnicosByServiceProvider", "Usuarios")',
                    data: { IdServiceProvider: $("#ServiceProvider_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Gasificador_agregar').empty();
                        optionsAsString += "<option value='0'>Seleccione un Tecnico</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                        }
                        $('#Gasificador_agregar').append(optionsAsString);
                        $('#Gasificador_agregar').selectpicker('refresh');
                    },
                });
            }
        });

        $("#Pais_cortina_agregar").change(function () {
            if ($(this).val() == "0") {
                //OBTENER CIUDADES
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Ciudad_cortina_agregar').empty();
                        optionsAsString += "<option value='0'>Seleccione Ciudad</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                        }

                        $('#Ciudad_cortina_agregar').append(optionsAsString);
                        $('#Ciudad_cortina_agregar').selectpicker('refresh');
                    },
                });
                //OBTENER CIUDADES

                if ($("#TipoLugar_cortina_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "";
                            optionsAsString += "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "";
                            optionsAsString += "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "";
                            optionsAsString += "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            optionsAsString = "";
                            optionsAsString += "<option value='0'>Seleccione Lugar</option>";
                            $('#Lugar_cortina_agregar').empty();
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

            } else {
                //Obtener ciudades por pais
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                    data: { IdPais: $("#Pais_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Ciudad_cortina_agregar').empty();
                        optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Ciudad_cortina_agregar').append(optionsAsString);
                        $('#Ciudad_cortina_agregar').selectpicker('refresh');
                    },
                });
                //Obtener ciudades por pais
                //Obtener lugares por pais
                if ($("#TipoLugar_cortina_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoPais", "Deposito")',
                        data: { IdPais: $("#Pais_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingPais", "Packing")',
                        data: { IdPais: $("#Pais_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoPais", "Antepuerto")',
                        data: { IdPais: $("#Pais_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenPais", "Puertos")',
                        data: { IdPais: $("#Pais_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                //Obtener lugares por pais

            }
        });

        $("#Ciudad_cortina_agregar").change(function () {

            if ($(this).val() != "0") {

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoCiudad", "Ciudad")',
                    data: { IdCiudad: $("#Ciudad_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;

                        if (cuenta != 0) {
                            $("#Pais_cortina_agregar").selectpicker();
                            $("#Pais_cortina_agregar").selectpicker('val', parseInt(json[0].IdPais));
                        }
                    },
                });

                if ($("#TipoLugar_cortina_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        data: { IdCiudad: $("#Ciudad_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: $("#Ciudad_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: $("#Ciudad_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        data: { IdCiudad: $("#Ciudad_cortina_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_cortina_agregar').append(optionsAsString);
                            $('#Lugar_cortina_agregar').selectpicker('refresh');
                        },
                    });
                }

            } else {

                if ($("#TipoLugar_cortina_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_cortina_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_cortina_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "";
                            var optionsAsString = "";
                            $('#Lugar_cortina_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_cortina_agregar').append(optionsAsString);
                                $('#Lugar_cortina_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            }
        });

        $("#Pais_controlador_agregar").change(function () {
            if ($(this).val() == "0") {
                //OBTENER CIUDADES
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Ciudad</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                        }

                        $('#Ciudad_controlador_agregar').append(optionsAsString);
                        $('#Ciudad_controlador_agregar').selectpicker('refresh');
                    },
                });
                //OBTENER CIUDADES

                if ($("#TipoLugar_controlador_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;


                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_controlador_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_controlador_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            } else {
                //Obtener ciudades por pais
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                    data: { IdPais: $("#Pais_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Ciudad_controlador_agregar').empty();
                        optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Ciudad_controlador_agregar').append(optionsAsString);
                        $('#Ciudad_controlador_agregar').selectpicker('refresh');
                    },
                });
                //Obtener ciudades por pais
                //Obtener lugares por pais
                if ($("#TipoLugar_controlador_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoPais", "Deposito")',
                        data: { IdPais: $("#Pais_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingPais", "Packing")',
                        data: { IdPais: $("#Pais_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoPais", "Antepuerto")',
                        data: { IdPais: $("#Pais_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenPais", "Puertos")',
                        data: { IdPais: $("#Pais_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                //Obtener lugares por pais
            }
        });

        $("#Ciudad_controlador_agregar").change(function () {
            if ($(this).val() != "0") {

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoCiudad", "Ciudad")',
                    data: { IdCiudad: $("#Ciudad_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;

                        if (cuenta != 0) {
                            $("#Pais_controlador_agregar").selectpicker();
                            $("#Pais_controlador_agregar").selectpicker('val', parseInt(json[0].IdPais));
                        }
                    },
                });

                if ($("#TipoLugar_controlador_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        data: { IdCiudad: $("#Ciudad_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: $("#Ciudad_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: $("#Ciudad_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        data: { IdCiudad: $("#Ciudad_controlador_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_controlador_agregar').append(optionsAsString);
                            $('#Lugar_controlador_agregar').selectpicker('refresh');
                        },
                    });
                }

            } else {

                if ($("#TipoLugar_controlador_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_controlador_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_controlador_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_controlador_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "";
                            var optionsAsString = "";
                            $('#Lugar_controlador_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_controlador_agregar').append(optionsAsString);
                                $('#Lugar_controlador_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            }
        });

        $("#Pais_gasificacion_agregar").change(function () {
            if ($(this).val() == "0") {
                //OBTENER CIUDADES
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione Ciudad</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                        }

                        $('#Ciudad_gasificacion_agregar').append(optionsAsString);
                        $('#Ciudad_gasificacion_agregar').selectpicker('refresh');
                    },
                });
                //OBTENER CIUDADES

                if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;


                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;

                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            } else {
                //Obtener ciudades por pais
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                    data: { IdPais: $("#Pais_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Ciudad_gasificacion_agregar').empty();
                        optionsAsString = "<option value='0'>Seleccione Ciudad</option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#Ciudad_gasificacion_agregar').append(optionsAsString);
                        $('#Ciudad_gasificacion_agregar').selectpicker('refresh');
                    },
                });
                //Obtener ciudades por pais
                //Obtener lugares por pais
                if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoPais", "Deposito")',
                        data: { IdPais: $("#Pais_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingPais", "Packing")',
                        data: { IdPais: $("#Pais_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoPais", "Antepuerto")',
                        data: { IdPais: $("#Pais_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenPais", "Puertos")',
                        data: { IdPais: $("#Pais_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                //Obtener lugares por pais
            }
        });

        $("#Ciudad_gasificacion_agregar").change(function () {
            if ($(this).val() != "0") {

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoCiudad", "Ciudad")',
                    data: { IdCiudad: $("#Ciudad_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;

                        if (cuenta != 0) {
                            $("#Pais_gasificacion_agregar").selectpicker();
                            $("#Pais_gasificacion_agregar").selectpicker('val', parseInt(json[0].IdPais));
                        }
                    },
                });

                if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                    //OPCION DEPOSITO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                        data: { IdCiudad: $("#Ciudad_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                    //OPCION PACKING
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingCiudad", "Packing")',
                        data: { IdCiudad: $("#Ciudad_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                    //OPCION ANTEPUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntepuertoCiudad", "Antepuerto")',
                        data: { IdCiudad: $("#Ciudad_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                    //OPCION PUERTO
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertosOrigenCiudad", "Puertos")',
                        data: { IdCiudad: $("#Ciudad_gasificacion_agregar").val() },
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                            $('#Lugar_gasificacion_agregar').append(optionsAsString);
                            $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                        },
                    });
                }

            } else {

                if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPackingActivos", "Packing")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
                if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetAntePuertosActivos", "Antepuerto")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }

                if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetPuertos", "Puertos")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "";
                            var optionsAsString = "";
                            $('#Lugar_gasificacion_agregar').empty();
                            optionsAsString = "<option value='0'>Seleccione Lugar</option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                                }
                                $('#Lugar_gasificacion_agregar').append(optionsAsString);
                                $('#Lugar_gasificacion_agregar').selectpicker('refresh');
                            }
                        },
                    });
                }
            }
        });

        $("#Lugar_cortina_agregar").change(function () {
            if ($("#TipoLugar_cortina_agregar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoDeposito", "Deposito")',
                    data: { IdDeposito: $("#Lugar_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_cortina_agregar").val(json[0].IdPais);
                            $("#Pais_cortina_agregar").selectpicker('refresh');
                            $("#Ciudad_cortina_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_cortina_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_agregar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPacking", "Packing")',
                    data: { IdPacking: $("#Lugar_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_cortina_agregar").val(json[0].IdPais);
                            $("#Pais_cortina_agregar").selectpicker('refresh');
                            $("#Ciudad_cortina_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_cortina_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_agregar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                    data: { IdAntepuerto: $("#Lugar_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_cortina_agregar").val(json[0].IdPais);
                            $("#Pais_cortina_agregar").selectpicker('refresh');
                            $("#Ciudad_cortina_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_cortina_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_cortina_agregar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                    data: { IdPuertoOrigen: $("#Lugar_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_cortina_agregar").val(json[0].IdPais);
                            $("#Pais_cortina_agregar").selectpicker('refresh');
                            $("#Ciudad_cortina_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_cortina_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
        });

        $("#Lugar_controlador_agregar").change(function () {
            if ($("#TipoLugar_controlador_agregar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoDeposito", "Deposito")',
                    data: { IdDeposito: $("#Lugar_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_controlador_agregar").val(json[0].IdPais);
                            $("#Pais_controlador_agregar").selectpicker('refresh');
                            $("#Ciudad_controlador_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_controlador_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_agregar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPacking", "Packing")',
                    data: { IdPacking: $("#Lugar_cortina_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_controlador_agregar").val(json[0].IdPais);
                            $("#Pais_controlador_agregar").selectpicker('refresh');
                            $("#Ciudad_controlador_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_controlador_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_agregar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                    data: { IdAntepuerto: $("#Lugar_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_controlador_agregar").val(json[0].IdPais);
                            $("#Pais_controlador_agregar").selectpicker('refresh');
                            $("#Ciudad_controlador_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_controlador_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_controlador_agregar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                    data: { IdPuertoOrigen: $("#Lugar_controlador_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_controlador_agregar").val(json[0].IdPais);
                            $("#Pais_controlador_agregar").selectpicker('refresh');
                            $("#Ciudad_controlador_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_controlador_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
        });

        $("#Lugar_gasificacion_agregar").change(function () {
            if ($("#TipoLugar_gasificacion_agregar").val() == "1") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoDeposito", "Deposito")',
                    data: { IdDeposito: $("#Lugar_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_gasificacion_agregar").val(json[0].IdPais);
                            $("#Pais_gasificacion_agregar").selectpicker('refresh');
                            $("#Ciudad_gasificacion_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_gasificacion_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_agregar").val() == "2") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPacking", "Packing")',
                    data: { IdPacking: $("#Lugar_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_gasificacion_agregar").val(json[0].IdPais);
                            $("#Pais_gasificacion_agregar").selectpicker('refresh');
                            $("#Ciudad_gasificacion_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_gasificacion_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_agregar").val() == "3") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoAntepuerto", "Antepuerto")',
                    data: { IdAntepuerto: $("#Lugar_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_gasificacion_agregar").val(json[0].IdPais);
                            $("#Pais_gasificacion_agregar").selectpicker('refresh');
                            $("#Ciudad_gasificacion_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_gasificacion_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
            if ($("#TipoLugar_gasificacion_agregar").val() == "4") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoPuertoOrigen", "Puertos")',
                    data: { IdPuertoOrigen: $("#Lugar_gasificacion_agregar").val() },
                    async: false,
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Pais_gasificacion_agregar").val(json[0].IdPais);
                            $("#Pais_gasificacion_agregar").selectpicker('refresh');
                            $("#Ciudad_gasificacion_agregar").val(json[0].IdCiudad);
                            $("#Ciudad_gasificacion_agregar").selectpicker('refresh');
                        }
                    },
                });
            }
        });

        $("#Instalador_agregar").change(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoTecnico", "Usuarios")',
                data: { IdTecnico: $("#Instalador_agregar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_sp_controlador_agregar").val(json[0].IdPaisSP);
                        $("#Pais_sp_controlador_agregar").selectpicker('refresh');
                        $("#ServiceProvider_controlador_agregar").val(json[0].IdSP);
                        $("#ServiceProvider_controlador_agregar").selectpicker('refresh');
                    }
                },
            });
        });

        $("#Gasificador_agregar").change(function () {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoTecnico", "Usuarios")',
                data: { IdTecnico: $("#Gasificador_agregar").val() },
                async: false,
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#Pais_sp_gasificacion_agregar").val(json[0].IdPaisSP);
                        $("#Pais_sp_gasificacion_agregar").selectpicker('refresh');
                        $("#ServiceProvider_gasificacion_agregar").val(json[0].IdSP);
                        $("#ServiceProvider_gasificacion_agregar").selectpicker('refresh');
                    }
                },
            });
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetReservaByIdServicio", "Reservas")',
            data: { IdReserva: getParameterByName("Id") },
            async: false,
            success: function (response) {
                var json = JSON.parse(response);
                var text = "";
                var aux = "";
                var largo = 0;
                var cuenta = 0;
                cuenta = json.length;

                $("#Booking_agregar").val(json[0].Booking);
                $("#Viaje_agregar").val(json[0].Viaje);
                $("#Naviera_agregar").val(json[0].Naviera);
                $('select[name=Nave_agregar]').val(json[0].IdNave);
                $('select[name=PuertoOrigen_agregar]').val(json[0].IdPuertoOrigen);
                $('select[name=PuertoDestino_agregar]').val(json[0].IdPuertoDestino);
                $("#Consignatario_agregar").val(json[0].Consignatario);
                $("#Exportador_agregar").val(json[0].Exportador);
                $("#ETA_agregar").val(formatDate(json[0].Eta));
                $('.selectpicker').selectpicker('refresh')


                $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
                $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
                $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
                $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
                $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
                $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
                $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0.)");
                $("#Controlador_agregar").css("background-color", "rgba(255, 0, 0, 0");
                $("button[data-id=Bateria_agregar]").css("background", "rgba(255, 0, 0, 0)");
                $("button[data-id=TratamientoCO2_agregar]").css("background", "rgba(255, 0, 0, 0)");



                $('#AgregarServicio').trigger('click');
            }
        });
    }

    $("#Fecha_servicio_agregar,#Fecha_cortina_agregar,#Fecha_gasificacion_agregar,#ETA_agregar").datepicker({
        dateFormat: "dd-mm-yy",
        firstDay: 1,
        dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
        dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
        monthNames:
            ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
            "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
        monthNamesShort:
            ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
            "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
        showWeek: true
    });

    $("#GuardarServicio").click(function () {

        if ($("#PuertoOrigen_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Viaje_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#ETA_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#PuertoDestino_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Contenedor_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Nave_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Controlador_agregar").val() == "" || $("#Controlador_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Controlador_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(500);
        } else if ($("#Bateria_agregar").val() == "" || $("#Controlador_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0.)");
            $("#Controlador_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=Bateria_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(500);
        } else {
            var PuertoOrigen = $("#PuertoOrigen_agregar").val();
            var PuertoDestino = $("#PuertoDestino_agregar").val();
            var Nave1 = $("#Nave_agregar").val();
            var Nave2 = $("#Nave_agregar2").val();
            var Nave3 = $("#Nave_agregar3").val();
            var Viaje = $("#Viaje_agregar").val();
            var Consignatario = $("#Consignatario_agregar").val();
            var Contenedor = $("#Contenedor_agregar").val();
            var Eta = $("#ETA_agregar").val();
            var FechaCortina = $("#Fecha_cortina_agregar").val();
            var TLCortina = $("#TipoLugar_cortina_agregar").val();
            var LugarCortina = $("#Lugar_cortina_agregar").val();
            var Purafil = $("#Purafil_agregar").val();
            var Controlador = $("#Controlador_agregar").val();
            var Bateria = $("#Bateria_agregar").val();
            var HoraLlegada = $("#Hora_llegada_agregar").val();
            var HoraSalida = $("#Hora_salida_agregar").val();
            var FechaInstContr = $("#Fecha_servicio_agregar").val();
            var TLInstContr = $("#TipoLugar_controlador_agregar").val();
            var LugarInstContr = $("#Lugar_controlador_agregar").val();
            var TecnicoInstalador = $("#Instalador_agregar").val();
            var TemperaturaContenedor = $("#Temperatura_contenedor_agregar").val();
            var Folio = $("#Folio_agregar").val();
            var Precinto = $("#Precinto_agregar").val();
            var Candado = $("#Candado_agregar").val();
            var FechaGasificacion = $("#Fecha_gasificacion_agregar").val();
            var TLGasificacion = $("#TipoLugar_gasificacion_agregar").val();
            var LugarGasificacion = $("#Lugar_gasificacion_agregar").val();
            var TecnicoGasificador = $("#Gasificador_agregar").val();
            var CO2 = $("#CO2_agregar").val();
            var N2 = $("#N2_agregar").val();
            var TipoTratamientoCO2 = $("#TratamientoCO2_agregar").val();
            var Scrubber = $("#Filtros_agregar").val();
            var Cal = $("#Cal_agregar").val();
            var EstadoServicio = "2";
            var CortinaInstalada = "1";
            var Gasificado = "1";
            var UltimaNave = "";
            var UltimoControlador = $("#Controlador_agregar").val();
            var Habilitado = "1";
            var InstaladorCortina = $("#Instalador_cortina_agregar").val();
            var NotaServicio = $("#Observaciones_agregar").val();
            var NotaLogistica = $("#Observaciones_logistica_agregar").val();
            //var SelloPanel2 = $("#Selloperno2Agregar_servicio").val();
            //var SelloSecurity = $("#SellotapaAgregar_servicio").val();

            if ($('#div_nueva_nave1_agregar').is(':hidden')) {
                Nave2 = "0";
            }

            if ($('#div_nueva_nave2_agregar').is(':hidden')) {
                Nave3 = "0";
            }

            if (Nave3 != "0") {
                UltimaNave = $("#Nave_agregar3 option:selected").text();
            } else if (Nave2 != "0") {
                UltimaNave = $("#Nave_agregar2 option:selected").text();
            } else {
                UltimaNave = $("#Nave_agregar option:selected").text();
            }

            if (Purafil == "") {
                Purafil = "0";
            }

            if (TemperaturaContenedor == "") {
                TemperaturaContenedor = "0";
            }

            if (Folio == "") {
                Folio = "0";
            }

            if (Precinto == "") {
                Precinto = "0";
            }

            if (Candado == "") {
                Candado = "0";
            }

            if (CO2 == "") {
                CO2 = "0";
            }

            if (N2 == "") {
                N2 = "0";
            }

            if (Scrubber == "") {
                Scrubber = "0";
            }

            if (Cal == "") {
                Cal = "0";
            }

            if (LugarCortina != "0" && TLCortina != "0") {
                CortinaInstalada = "0";
            } else {
                CortinaInstalada = "1";
            }

            if (LugarGasificacion != "0" && TLGasificacion != "0" && TecnicoGasificador != "0") {
                Gasificado = "0";
            } else {
                Gasificado = "1";
            }

            if ($('#Habilitacion_agregar').prop('checked')) {
                Habilitado = "1";
            } else {
                Habilitado = "0";
            }

            if (TipoTratamientoCO2 == "0" || TipoTratamientoCO2 == "1") {
                Scrubber = "0";
                Cal = "0";
            }

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarContenedorById", "Controlador")',
                data: { IdContenedor: Contenedor },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 1) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarControladorById", "Controlador")',
                            data: { IdControlador: Controlador },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador != 1) {
                                        $.ajax({
                                            type: "POST",
                                            url: '@Url.Action("CrearServicio", "Reservas")',
                                            data: {
                                                IdReserva: getParameterByName("Id"),
                                                Consignatario: Consignatario,
                                                Viaje: Viaje,
                                                PuertoOrigen: PuertoOrigen,
                                                PuertoDestino: PuertoDestino,
                                                Nave1: Nave1,
                                                Nave2: Nave2,
                                                Nave3: Nave3,
                                                Contenedor: Contenedor,
                                                Eta: Eta,
                                                FechaCortina: FechaCortina,
                                                TipoLugarCortina: TLCortina,
                                                LugarCortina: LugarCortina,
                                                Purafil: Purafil,
                                                Controlador: Controlador,
                                                Bateria: Bateria,
                                                HoraLlegada: HoraLlegada,
                                                HoraSalida: HoraSalida,
                                                FechaInstContr: FechaInstContr,
                                                TipoLugarInstContr: TLInstContr,
                                                LugarInstContr: LugarInstContr,
                                                TecnicoInstalador: TecnicoInstalador,
                                                TemperaturaContenedor: TemperaturaContenedor,
                                                Folio: Folio,
                                                Precinto: Precinto,
                                                Candado: Candado,
                                                FechaGasificacion: FechaGasificacion,
                                                TipoLugarGasificacion: TLGasificacion,
                                                LugarGasificacion: LugarGasificacion,
                                                TecnicoGasificador: TecnicoGasificador,
                                                TipoTratamientoCO2: TipoTratamientoCO2,
                                                Scrubber: Scrubber,
                                                Cal: Cal,
                                                CortinaInstalada: CortinaInstalada,
                                                Gasificado: Gasificado,
                                                EstadoServicio: EstadoServicio,
                                                UltimaNave: UltimaNave,
                                                UltimoControlador: UltimoControlador,
                                                Habilitado: Habilitado,
                                                InstaladorCortina: InstaladorCortina,
                                                NotaServicio: NotaServicio,
                                                NotaLogistica: NotaLogistica,
                                                Selloperno1: $("#Selloperno1Agregar").val(),
                                                Selloperno2: $("#Selloperno2Agregar").val(),
                                                Sellotapa: $("#SellotapaAgregar").val(),
                                                SelloPanel1: $("#SelloPanel1_servicio").val(),
                                                SelloPanel2: $("#SelloPanel2_servicio").val(),
                                                SelloSecurity: $("#SelloSecurity_servicio").val(),
                                                ObservacionSellos: $("#ObservacionSellosTextoAgregar").val()
                                            },
                                            success: function (response) {
                                                var json = JSON.parse(response);
                                                if (json.validador == 0) {
                                                    var aux = 'success';
                                                } else {
                                                    var aux = 'warning';
                                                }
                                                swal({
                                                    title: '',
                                                    text: json.Mensaje,
                                                    type: aux,
                                                    showCancelButton: false,
                                                    confirmButtonColor: '#3085d6',
                                                    cancelButtonColor: '#d33',
                                                    confirmButtonText: 'Aceptar'
                                                }).then((result) => {
                                                    location.reload();
                                                })
                                            }
                                        });
                                } else {
                                    var aux = 'warning';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        //NO SE PUEDE UTILIZAR ESE CONTROLADOR
                                        //location.reload();
                                    })
                                }

                            }
                        });

                    } else {
                        var aux = 'warning';
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            //NO SE PUEDE UTILIZAR ESE CONTENEDOR
                        })
                    }
                }
            });


        }
    });


    $("#Modificaciones").click(function () {
        var table = $('#Tb_Operaciones').DataTable();
        //enviar datos para agregar Naviera
        if ($("#IdServicio").val() != "") {
            table.destroy();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetModificacionesServicio", "Reservas")',
                data: { IdServicio: $("#IdServicio").val() },
                success: function (response) {
                    var text = document.getElementById("myModalLabel7");
                    text.textContent = "Ultimas Modificaciones";

                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    for (var i = 0 ; i < cuenta ; i++) {
                        var cortina = "";
                        var gasificada = "";
                        var validado = "";
                        var habilitado = "";
                        if (json[i].CortinaInstalada == 1) {
                            cortina = "NO";
                        } else {
                            cortina = "YES";
                        }
                        if (json[i].Gasificado == 1) {
                            gasificada = "NO";
                        } else {
                            gasificada = "YES";
                        }
                        if (json[i].Validado == 1) {
                            validado = "YES";
                        } else {
                            validado = "NO";
                        }

                        if (json[i].Habilitado == 1) {
                            habilitado = "YES";
                        } else
                        {
                            habilitado = "NO";
                        }
                        data.push([ json[i].Id, json[i].Usuario, formatDate(json[i].Fecha), json[i].Operacion,
                                    json[i].Contenedor, json[i].Controlador, json[i].Tratamiento,
                                    json[i].DetalleCortina, json[i].DetalleGasificacion, json[i].PuertoOrigen, json[i].PuertoDestino,
                                    json[i].Consignatario, json[i].Viaje, cortina, gasificada,
                                    habilitado, validado, json[i].Temperatura, json[i].Candado,
                                    json[i].CantidadFiltros, json[i].CantidadCal, formatDate(json[i].Eta), json[i].UltimaNave,
                                    json[i].UltimoControlador, json[i].HoraLlegada, json[i].HoraSalida, json[i].SelloPerno1,
                                    json[i].SelloPerno2, json[i].SelloTapa, json[i].SelloPanel1, json[i].SelloPanel2, json[i].SelloServicio, json[i].EstadoServicio]);
                    }

                    $('#Tb_Operaciones tfoot th').each(function (i) {
                        var title = $('#Tb_Operaciones thead th').eq($(this).index()).text();
                        if (lenguaje == "es") {
                            $(this).html('<input class="form-control" type="text" placeholder="FILTRAR"/>');
                        } else {

                            $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');
                        }
                    });

                    if (lenguaje == "es") {
                        var table = $('#Tb_Operaciones').DataTable({
                            data: data,
                            "language": {
                                "lengthMenu": "Mostrar _MENU_ Resultados por pagina",
                                "zeroRecords": "No hay Resultados para mostrar",
                                "info": "Mostrando pagina _PAGE_ de _PAGES_ paginas",
                                "infoEmpty": "No hay Resultados disponibles",
                                "search": "Buscar: ",
                                "paginate": {
                                    "first": "Primera",
                                    "last": "Última",
                                    "next": "Siguiente",
                                    "previous": "Anterior"
                                }
                            }
                        });
                    } else {
                        var table = $('#Tb_Operaciones').DataTable({
                            data: data
                        });
                    }

                    table.columns().every(function () {
                        var that = this;
                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });

                        $('select', this.footer()).on('change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });

                    $('#Tb_Operaciones tbody').on('click', 'tr', function () {
                        if (cuenta != 0) {
                            if ($(this).hasClass('selected')) {
                                //$("#IdServicio").val(this.children[0].innerText);
                                //$("#IdControlador").val(this.children[5].innerText);
                                $(this).removeClass('selected');
                            }
                            else {
                                table.$('tr.selected').removeClass('selected');
                                //$("#IdServicio").val(this.children[0].innerText);
                                //$("#IdControlador").val(this.children[5].innerText);
                                $(this).addClass('selected');
                            }
                        }
                    });
                },
            });
            $('#UltimasModificaciones').trigger('click');
        } else {
            swal('Ups!', '<span class="alerta" key="errormodificacionesservicio">Debe seleccionar un Servicio para poder visualizar sus Modificaciones.</span>', 'error');
        }

    });

    $("#Controladores").click(function () {
        var table = $("#Tb_Controladores").DataTable();
        if ($("#IdServicio").val() != "") {
            table.destroy();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetHistoricoControladores", "Reservas")',
                data: { IdServicio: $("#IdServicio").val() },
                success: function (response) {
                    var data = [];
                    var text = document.getElementById("myModalLabel8");
                    text.textContent = "Historico Controladores asociados al servicio";
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    if (cuenta != 0) {
                        for (var i = 0 ; i < cuenta ; i++) {
                            if (json[i].FechaInstalacion == null)
                            {
                               var fechaInstalacion = "";
                            } else
                            {
                                var fechaInstalacion = formatDate(json[i].FechaInstalacion);
                            }

                            data.push([json[i].Id, json[i].Controlador, json[i].IdServicio, fechaInstalacion, json[i].TipoLugar, json[i].LugarControlador, json[i].Tecnico, json[i].Bateria]);
                        }

                        $('#Tb_Controladores tfoot th').each(function (i) {
                            var title = $('#Tb_Controladores thead th').eq($(this).index()).text();
                            if (lenguaje == "es") {
                                $(this).html('<input class="form-control" type="text" placeholder="FILTRAR"/>');
                            } else {

                                $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');
                            }
                        });

                        if (lenguaje == "es") {
                            var table = $('#Tb_Controladores').DataTable({
                                data: data,
                                "language": {
                                    "lengthMenu": "Mostrar _MENU_ Resultados por pagina",
                                    "zeroRecords": "No hay Resultados para mostrar",
                                    "info": "Mostrando pagina _PAGE_ de _PAGES_ paginas",
                                    "infoEmpty": "No hay Resultados disponibles",
                                    "search": "Buscar: ",
                                    "paginate": {
                                        "first": "Primera",
                                        "last": "Última",
                                        "next": "Siguiente",
                                        "previous": "Anterior"
                                    }
                                }
                            });
                        } else {
                            var table = $('#Tb_Controladores').DataTable({
                                data: data
                            });
                        }

                        table.columns().every(function () {
                            var that = this;
                            $('input', this.footer()).on('keyup change', function () {
                                if (that.search() !== this.value) {
                                    that
                                        .search(this.value)
                                        .draw();
                                }
                            });

                            $('select', this.footer()).on('change', function () {
                                if (that.search() !== this.value) {
                                    that
                                        .search(this.value)
                                        .draw();
                                }
                            });
                        });

                        $('#Tb_Controladores tbody').on('click', 'tr', function () {
                            if (cuenta != 0) {
                                if ($(this).hasClass('selected')) {
                                    $("#IdServicio").val(this.children[0].innerText);
                                    $("#IdControlador").val(this.children[5].innerText);
                                    $(this).removeClass('selected');
                                }
                                else {
                                    table.$('tr.selected').removeClass('selected');
                                    $("#IdServicio").val(this.children[0].innerText);
                                    $("#IdControlador").val(this.children[5].innerText);
                                    $(this).addClass('selected');
                                }
                            }
                        });
                    }

                    $('#HistoricoControladores').trigger('click');
                }
            });
        }
        else {
            swal('Ups!', '<span class="alerta" key="errorcontroladoresservicio">Debe Seleccionar un servicio para ver historico de controladores</span>', 'error');
        }
    });

    $("#Leaktest").click(function () {

        //Mostrar Datos de Leaktest
        if ($("#IdServicio").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetResultadoLeaktestByContenedor", "Leaktest")',
                data: { IdServicio: $("#IdServicio").val() },
                success: function (response) {
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    if (cuenta != 0) {
                        for (var i = 0; i < cuenta; i++) {
                            $("#Reserva_leaktest").val(json[0].IdReserva);
                            $("#Resultado_leaktest").val(json[0].IdResultado);
                            $("#Deposito_leaktest").val(json[0].Deposito);
                            $("#Naviera_leaktest").val(json[0].Naviera);
                            $("#Fecha_reserva_leaktest").val(formatDate(json[0].FechaReserva));
                            $("#Fecha_realizacion_leaktest").val(formatDate(json[0].FechaRealizacion));
                            $("#Maquinaria_leaktest").val(json[0].Maquinaria);
                            $("#Contenedor_leaktest").val(json[0].Contenedor);
                            if (json[0].EstadoResultado == 0) {
                                $("#Estado_resultado_leaktest").val("APROBADO");
                            } else {
                                $("#Estado_resultado_leaktest").val("RECHAZADO");
                            }

                            $("#Tiempo_leaktest").val(json[0].Tiempo);
                            $("#Tecnico_leaktest").val(json[0].Tecnico);
                            $("#ServiceProvider_leaktest").val(json[0].ServiceProvider);
                        }
                    }

                    $('#DetalleLeaktest').trigger('click');
                }
            });
        } else {
            swal('Ups!', '<span class="alerta" key="errordetalleleaktestservicio">Debe Seleccionar un servicio para ver su detalle de leak test.</span>', 'error');
        }
    });


    function ExportarServiceReport() {

        var Nave1 = $("#Nave_agregar").val();
        var Nave2 = $("#Nave_agregar2").val();
        var Nave3 = $("#Nave_agregar3").val();
        var Contenedor = $("#Contenedor_agregar option:selected").text();
        var IdContenedor = $("#Contenedor_agregar").val();
        var Controlador = $("#Controlador_agregar").val();
        var IdControlador = $("#Controlador_agregar").val();
        var FechaServicio = $("#Fecha_servicio_agregar").val();
        var Setpoint = "";
        var Cortina = "";
        var ScrubberSi = "";
        var ScrubberNo = "";
        var CO2Real = parseInt($("#CO2_agregar").val());
        var O2Real = parseInt($("#N2_agregar").val());
        var Bateria = $("#Bateria_agregar").val();
        var Exportador = "";
        var Consignatario = $("#Consignatario_agregar").val();
        var IdPuertoDestino = $("#PuertoDestino_agregar").val();
        var PuertoDestino = "";
        var Packing = $("#Lugar_cortina_agregar option:selected").text();
        var IdPuertoOrigen = $("#PuertoOrigen_agregar").val();
        var PuertoOrigen = "";
        var HoraInicioLeaktest = "";
        var HoraTerminoLeaktest = "";
        var HoraInicioServicio = $("#Hora_llegada_agregar").val();
        var HoraTerminoServicio = $("#Hora_salida_agregar").val();
        var TecnicoLeaktest = "";
        var TecnicoServicio = $("#Instalador_agregar option:selected").text();
        var TecnicoInstalador = $("#Instalador_agregar").val();
        var Commodity = "";
        var TipoCommodity = "";
        var Etd = $("#ETD_agregar").val();
        var Eta = $("#ETA_agregar").val();
        var TemperaturaReserva = 0;
        var Booking = "";
        var Naviera = "";
        var CantidadCO2 = 0
        var CantidadO2 = 0;
        var CommodityTecnica = "";
        var Nave = $("#Nave_agregar option:selected").text();
        var Viaje = $("#Viaje_agregar").val();
        var Adhesivo = "";
        var Temperatura = $("#Temperatura_contenedor_agregar").val();
        var TiempoEstanquedad = "";
        var Candado = $("#Candado_agregar").val();
        var IdReserva = getParameterByName("Id");
        var SelloPerno1 = $("#Selloperno1Agregar").val();
        var SelloPerno2 = $("#Selloperno2Agregar").val();
        var SelloTapa = $("#SellotapaAgregar").val();
        var SelloPanel1 = $("#SelloPanel1_servicio").val();
        var SelloPanel2 = $("#SelloPanel2_servicio").val();
        var SelloSecurity = $("#SelloSecurity_servicio").val();
        var ComentarioSello = $("#ObservacionSellosEditarTexto").val();
        var IdServicio = "0";
        var FechaCortina = $("#Fecha_cortina_agregar").val();
        var TLCortina = $("#TipoLugar_cortina_agregar").val();
        var LugarCortina = $("#Lugar_cortina_agregar").val();
        var Purafil = $("#Purafil_agregar").val();
        var TLInstContr = $("#TipoLugar_controlador_agregar").val();
        var LugarInstContr = $("#Lugar_controlador_agregar").val();
        var Folio = $("#Folio_agregar").val();
        var Precinto = $("#Precinto_agregar").val();
        var FechaGasificacion = $("#Fecha_gasificacion_agregar").val();
        var TLGasificacion = $("#TipoLugar_gasificacion_agregar").val();
        var LugarGasificacion = $("#Lugar_gasificacion_agregar").val();
        var TecnicoGasificador = $("#Gasificador_agregar").val();
        var CO2 = $("#CO2_agregar").val();
        var N2 = $("#N2_agregar").val();
        var TipoTratamientoCO2 = $("#TratamientoCO2_agregar").val();
        var Scrubber = $("#Filtros_agregar").val();
        var Cal = $("#Cal_agregar").val();
        var EstadoServicio = "2";
        var CortinaInstalada = "1";
        var Gasificado = "1";
        var UltimaNave = "";
        var UltimoControlador = $("#Controlador_agregar").val();
        var Habilitado = "1";
        var InstaladorCortina = $("#Instalador_cortina_agregar").val();
        var NotaServicio = $("#Observaciones_agregar").val();
        var NotaLogistica = $("#Observaciones_logistica_agregar").val();

        if (Packing == "Seleccione Lugar")
        {
            Packing = "";
        }

        if (TecnicoServicio == "Seleccione Técnico") {
            TecnicoServicio = "";
        }

        if (Nave3 != "0") {
            UltimaNave = $("#Nave_agregar3 option:selected").text();
        } else if (Nave2 != "0") {
            UltimaNave = $("#Nave_agregar2 option:selected").text();
        } else {
            UltimaNave = $("#Nave_agregar option:selected").text();
        }

        if (Purafil == "") {
            Purafil = "0";
        }

        if (Temperatura == "") {
            Temperatura = "0";
        }

        if (Folio == "") {
            Folio = "0";
        }

        if (Precinto == "") {
            Precinto = "0";
        }

        if (Candado == "") {
            Candado = "0";
        }

        if (CO2 == "") {
            CO2 = "0";
        }

        if (N2 == "") {
            N2 = "0";
        }

        if (Scrubber == "") {
            Scrubber = "0";
        }

        if (Cal == "") {
            Cal = "0";
        }

        if (LugarCortina != 0) {
            CortinaInstalada = "0";
        } else {
            CortinaInstalada = "1";
        }

        if (LugarGasificacion != 0) {
            Gasificado = "0";
        } else {
            Gasificado = "1";
        }

        if ($('#Habilitacion_agregar').prop('checked')) {
            Habilitado = "1";
        } else {
            Habilitado = "0";
        }

        if (TipoTratamientoCO2 == "0" || TipoTratamientoCO2 == "1") {
            Scrubber = "0";
            Cal = "0";
        }


        if ($("#Lugar_cortina_agregar").val() != "0") {
            Cortina = "x"
        }

        if ($("#TratamientoCO2_agregar").val() == "2") {
            ScrubberSi = "x";
        } else {
            ScrubberNo = "x";
        }


        if ($("#PuertoOrigen_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Viaje_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#ETA_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#PuertoDestino_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Contenedor_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Nave_agregar").val() == "0") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(0);
        } else if ($("#Controlador_agregar").val() == "0" || $("#Controlador_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Controlador_agregar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalAgregar').scrollTop(500);
        } else if ($("#Bateria_agregar").val() == "0" || $("#Bateria_agregar").val() == "") {
            $("button[data-id=PuertoOrigen_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_agregar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_agregar]").css("background", "rgba(255, 0, 0, 0.)");
            $("#Controlador_agregar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=Bateria_agregar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalAgregar').scrollTop(500);
        } else {

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarContenedorById", "Controlador")',
                data: { IdContenedor: IdContenedor },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 1) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarControladorById", "Controlador")',
                            data: { IdControlador: IdControlador },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador !=1) {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("GetReservaByIdServicio", "Reservas")',
                                data: { IdReserva: IdReserva },
                                async: false,
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    var text = "";
                                    var aux = "";
                                    var largo = 0;
                                    var cuenta = 0;
                                    cuenta = json.length;

                                    if (json[0].Etd == null)
                                    {
                                        var etd = ""
                                    } else
                                    {
                                        var etd = json[0].Etd;
                                    }
                                    Booking = json[0].Booking;
                                    //Viaje = json[0].Viaje;
                                    Naviera = json[0].Naviera;
                                    Nave = json[0].Nave;
                                    Exportador = json[0].Exportador;
                                    Etd = etd;
                                    //Consignatario = json[0].Consignatario;
                                    Setpoint = json[0].Setpoint;
                                    Commodity = json[0].Commodity;
                                    PuertoOrigen = json[0].PuertoOrigen;
                                    PuertoDestino = json[0].PuertoDestino;
                                    CantidadCO2 = json[0].CO2;
                                    CantidadO2 = json[0].O2;
                                    CommodityTecnica = json[0].CommodityTecnica;
                                    TemperaturaReserva = json[0].Temperatura;
                                }
                            });

                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("GetResultadoLeaktestByIdContenedor", "Leaktest")',
                                data: { IdContenedor: IdContenedor },
                                async: false,
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    var text = "";
                                    var aux = "";
                                    var largo = 0;
                                    var cuenta = 0;
                                    cuenta = json.length;

                                    TiempoEstanquedad = json[0].Tiempo;
                                    TecnicoLeaktest = json[0].Tecnico;
                                }
                            });

                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("CrearServicio2", "Reservas")',
                                async: false,
                                data: {
                                    IdReserva: getParameterByName("Id"),
                                    Consignatario: Consignatario,
                                    Viaje: Viaje,
                                    PuertoOrigen: IdPuertoOrigen,
                                    PuertoDestino: IdPuertoDestino,
                                    Nave1: Nave1,
                                    Nave2: Nave2,
                                    Nave3: Nave3,
                                    Contenedor: IdContenedor,
                                    Eta: Eta,
                                    FechaCortina: FechaCortina,
                                    TipoLugarCortina: TLCortina,
                                    LugarCortina: LugarCortina,
                                    Purafil: Purafil,
                                    Controlador: IdControlador,
                                    Bateria: Bateria,
                                    HoraLlegada: HoraInicioServicio,
                                    HoraSalida: HoraTerminoServicio,
                                    FechaInstContr: FechaServicio,
                                    TipoLugarInstContr: TLInstContr,
                                    LugarInstContr: LugarInstContr,
                                    TecnicoInstalador: TecnicoInstalador,
                                    TemperaturaContenedor: Temperatura,
                                    Folio: Folio,
                                    Precinto: Precinto,
                                    Candado: Candado,
                                    FechaGasificacion: FechaGasificacion,
                                    TipoLugarGasificacion: TLGasificacion,
                                    LugarGasificacion: LugarGasificacion,
                                    TecnicoGasificador: TecnicoGasificador,
                                    TipoTratamientoCO2: TipoTratamientoCO2,
                                    Scrubber: Scrubber,
                                    Cal: Cal,
                                    CortinaInstalada: CortinaInstalada,
                                    Gasificado: Gasificado,
                                    EstadoServicio: EstadoServicio,
                                    UltimaNave: UltimaNave,
                                    UltimoControlador: UltimoControlador,
                                    Habilitado: Habilitado,
                                    InstaladorCortina: InstaladorCortina,
                                    NotaServicio: NotaServicio,
                                    NotaLogistica: NotaLogistica,
                                    Selloperno1: $("#Selloperno1Agregar").val(),
                                    Selloperno2: $("#Selloperno2Agregar").val(),
                                    Sellotapa: $("#SellotapaAgregar").val(),
                                    SelloPanel1: $("#SelloPanel1_servicio").val(),
                                    SelloPanel2: $("#SelloPanel2_servicio").val(),
                                    SelloSecurity: $("#SelloSecurity_servicio").val(),
                                    ObservacionSellos: $("#ObservacionSellosTextoAgregar").val()
                                },
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    var text = "";
                                    var aux = "";
                                    var largo = 0;
                                    var cuenta = 0;
                                    cuenta = json.length;
                                    IdServicio = json[0].Id;

                                    if (FechaServicio == "") {
                                        var FechaServicio2 = "";
                                    } else {
                                        var datearray = FechaServicio.split("-");
                                        var FechaServicio2 = datearray[0] + '/' + datearray[1] + '/' + datearray[2];
                                    }
                                    if (Etd == "") {
                                        Etd2 = "";
                                    } else {
                                        var datearray = Etd.split("-");
                                        var Etd2 = datearray[1] + '-' + datearray[0] + '-' + datearray[2];
                                    }
                                    if (Eta == "") {
                                        Eta2 = "";
                                    } else {
                                        var datearray = Eta.split("-");
                                        var Eta2 = datearray[1] + '-' + datearray[0] + '-' + datearray[2];
                                    }



                                    swal({
                                        title: '',
                                        text: 'Operacion Realizada Correctamente',
                                        type: 'success',
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        var url = '@Url.Action("ExportarServiceReport", "Reservas")?setpoint=' + Setpoint + "&cortina=" + Cortina + "&co2Real=" + CO2Real + "&o2Real=" + O2Real + "&bateria=" + Bateria + "&contenedor=" + Contenedor + "&controlador=" + Controlador + "&exportador=" + Exportador + "&consignatario=" + Consignatario + "&puertoDestino=" + PuertoDestino + "&packing=" + Packing + "&PuertoOrigen=" + PuertoOrigen + "&horaInicioServicio=" + HoraInicioServicio + "&horaTerminoServicio=" + HoraTerminoServicio + "&tecnicoServicio=" + TecnicoServicio + "&commodity=" + Commodity + "&etd=" + Etd2 + "&eta=" + Eta2 + "&booking=" + Booking + "&naviera=" + Naviera + "&nave=" + Nave + "&viaje=" + Viaje + "&candado=" + Candado + "&scrubber_si=" + ScrubberSi + "&scrubber_no=" + ScrubberNo + "&fechaServicio=" + FechaServicio2 + "&tecnico_leaktest=" + TecnicoLeaktest + "&tiempo_estanquedad=" + TiempoEstanquedad + "&sello_perno1=" + SelloPerno1 + "&sello_perno2=" + SelloPerno2 + "&sello_tapa=" + SelloTapa + "&sello_panel1=" + SelloPanel1 + "&sello_panel2=" + SelloPanel2 + "&sello_security=" + SelloSecurity + "&temperatura=" + Temperatura + "&id_servicio=" + IdServicio + "&cantidad_O2=" + CantidadO2 + "&cantidad_CO2=" + CantidadCO2 + "&commodity_tecnica=" + CommodityTecnica + "&comentario_sello=" + ComentarioSello + "&temperatura_reserva=" + TemperaturaReserva;
                                        window.location.href = url;
                                        setInterval(function(){
                                        },5000);
                                        location.reload();
                                    })
                                }
                            });
                                } else {
                                    var aux = 'warning';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        //location.reload();
                                    })
                                }

                            }
                        });

                    } else {
                        var aux = 'warning';
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            //NO SE PUEDE UTILIZAR ESE CONTROLADOR
                        })
                    }
                }
            });
        }

    }

    function ExportarServiceReportEditar() {


        var Nave1 = $("#Nave_editar").val();
        var Nave2 = $("#Nave_editar2").val();
        var Nave3 = $("#Nave_editar3").val();
        var Contenedor = $("#Contenedor_editar option:selected").text();
        var IdContenedor = $("#Contenedor_editar").val();
        var Controlador = $("#Controlador_editar").val();
        var IdControlador = $("#Controlador_editar").val();
        var FechaServicio = $("#Fecha_servicio_editar").val();
        var Setpoint = "";
        var Cortina = "";
        var ScrubberSi = "";
        var ScrubberNo = "";
        var CO2Real = parseInt($("#CO2_editar").val());
        var O2Real = parseInt($("#N2_editar").val());
        var Bateria = $("#Bateria_editar").val();
        var Exportador = "";
        var Consignatario = $("#Consignatario_editar").val();
        var IdPuertoDestino = $("#PuertoDestino_editar").val();
        var PuertoDestino = "";
        var Packing = $("#Lugar_cortina_editar option:selected").text();
        var IdPuertoOrigen = $("#PuertoOrigen_editar").val();
        var PuertoOrigen = "";
        var HoraInicioLeaktest = "";
        var HoraTerminoLeaktest = "";
        var HoraInicioServicio = $("#Hora_llegada_editar").val();
        var HoraTerminoServicio = $("#Hora_salida_editar").val();
        var TecnicoLeaktest = "";
        var TecnicoServicio = $("#Instalador_editar option:selected").text();
        var TecnicoInstalador = $("#Instalador_editar").val();
        var Commodity = "";
        var TipoCommodity = "";
        var Etd = $("#ETD_editar").val();
        var Eta = $("#ETA_editar").val();
        var TemperaturaReserva = 0;
        var Booking = "";
        var Naviera = "";
        var CantidadCO2=0
        var CantidadO2 = 0;
        var CommodityTecnica = "";
        var Nave = $("#Nave_editar option:selected").text();
        var Viaje = $("#Viaje_editar").val();
        var Adhesivo = "";
        var Temperatura = $("#Temperatura_contenedor_editar").val();
        var TiempoEstanquedad = "";
        var Candado = $("#Candado_editar").val();
        var IdReserva = getParameterByName("Id");
        var SelloPerno1 = $("#Selloperno1Editar").val();
        var SelloPerno2 = $("#Selloperno2Editar").val();
        var SelloTapa = $("#SellotapaEditar").val();
        var SelloPanel1 = $("#SelloPanel1_servicio_editar").val();
        var SelloPanel2 = $("#SelloPanel2_servicio_editar").val();
        var SelloSecurity = $("#SelloSecurity_servicio_editar").val();
        var ComentarioSello = $("#ObservacionSellosEditarTexto").val();
        var IdServicio = $("#IdServicio_editar").val();
        var FechaCortina = $("#Fecha_cortina_editar").val();
        var TLCortina = $("#TipoLugar_cortina_editar").val();
        var LugarCortina = $("#Lugar_cortina_editar").val();
        var Purafil = $("#Purafil_editar").val();
        var TLInstContr = $("#TipoLugar_controlador_editar").val();
        var LugarInstContr = $("#Lugar_controlador_editar").val();
        var Folio = $("#Folio_editar").val();
        var Precinto = $("#Precinto_editar").val();
        var FechaGasificacion = $("#Fecha_gasificacion_editar").val();
        var TLGasificacion = $("#TipoLugar_gasificacion_editar").val();
        var LugarGasificacion = $("#Lugar_gasificacion_editar").val();
        var TecnicoGasificador = $("#Gasificador_editar").val();
        var CO2 = $("#CO2_editar").val();
        var N2 = $("#N2_editar").val();
        var TipoTratamientoCO2 = $("#TratamientoCO2_editar").val();
        var Scrubber = $("#Filtros_editar").val();
        var Cal = $("#Cal_editar").val();
        var EstadoServicio = "2";
        var CortinaInstalada = "1";
        var Gasificado = "1";
        var UltimaNave = "";
        var UltimoControlador = $("#Controlador_editar").val();
        var Habilitado = "1";
        var InstaladorCortina = $("#Instalador_cortina_editar").val();
        var NotaServicio = $("#Observaciones_editar").val();
        var NotaLogistica = $("#Observaciones_logistica_editar").val();

        if (Nave3 != "0") {
            UltimaNave = $("#Nave_editar3 option:selected").text();
        } else if (Nave2 != "0") {
            UltimaNave = $("#Nave_editar2 option:selected").text();
        } else {
            UltimaNave = $("#Nave_editar option:selected").text();
        }

        if (Purafil == "") {
            Purafil = "0";
        }

        if (Temperatura == "") {
            Temperatura = "0";
        }

        if (Folio == "") {
            Folio = "0";
        }

        if (Precinto == "") {
            Precinto = "0";
        }

        if (Candado == "") {
            Candado = "0";
        }

        if (CO2 == "") {
            CO2 = "0";
        }

        if (N2 == "") {
            N2 = "0";
        }

        if (Scrubber == "") {
            Scrubber = "0";
        }

        if (Cal == "") {
            Cal = "0";
        }

        if (LugarCortina != "0" && TLCortina != "0") {
            CortinaInstalada = "0";
        } else {
            CortinaInstalada = "1";
        }

        if (LugarGasificacion != "0" && TLGasificacion != "0" && TecnicoGasificador != "0") {
            Gasificado = "0";
        } else {
            Gasificado = "1";
        }

        if ($('#Habilitacion_editar').prop('checked')) {
            Habilitado = "1";
        } else {
            Habilitado = "0";
        }

        if (TipoTratamientoCO2 == "0" || TipoTratamientoCO2 == "1") {
            Scrubber = "0";
            Cal = "0";
        }


        if ($("#Lugar_cortina_editar").val() != "0") {
            Cortina = "x"
        }

        if ($("#TratamientoCO2_editar").val() == "2") {
            ScrubberSi = "x";
        } else {
            ScrubberNo = "x";
        }
        if ($("#Booking_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#PuertoOrigen_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#Viaje_editar").val() == "") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#ETA_editar").val() == "") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#PuertoDestino_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#Contenedor_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#Nave_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalEditar').scrollTop(0);
        } else if ($("#Controlador_editar").val() == "" || $("#Controlador_editar").val() == "0") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Controlador_editar").css("background-color", "rgba(255, 0, 0, 0.4");
            $('#myModalEditar').scrollTop(500);
        } else if ($("#Bateria_editar").val() == "0" || $("#Bateria_editar").val() == "") {
            $("#Booking_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoOrigen_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("#Viaje_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#ETA_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("#Consignatario_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=PuertoDestino_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Contenedor_editar]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave_editar]").css("background", "rgba(255, 0, 0, 0.)");
            $("#Controlador_editar").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=Bateria_editar]").css("background", "rgba(255, 0, 0, 0.4)");
            $('#myModalEditar').scrollTop(500);
        } else {

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarContenedorById", "Controlador")',
                data: { IdContenedor: IdContenedor },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 1 || json.validador == 4) {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarControladorByIdEditar", "Controlador")',
                            data: { IdControlador: IdControlador,
                                    IdServicio: IdServicio},
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador != 5) {

                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("GetReservaByIdServicio", "Reservas")',
                                data: { IdReserva: IdReserva },
                                async: false,
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    var text = "";
                                    var aux = "";
                                    var largo = 0;
                                    var cuenta = 0;
                                    cuenta = json.length;

                                    if (json[0].Etd == null)
                                    {
                                        var etd = "";
                                    } else
                                    {
                                        var etd = json[0].Etd;
                                    }

                                    Booking = json[0].Booking;
                                    //Viaje = json[0].Viaje;
                                    Naviera = json[0].Naviera;
                                    Nave = json[0].Nave;
                                    Exportador = json[0].Exportador;
                                    Etd = etd;
                                    //Consignatario = json[0].Consignatario;
                                    Setpoint = json[0].Setpoint;
                                    Commodity = json[0].Commodity;
                                    PuertoOrigen = json[0].PuertoOrigen;
                                    PuertoDestino = json[0].PuertoDestino;
                                    CantidadCO2 = json[0].CO2;
                                    CantidadO2 = json[0].O2;
                                    CommodityTecnica = json[0].CommodityTecnica;
                                    TemperaturaReserva = json[0].Temperatura;
                                }
                            });

                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("GetResultadoLeaktestByIdContenedor", "Leaktest")',
                                data: { IdContenedor: IdContenedor },
                                async: false,
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    var text = "";
                                    var aux = "";
                                    var largo = 0;
                                    var cuenta = 0;
                                    cuenta = json.length;

                                    TiempoEstanquedad = json[0].Tiempo;
                                    TecnicoLeaktest = json[0].Tecnico;
                                }
                            });
                            
                          
                          
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("EditarServicio", "Reservas")',
                                async: false,
                                data: {
                                    IdServicio: IdServicio,
                                    Consignatario: Consignatario,
                                    Viaje: Viaje,
                                    PuertoOrigen: IdPuertoOrigen,
                                    PuertoDestino: IdPuertoDestino,
                                    Nave1: Nave1,
                                    Nave2: Nave2,
                                    Nave3: Nave3,
                                    Contenedor: IdContenedor,
                                    Eta: Eta,
                                    FechaCortina: FechaCortina,
                                    TipoLugarCortina: TLCortina,
                                    LugarCortina: LugarCortina,
                                    Purafil: Purafil,
                                    Controlador: IdControlador,
                                    Bateria: Bateria,
                                    HoraLlegada: HoraInicioServicio,
                                    HoraSalida: HoraTerminoServicio,
                                    FechaInstContr: FechaServicio,
                                    TipoLugarInstContr: TLInstContr,
                                    LugarInstContr: LugarInstContr,
                                    TecnicoInstalador: TecnicoInstalador,
                                    TemperaturaContenedor: Temperatura,
                                    Folio: Folio,
                                    Precinto: Precinto,
                                    Candado: Candado,
                                    FechaGasificacion: FechaGasificacion,
                                    TipoLugarGasificacion: TLGasificacion,
                                    LugarGasificacion: LugarGasificacion,
                                    TecnicoGasificador: TecnicoGasificador,
                                    TipoTratamientoCO2: TipoTratamientoCO2,
                                    Scrubber: Scrubber,
                                    Cal: Cal,
                                    CortinaInstalada: CortinaInstalada,
                                    Gasificado: Gasificado,
                                    EstadoServicio: EstadoServicio,
                                    UltimaNave: UltimaNave,
                                    UltimoControlador: UltimoControlador,
                                    Habilitado: Habilitado,
                                    InstaladorCortina: InstaladorCortina,
                                    NotaServicio: NotaServicio,
                                    NotaLogistica: NotaLogistica,
                                    Selloperno1: $("#Selloperno1Editar").val(),
                                    Selloperno2: $("#Selloperno2Editar").val(),
                                    Sellotapa: $("#SellotapaEditar").val(),
                                    SelloPanel1: $("#SelloPanel1_servicio_editar").val(),
                                    SelloPanel2: $("#SelloPanel2_servicio_editar").val(),
                                    SelloSecurity: $("#SelloSecurity_servicio_editar").val(),
                                    ObservacionSellosEditar: $("#ObservacionSellosEditarTexto").val(),
                                    Booking: $("#Booking_editar").val()
                                },
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    if (json.validador == 0) {
                                        var aux = 'success';
                                    } else {
                                        var aux = 'warning';
                                    }

                                    var text = "";
                                    var aux = "";

                                    if (FechaServicio == "") {
                                        var FechaServicio2 = "";
                                    } else {
                                        var datearray = FechaServicio.split("-");
                                        var FechaServicio2 = datearray[0] + '/' + datearray[1] + '/' + datearray[2];
                                    }

                                    if (Etd == "") {
                                        Etd2 = "";
                                    } else {
                                        var datearray = Etd.split("-");
                                        var Etd2 = datearray[1] + '-' + datearray[0] + '-' + datearray[2];
                                    }

                                    if (Eta == "") {
                                        Eta2 = "";
                                    } else {
                                        var datearray = Eta.split("-");
                                        var Eta2 = datearray[1] + '-' + datearray[0] + '-' + datearray[2];
                                    }

                                   var url = '@Url.Action("ExportarServiceReport", "Reservas")?setpoint=' + Setpoint + "&cortina=" + Cortina + "&co2Real=" + CO2Real + "&o2Real=" + O2Real + "&bateria=" + Bateria + "&contenedor=" + Contenedor + "&controlador=" + Controlador + "&exportador=" + Exportador + "&consignatario=" + Consignatario + "&puertoDestino=" + PuertoDestino + "&packing=" + Packing + "&PuertoOrigen=" + PuertoOrigen + "&horaInicioServicio=" + HoraInicioServicio + "&horaTerminoServicio=" + HoraTerminoServicio + "&tecnicoServicio=" + TecnicoServicio + "&commodity=" + Commodity + "&etd=" + Etd2 + "&eta=" + Eta2 + "&booking=" + Booking + "&naviera=" + Naviera + "&nave=" + Nave + "&viaje=" + Viaje + "&candado=" + Candado + "&scrubber_si=" + ScrubberSi + "&scrubber_no=" + ScrubberNo + "&fechaServicio=" + FechaServicio2 + "&tecnico_leaktest=" + TecnicoLeaktest + "&tiempo_estanquedad=" + TiempoEstanquedad + "&sello_perno1=" + SelloPerno1 + "&sello_perno2=" + SelloPerno2 + "&sello_tapa=" + SelloTapa + "&sello_panel1=" + SelloPanel1 + "&sello_panel2=" + SelloPanel2 + "&sello_security=" + SelloSecurity + "&temperatura=" + Temperatura + "&id_servicio=" + IdServicio + "&cantidad_O2=" + CantidadO2 + "&cantidad_CO2=" + CantidadCO2 + "&commodity_tecnica=" + CommodityTecnica + "&comentario_sello=" + ComentarioSello + "&temperatura_reserva=" + TemperaturaReserva;
                                   window.location.href = url;
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {

                                        location.reload();
                                    })
                                }
                            });
                                } else {
                                    var aux = 'warning';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        //NO SE PUEDE UTILIZAR ESE CONTROLADOR
                                        //location.reload();
                                    })
                                }

                            }
                        });

                    } else {
                        var aux = 'warning';
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            //NO SE PUEDE UTILIZAR ESE CONTENEDOR
                        })
                    }
                }
            });
        }

    }



    $("#Cancelar").click(function () {
        //enviar datos para agregar Naviera
        if ($("#IdServicio").val() != "") {
            if ($("#Estado").val() != "CANCELLED") {
                    swal({
                        title: '<span class="alerta" key="titulocancelar">Estás Seguro de Cancelar el servicio?</span>',
                        type: 'warning',
                        html:
                        '<div>' +
                            '<label class="control-label alerta" key="motivocancelar"></label>' +
                            '<div>' +
                                '<input type="text" name="Motivo" id="Motivo" class="form-control col-md-7 col-xs-12">' +
                            '</div>' +
                        '</div>',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: '<span class="alerta" key="cancelarresereva">Si, Cancelar!</span>'
                    }).then((result) => {
                        if ($("#Motivo").val() != "") {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("CancelarServicio", "Reservas")',
                                data: { IdServicio: $("#IdServicio").val(), Motivo: $("#Motivo").val() },
                                success: function (response) {
                                    var json = JSON.parse(response);
                                    if (json.validador == 0) {
                                        var aux = 'success';
                                    } else {
                                        var aux = 'warning';
                                    }
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {
                                        location.reload();
                                    })
                                }
                            });
                        } else {
                            swal('Ups!', '<span class="alerta" key="errormotivo">Debes indicar el motivo para cancerlar el servicio</span>', 'error');
                        }
                    });
            } else {
                swal('Ups!', '<span class="alerta" key="errorcancelarserviciocancelado">No puede Cancelar un servicio que ya ha sido Cancelado</span>', 'error');
            }
        } else {
            swal('Ups!', '<span class="alerta" key="errorcancelarservicio">Debes seleccionar un servicio para poder cancelarlo</span>', 'error');
        }
    });

    $("#FiltroFechas").click(function () {
        var table = $('#Tb_Servicios').DataTable();
        if ($("#Tipo_busqueda").val() != "0" && $("#Fecha_inicio").val() != "" && $("#Fecha_termino").val() != "") {
            var fechainicio = new Date($('#Fecha_inicio').val()).getTime();
            var fechatermino = new Date($('#Fecha_termino').val()).getTime();
            if (fechatermino < fechainicio) {
                swal('Ups!', 'La fecha final no puede ser menor a la fecha inicial.', 'warning');
                return false;
            }
            table.destroy();
            $.ajax({
                type: "POST",
                url: '@Url.Action("FiltroPorFechasServicio", "Reservas")',
                data: { IdReserva: getParameterByName("Id"), Tipo: $("#Tipo_busqueda").val(), FechaIni: $("#Fecha_inicio").val(), FechaFin: $("#Fecha_termino").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    for (var i = 0 ; i < cuenta ; i++) {
                        var eta = formatDate(json[i].Eta);

                        if (json[i].FechaCortina == null) {
                            var fechaCortina = "";
                        } else {
                            var fechaCortina = formatDate(json[i].FechaCortina);
                        }

                        if (json[i].FechaGasificacion == null) {
                            var fechaGasificacion = "";
                        } else {
                            var fechaGasificacion = formatDate(json[i].FechaGasificacion);
                        }
                        if(@PerfilInterior == 16){
                            if(json[i].EstadoServicio == "ON SERVICE TRIP" || json[i].EstadoServicio == "NOT RECOVERED" || json[i].EstadoServicio == "RECOVERED" ){
                                json[i].EstadoServicio = "ON SERVICE TRIP";
                            }
                            data.push([json[i].Id, json[i].Booking,json[i].Commodity, json[i].Exportador, json[i].Contenedor, eta, json[i].Nave, json[i].Nave2, json[i].Nave3, json[i].UltimoControlador, json[i].EstadoServicio, json[i].N_CortinaInstalada, json[i].N_Gasificado,
                                json[i].N_Validado, fechaCortina, json[i].TipoLugarCortina, json[i].LugarCortina, json[i].Instalador, json[i].CantidadPurafil, fechaGasificacion, json[i].TecnicoGasificador, json[i].TipoLugarGasificacion, json[i].LugarGasificacion,
                                json[i].TratamientoCO2, json[i].Scrubber, json[i].Cal]);
                        }else{
                            data.push([json[i].Id, json[i].Booking,json[i].Commodity, json[i].Exportador, json[i].Contenedor, eta, json[i].Nave, json[i].Nave2, json[i].Nave3, json[i].UltimoControlador, json[i].EstadoServicio, json[i].N_CortinaInstalada, json[i].N_Gasificado,
                                json[i].N_Validado, fechaCortina, json[i].TipoLugarCortina, json[i].LugarCortina, json[i].Instalador, json[i].CantidadPurafil, fechaGasificacion, json[i].TecnicoGasificador, json[i].TipoLugarGasificacion, json[i].LugarGasificacion,
                                json[i].TratamientoCO2, json[i].Scrubber, json[i].Cal]);
                        }
                    }

                    if (lenguaje == "es") {
                        var table = $('#Tb_Servicios').DataTable({
                            data: data,
                            "language": {
                                "lengthMenu": "Mostrar _MENU_ Resultados por pagina",
                                "zeroRecords": "No hay Resultados para mostrar",
                                "info": "Mostrando pagina _PAGE_ de _PAGES_ paginas",
                                "infoEmpty": "No hay Resultados disponibles",
                                "search": "Buscar: ",
                                "paginate": {
                                    "first": "Primera",
                                    "last": "Última",
                                    "next": "Siguiente",
                                    "previous": "Anterior"
                                }
                            },
                            dom: 'Bfrtip',
                            buttons: [
                                'copy', 'csv', 'excel'
                            ],
                            scrollX: true
                        });
                    } else {
                        var table = $('#Tb_Servicios').DataTable({
                            data: data,
                            "language": {
                                "lengthMenu": "Mostrar _MENU_ Resultados por pagina",
                                "zeroRecords": "No hay Resultados para mostrar",
                                "info": "Mostrando pagina _PAGE_ de _PAGES_ paginas",
                                "infoEmpty": "No hay Resultados disponibles",
                                "search": "Buscar: ",
                                "paginate": {
                                    "first": "Primera",
                                    "last": "Última",
                                    "next": "Siguiente",
                                    "previous": "Anterior"
                                }
                            },
                            dom: 'Bfrtip',
                            buttons: [
                                'copy', 'csv', 'excel'
                            ],
                            scrollX: true
                        });
                    }

                    table.columns().every(function () {
                        if(@PerfilInterior == 16){
                            table.columns([2,9,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]).visible(false);
                        }
                        var that = this;
                        $('input', this.footer()).on('keyup change', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }

            });
        } else {
            swal('Ups!', '<span>Debe seleccionar todos los campos para filtrar por fechas.</span>', 'error');
        }

    });

    $("#Contenedor_agregar").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetInfoFiltro", "Contenedores")',
            data: { IdContenedor: $("#Contenedor_agregar").val() },
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                if (cuenta != 0) {
                    for (var i = 0; i < cuenta ; i++) {
                        if (json[i].Controlador != "") {
                            $('#Controlador_agregar').val(json[i].Controlador);
                        } else {
                            $('#Controlador_agregar').val("");
                        }

                        if (json[i].Bateria != "") {
                            $("#Bateria_agregar").val(json[i].Bateria);
                        } else {
                            $("#Bateria_agregar").val("");
                        }

                        if (json[i].Scrubber != 1) {
                            $("#TratamientoCO2_agregar").val(2);
                            $('#TratamientoCO2_agregar').selectpicker('refresh');
                            $("#div_filtros_agregar").show();
                            $("#div_cal_agregar").show();
                        } else {
                            $("#TratamientoCO2_agregar").val(0);
                            $('#TratamientoCO2_agregar').selectpicker('refresh');

                            $("#div_filtros_agregar").hide();
                            $("#div_cal_agregar").hide();
                        }

                        $("#Selloperno1Validar").val(json[i].Selloperno1);
                        $("#Selloperno2Validar").val(json[i].Selloperno2);
                        $("#SellotapaValidar").val(json[i].Sellotapa);
                        $("#Selloperno1Agregar").val(json[i].Selloperno1);
                        $("#Selloperno2Agregar").val(json[i].Selloperno2);
                        $("#SellotapaAgregar").val(json[i].Sellotapa);

                    }
                } else {
                    //$("#Controlador_agregar").val(0);
                    $('#Controlador_agregar').val(0).trigger("chosen:updated");
                    //$('#Controlador_agregar').selectpicker('refresh');

                    $("#Bateria_agregar").val("");

                    $("#TratamientoCO2_agregar").val(0);
                    $('#TratamientoCO2_agregar').selectpicker('refresh');

                    $("#Selloperno1Agregar").val("");
                    $("#Selloperno2Agregar").val("");
                    $("#SellotapaAgregar").val("");

                    $("#div_filtros_agregar").hide();
                    $("#div_cal_agregar").hide();
                }
            },
        });
    });

    $("#Contenedor_editar").change(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetInfoFiltro", "Contenedores")',
            data: { IdContenedor: $("#Contenedor_editar").val() },
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                if (cuenta != 0) {
                    for (var i = 0; i < cuenta ; i++) {
                        if (json[i].Controlador != "") {
                            //$("#Controlador_editar").val(json[i].Controlador);
                            //$('#Controlador_editar').selectpicker('refresh');
                            $('#Controlador_editar').val(json[i].Controlador);
                        } else {
                            $('#Controlador_editar').val("");
                            //$("#Controlador_editar").val(0);
                            //$('#Controlador_editar').selectpicker('refresh');
                        }

                        if (json[i].Bateria != "") {
                            $("#Bateria_editar").val(json[i].Bateria);
                        } else {
                            $("#Bateria_editar").val("");
                        }

                        if (json[i].Scrubber != 1) {
                            $("#TratamientoCO2_editar").val(2);
                            $('#TratamientoCO2_editar').selectpicker('refresh');
                            $("#div_filtros_editar").show();
                            $("#div_cal_editar").show();
                        } else {
                            $("#TratamientoCO2_editar").val(0);
                            $('#TratamientoCO2_editar').selectpicker('refresh');

                            $("#div_filtros_editar").hide();
                            $("#div_cal_editar").hide();
                        }

                        $("#Selloperno1Validar").val(json[i].Selloperno1);
                        $("#Selloperno2Validar").val(json[i].Selloperno2);
                        $("#SellotapaValidar").val(json[i].Sellotapa);
                        $("#Selloperno1Editar").val(json[i].Selloperno1);
                        $("#Selloperno2Editar").val(json[i].Selloperno2);
                        $("#SellotapaEditar").val(json[i].Sellotapa);

                    }
                } else {
                    $("#Controlador_editar").val("");

                    $("#Bateria_editar").val("");

                    $("#TratamientoCO2_editar").val(0);
                    $('#TratamientoCO2_editar').selectpicker('refresh');

                    $("#Selloperno1Editar").val("");
                    $("#Selloperno2Editar").val("");
                    $("#SellotapaEditar").val("");

                    $("#div_filtros_editar").hide();
                    $("#div_cal_editar").hide();
                }
            },
        });
    });

    $("#PuertoOrigen_agregar").change(function () {
        if ($("#PuertoDestino_agregar").val() != "") {
            if ($("#PuertoOrigen_agregar").val() == $("#PuertoDestino_agregar").val()) {
                swal('Ups!', 'Puerto Origen no puede ser igual al Puerto de destino', 'warning');
                $("#PuertoOrigen_agregar").val(0);
                $("#PuertoOrigen_agregar").selectpicker("refresh");
                return false;
            }
        }
    });

    $("#PuertoDestino_agregar").change(function () {
        if ($("#PuertoOrigen_agregar").val() != "") {
            if ($("#PuertoOrigen_agregar").val() == $("#PuertoDestino_agregar").val()) {
                swal('Ups!', 'Puerto Origen no puede ser igual al Puerto de destino', 'warning');
                $("#PuertoDestino_agregar").val(0);
                $("#PuertoDestino_agregar").selectpicker("refresh");
                return false;
            }
        }
    });

    $("#PuertoOrigen_editar").change(function () {
        if ($("#PuertoDestino_editar").val() != "") {
            if ($("#PuertoOrigen_editar").val() == $("#PuertoDestino_editar").val()) {
                swal('Ups!', 'Puerto Origen no puede ser igual al Puerto de destino', 'warning');
                $("#PuertoOrigen_editar").val(0);
                $("#PuertoOrigen_editar").selectpicker("refresh");
                return false;
            }
        }
    });

    $("#PuertoDestino_editar").change(function () {
        if ($("#PuertoOrigen_editar").val() != "") {
            if ($("#PuertoOrigen_editar").val() == $("#PuertoDestino_editar").val()) {
                swal('Ups!', 'Puerto Origen no puede ser igual al Puerto de destino', 'warning');
                $("#PuertoDestino_editar").val(0);
                $("#PuertoDestino_editar").selectpicker("refresh");
                return false;
            }
        }
    });

    $("#Controlador_agregar").blur(function () {
        if ($("#Controlador_agregar").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarControlador", "Controlador")',
                data: { Controlador: $("#Controlador_agregar").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Controlador no existe en los registros</span>', 'warning');
                        $("#Controlador_agregar").val("");
                        return false;
                    } else {
                        swal('Validado!', '<span>Número controlador válido.</span>', 'success');
                    }
                }
            });
        }
    });

    $("#Controlador_editar").blur(function () {
        if ($("#Controlador_editar").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarControlador", "Controlador")',
                data: { Controlador: $("#Controlador_editar").val() },
                success: function (response) {
                    if (response == "0") {
                        swal('Ups!', '<span>Controlador no existe en los registros</span>', 'warning');
                        $("#Controlador_editar").val("");
                        return false;
                    } else {
                        swal('Validado!', '<span>Número controlador válido.</span>', 'success');
                    }
                }
            });
        }
    });

    $("#Booking_editar").blur(function () {
        if ($("#Booking_editar").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarBooking", "Reservas")',
                data: { Booking: $("#Booking_editar").val() },
                success: function (response) {
                    if (response == "0") {
                        swal('Ups!', '<span>Booking no existe en los registros</span>', 'warning');
                        $("#Booking_editar").val("");
                        return false;
                    } else {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarNumServiciosBooking", "Reservas")',
                            data: {
                                Booking: $("#Booking_editar").val()
                            },
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0) {
                                    var aux = 'success';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        confirmButtonColor: '#3085d6',
                                        confirmButtonText: 'Aceptar'
                                    })
                                } else {
                                    var aux = 'warning';
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: aux,
                                        confirmButtonColor: '#3085d6',
                                        confirmButtonText: 'Aceptar'
                                    })
                                }
                            }
                        });
                    }
                }
            });
        }
    });


</script>