@{
    ViewBag.Title = "CrearReservas";
    Layout = "~/Views/MasterPage.cshtml";
    int PerfilInterior = Convert.ToInt32(Session["PerfilInterior"]);
    string Usuario = Session["User"].ToString().ToUpper();
}

<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel">
            <div class="alert alert-info">
                <strong>Información!</strong> Si no existe el viaje debe hacer click en botón crear.
            </div>
        </div>
        <div class="x_panel">
            <div class="x_title">
                <h2>Ingreso de datos de reserva <small></small></h2>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <form id="FormControl" class="form-horizontal">
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Puerto_origen" class="control-label tr" key="puertoorigen">Puerto Embarque (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Puerto_origen">
                                <option value="0" selected class="tr" key="selectpuerto">Seleccione Puerto</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="Puerto_destino" class="control-label tr" key="puertodestino">Puerto Destino (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Puerto_destino" disabled>
                                <option value="0" selected class="tr" key="selectpuerto">Seleccione Puerto</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Viaje" class="control-label tr" key="viaje">Viaje (*)</label>
                        </div>
                        <div class="col-md-4">
                            <div id="DivViaje">
                                <select class="selectpicker form-control" data-live-search="true" id="Viaje" disabled>
                                    <option value="0" selected class="tr" key="selectViaje">Seleccione Viaje</option>
                                </select>
                            </div>
                            <div style="display:none;" id="DivViaje1">
                                <input type="text" id="Viaje1" class="form-control" onkeyup="this.value = this.value.toUpperCase();">
                            </div>
                        </div>
                        <div class="col-md-4 col-md-offset-2">
                            <button class="btn btn-success tr" type="button" id="BuscarViaje">Crear</button>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Nave" class="control-label tr" key="nave">Nave (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Nave" disabled="disabled">
                                <option value="0" selected class="tr" key="selectnave">Seleccione Nave</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="EtaNave" class="control-label">ETA Nave (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="EtaNave" class="form-control" autocomplete="off" disabled>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Inicio_stacking" class="control-label tr" key="iniciostacking">Inicio Stacking (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Inicio_stacking" class="form-control" autocomplete="off" disabled>
                        </div>
                        <div class="col-md-2">
                            <label for="Termino_stacking" class="control-label tr" key="terminostacking">Termino Stacking (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Termino_stacking" class="form-control" autocomplete="off" disabled>
                        </div>

                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Etd" class="control-label">ETD Nave(*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Etd" class="form-control" autocomplete="off" disabled>
                        </div>
                        <div class="col-md-2">
                            <label for="Eta" class="control-label">ETA POD (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Eta" class="form-control" autocomplete="off" disabled>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Booking" class="control-label">Booking (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Booking" class="form-control" onkeyup="this.value = this.value.toUpperCase();">
                        </div>
                        <div class="col-md-2">
                            <label for="Pais_exportador" class="control-label tr" key="paisexportador">País Exportador</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Pais_exportador">
                                <option value="0" selected class="tr" key="selectpais">Seleccione País Exportador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Naviera" class="control-label tr" key="naviera">Naviera (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Naviera">
                                <option value="0" selected class="tr" key="selectnaviera">Seleccione Naviera</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="Exportador" class="control-label tr" key="exportador">Exportador (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Exportador">
                                <option value="2017" selected class="tr" key="selectexportador">Seleccione Exportador</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="FreightForwarder" class="control-label">Freight Forwarder (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="FreightForwarder">
                                <option value="0" selected class="tr" key="selectfreightforwarder">Seleccione FreightForwarder</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="Consignatario" class="control-label tr" key="consignatario">Consignatario</label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" id="Consignatario" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                        @*<div class="col-md-2">
                                <label for="Pais_destino" class="control-label tr" key="paispuertodestino">País Puerto Destino</label>
                            </div>
                            <div class="col-md-4">
                                <select class="selectpicker form-control" data-live-search="true" id="Pais_destino">
                                    <option value="0" selected class="tr" key="selectpais">Seleccione País</option>
                                </select>
                            </div>*@
                    </div>
                    <div class="form-group row">

                        @*<div class="col-md-2">
                                <label for="Ciudad_destino" class="control-label tr" key="ciudadpuertodestino">Ciudad Puerto Destino</label>
                            </div>
                            <div class="col-md-4">
                                <select class="selectpicker form-control" data-live-search="true" id="Ciudad_destino">
                                    <option value="0" selected class="tr" key="selectciudad">Seleccione Ciudad</option>
                                </select>
                            </div>*@
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Commodity" class="control-label">Commodity (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Commodity">
                                <option value="0" selected class="tr" key="selectcommodity">Seleccione Commodity</option>
                            </select>
                        </div>
                        <div id="ObligatorioCommodity" style="display:none;">
                            <span style="color:red;" class="form-control">Campo Obligatorio</span>
                        </div>
                        <div class="col-md-2">
                            <label for="Temperatura" class="control-label tr" key="Temperatura">Temperatura (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" step="0.1" id="Temperatura" class="form-control" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="Setpoint" class="control-label">Set Point (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Setpoint">
                                <option value="0" selected class="tr" key="selectsetpoint">Seleccione Set Point</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="Cantidad_servicios" class="control-label tr" key="cantidadservicios">Cantidad Servicios (*)</label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" max="100" id="Cantidad_servicios" class="form-control">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-md-2">
                            <label for="ServiceProvider" class="control-label tr">Service Provider (*)</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="ServiceProvider">
                                <option value="0" selected class="tr" key="selectpais">Seleccione Service Provicer</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label for="Deposito" class="control-label tr">Depósito</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="Deposito">
                                <option value="0" selected class="tr" key="selectdeposito">Seleccione un Depósito</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row" hidden="hidden">
                        <div class="col-md-2">
                            <label for="LlevaModem" class="control-label tr">Servicio con Modem</label>
                        </div>
                        <div class="col-md-4">
                            <select class="selectpicker form-control" data-live-search="true" id="LlevaModem">
                                <option value="0" selected class="tr" key="selectno">NO</option>
                                <option value="1" class="tr" key="selectsi">SI</option>
                            </select>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="form-group row">
                        <div class="col-md-12 col-sm-12 col-xs-12" style="text-align:center">
                            <button type="button" class="btn btn-success tr" key="botonguardarservicio" onclick="CrearReservaServicio()">Guardar</button>
                            @Html.Hidden("RedirectTo", Url.Action("GestionarServicios", "Reservas"));
                            <button class="btn btn-warning tr" key="limpiar" type="reset">Limpiar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="~/build/js/Perfiles.js"></script>
<script type="text/javascript">

    $(document).ready(function () {

        $('#Setpoint').selectpicker().attr('disabled',true);
        localStorage.setItem("CrearViaje", 1);
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesActivos", "Paises")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";

                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                }
                $('#Pais_exportador').append(optionsAsString);
                $('#Pais_exportador').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPuertos", "Puertos")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad +  "</option>";
                    }
                }

                $('#Puerto_origen').append(optionsAsString);
                $('#Puerto_origen').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetExportadorActivos", "Exportador")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";

                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id_Exportador!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id_Exportador + "'>" + json[i].NombreExportador + " - " + json[i].NombrePais + "</option>";
                    }
                }

                $('#Exportador').append(optionsAsString);
                $('#Exportador').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNavierasActivas", "Naviera")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                }
                $('#Naviera').append(optionsAsString);
                $('#Naviera').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNaves", "Nave")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = ""
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].IdNave!=0)
                    {
                        optionsAsString += "<option value='" + json[i].IdNave + "'>" + json[i].NombreNave + "</option>";
                    }
                }
                $('#Nave').append(optionsAsString);
                $('#Nave').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCommodity", "Commoditie")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                }
                $('#Commodity').append(optionsAsString);
                $('#Commodity').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetFreightForwarderActivos", "FreightForwarder")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id_FreightForwarder!=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id_FreightForwarder + "'>" + json[i].NombreFreightForwarder + "</option>";
                    }
                }
                $('#FreightForwarder').append(optionsAsString);
                $('#FreightForwarder').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].IdServiceProvider!=0)
                    {
                        optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                    }
                }
                $('#ServiceProvider').append(optionsAsString);
                $('#ServiceProvider').selectpicker('refresh');
            },
        });

        //OBTENER DEPOSITOS
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetDepositosActivos", "Deposito")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                if (cuenta != 0) {
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                    }
                    $('#Deposito').append(optionsAsString);
                    $('#Deposito').selectpicker('refresh');
                }
            },
        });
        //OBTENER DEPOSITOS


        $("#Inicio_stacking").change(function () {
            if($("#Termino_stacking").val()!=""){
                var diainicio = $("#Inicio_stacking").val().substring(0, 2);
                var mesinicio = $("#Inicio_stacking").val().substring(3, 5);
                var anoinicio = $("#Inicio_stacking").val().substring(6, 10);
                var diatermino = $("#Termino_stacking").val().substring(0, 2);
                var mestermino = $("#Termino_stacking").val().substring(3, 5);
                var anotermino = $("#Termino_stacking").val().substring(6, 10);
                var inicio = new Date(mesinicio + "/" + diainicio + "/" + anoinicio);
                var termino = new Date(mestermino + "/" + diatermino + "/" + anotermino);
                if (termino.getTime() < inicio.getTime())
                {
                    swal('Ups!', 'Fecha Inicio de Stacking debe ser menor a la fecha Termino Stacking', 'error');
                }
            }
        });

        $("#Termino_stacking").change(function () {
            if ($("#Inicio_stacking").val() != "") {
                var diainicio = $("#Inicio_stacking").val().substring(0, 2);
                var mesinicio = $("#Inicio_stacking").val().substring(3, 5);
                var anoinicio = $("#Inicio_stacking").val().substring(6, 10);
                var diatermino = $("#Termino_stacking").val().substring(0, 2);
                var mestermino = $("#Termino_stacking").val().substring(3, 5);
                var anotermino = $("#Termino_stacking").val().substring(6, 10);
                var inicio = new Date(mesinicio + "/" + diainicio + "/" + anoinicio);
                var termino = new Date(mestermino + "/" + diatermino + "/" + anotermino);
                if (termino.getTime() < inicio.getTime()) {
                    swal('Ups!', 'Fecha Termino de Stacking debe ser mayor a la fecha Inicio Stacking', 'warning');
                }
            }
        });

        $("#Etd").change(function () {
            if ($("#Eta").val() != "") {
                var diaetd = $("#Etd").val().substring(0, 2);
                var mesetd = $("#Etd").val().substring(3, 5);
                var anoetd = $("#Etd").val().substring(6, 10);
                var diaeta = $("#Eta").val().substring(0, 2);
                var meseta = $("#Eta").val().substring(3, 5);
                var anoeta = $("#Eta").val().substring(6, 10);
                var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
                var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
                if (eta.getTime() < etd.getTime()) {
                    swal('Ups!', 'ETD debe ser menor al ETA', 'warning');
                    return false;
                }
            }

            if ($("#EtaNave").val() != "") {
                var diaetd = $("#Etd").val().substring(0, 2);
                var mesetd = $("#Etd").val().substring(3, 5);
                var anoetd = $("#Etd").val().substring(6, 10);
                var diaeta = $("#EtaNave").val().substring(0, 2);
                var meseta = $("#EtaNave").val().substring(3, 5);
                var anoeta = $("#EtaNave").val().substring(6, 10);
                var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
                var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
                if (eta.getTime() > etd.getTime()) {
                    swal('Ups!', 'ETD debe ser mayor al ETA de la Nave', 'warning');
                    return false;
                }
            }

        });

        $("#Eta").change(function () {
            if ($("#Etd").val() != "") {
                var diaetd = $("#Etd").val().substring(0, 2);
                var mesetd = $("#Etd").val().substring(3, 5);
                var anoetd = $("#Etd").val().substring(6, 10);
                var diaeta = $("#Eta").val().substring(0, 2);
                var meseta = $("#Eta").val().substring(3, 5);
                var anoeta = $("#Eta").val().substring(6, 10);
                var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
                var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
                if (eta.getTime() < etd.getTime()) {
                    swal('Ups!', 'ETA debe ser mayor al ETD', 'warning');
                }
            }
        });

        $("#EtaNave").change(function () {
            if ($("#Etd").val() != "") {
                var diaetd = $("#Etd").val().substring(0, 2);
                var mesetd = $("#Etd").val().substring(3, 5);
                var anoetd = $("#Etd").val().substring(6, 10);
                var diaeta = $("#EtaNave").val().substring(0, 2);
                var meseta = $("#EtaNave").val().substring(3, 5);
                var anoeta = $("#EtaNave").val().substring(6, 10);
                var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
                var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
                if (eta.getTime() > etd.getTime()) {
                    swal('Ups!', 'ETA Nave debe ser menor al ETD', 'warning');
                }
            }
        });



        $("#Pais_exportador").change(function () {
            if ($("#Pais_exportador").val() != "0") {
                $('#Exportador').empty();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetExportadorPais", "Exportador")',
                    data: { IdPais: $("#Pais_exportador").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id_Exportador + "'>" + json[i].NombreExportador + " - " + json[i].NombrePais + "</option>";
                        }
                        $('#Exportador').append(optionsAsString);
                        $('#Exportador').selectpicker('refresh');
                    },
                });
            } else {
                $('#Exportador').empty();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetExportadorActivos", "Exportador")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        optionsAsString += "<option value='0'>Seleccione un Exportador</option>";

                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id_Exportador + "'>" + json[i].NombreExportador + " - " + json[i].NombrePais + "</option>";
                        }

                        $('#Exportador').append(optionsAsString);
                        $('#Exportador').selectpicker('refresh');
                    },
                });
            }
        });

        $("#Puerto_origen").change(function () {
            if ($("#Puerto_destino").val() != "") {
                if ($("#Puerto_origen").val() == $("#Puerto_destino").val()) {
                    swal('Ups!', 'Puerto Origen no puede ser igual al Puerto de destino', 'warning');
                    $("#Puerto_origen").val(0);
                    $("#Puerto_origen").selectpicker("refresh");
                    return false;
                }else{
                    if(localStorage.getItem("CrearViaje") == 1){
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetDestinosViaje", "Puertos")',
                            data: { IdPuertoOrigen: $("#Puerto_origen").val() },
                            success: function (response) {
                                var data = [];
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                $('#Puerto_destino').empty();
                                var optionsAsString = ""
                                optionsAsString += "<option value = 0 > Seleccione Puerto </option>";
                                if (cuenta != 0) {
                                    for (var i = 0; i < cuenta; i++) {
                                        if(json[i].Id != 0)
                                        {
                                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                                        }
                                    }
                                    $('#Puerto_destino').append(optionsAsString);
                                    $('#Puerto_destino').prop( "disabled", false );
                                    $('#Puerto_destino').selectpicker('refresh');
                                }else{
                                    $('#Puerto_destino').prop( "disabled", true );
                                    $('#Puerto_destino').selectpicker('refresh');
                                    $('#Viaje').prop( "disabled", true );
                                    $('#Viaje').selectpicker('refresh');
                                }
                            },
                        });
                    }else{
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetPuertos", "Puertos")',
                            success: function (response) {
                                var data = [];
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                var optionsAsString = "";
                                for (var i = 0; i < cuenta; i++) {
                                    if(json[i].Id!=0)
                                    {
                                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad +  "</option>";
                                    }
                                }

                                $('#Puerto_destino').append(optionsAsString);
                                $('#Puerto_destino').prop( "disabled", false );
                                $('#Puerto_destino').selectpicker('refresh');
                            },
                        });
                    }
                }
            }
        });

        $("#Puerto_destino").change(function () {
            if ($("#Puerto_origen").val() != "") {
                if ($("#Puerto_origen").val() == $("#Puerto_destino").val()) {
                    swal('Ups!', 'Puerto Destino no puede ser igual al Puerto de Origen', 'warning');
                    $("#Puerto_destino").val(0);
                    $("#Puerto_destino").selectpicker("refresh");
                    return false;
                }else{
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetViajesPuertos", "Viaje")',
                        data: { IdPuertoOrigen: $("#Puerto_origen").val(),
                                IdPuertoDestino: $("#Puerto_destino").val()
                              },
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#Viaje').empty();
                            var optionsAsString = ""
                            optionsAsString = "<option value = 0 > Seleccione Viaje </option>";
                            if (cuenta != 0) {
                                for (var i = 0; i < cuenta; i++) {
                                    if(json[i].Id != 0)
                                    {
                                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].NumeroViaje + "</option>";
                                    }
                                }
                                $('#Viaje').append(optionsAsString);
                                $('#Viaje').prop( "disabled", false );
                                $('#Viaje').selectpicker('refresh');
                            }else{
                                $('#Viaje').prop( "disabled", true );
                                $('#Viaje').selectpicker('refresh');
                            }
                        },
                    });
                }
            }
        });

        $("#Exportador").change(function () {
            if ($("#Exportador").val() != "0") {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetInfoExportador", "Exportador")',
                    data: { IdExportador: $("#Exportador").val() },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        if (cuenta != 0) {
                            $("#Exportador").val(json[0].Id_Exportador);
                            $("#Exportador").selectpicker('refresh');
                            $("#Pais_exportador").val(json[0].IdPais);
                            $("#Pais_exportador").selectpicker('refresh');

                        }
                    },
                });
            }
        });
});


    function CrearReservaServicio() {

        if ($("#Booking").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Naviera").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }

        else if ($("#Exportador").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=FreightForwarder]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }
        else if ($("#FreightForwarder").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=FreightForwarder]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }

        else if ($("#Nave").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }else if ($("#Exportador").val() == "0" || $("#Exportador").val() == null) {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Commodity").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Setpoint").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Puerto_origen").val() == "0" || $("#Puerto_origen").val() == null) {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Puerto_destino").val() == "0" || $("#Puerto_destino").val() == null) {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Etd").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#EtaNave").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }else if ($("#Inicio_stacking").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }else if ($("#Termino_stacking").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        }else if ($("#Eta").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Cantidad_servicios").val() <= 0 || $("#Cantidad_servicios").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0.4");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
        } else if ($("#Viaje").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0.4");
        } else if ($("#Temperatura").val() == "") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
            $("#Temperatura").css("background-color", "rgba(255, 0, 0, 0.4");
        } else if ($("#ServiceProvider").val() == "0") {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
            $("#Temperatura").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=ServiceProvider]").css("background", "rgba(255, 0, 0, 0.4)");
        } else {
            $("#Booking").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Naviera]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Nave]").css("background", "rgba(255, 0, 0, 0)");
            $("button[data-id=Exportador]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Commodity]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Setpoint]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_origen]").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=Puerto_destino]").css("background-color", "rgba(255, 0, 0, 0)");
            $("#EtaNave").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Etd").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Inicio_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Termino_stacking").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Eta").css("background-color", "rgba(255, 0, 0, 0)");
            $("#Cantidad_servicios").css("background-color", "rgba(255, 0, 0, 0");
            $("#Viaje").css("background-color", "rgba(255, 0, 0, 0");
            $("#Temperatura").css("background-color", "rgba(255, 0, 0, 0");
            $("button[data-id=ServiceProvider]").css("background", "rgba(255, 0, 0, 0)");

            var inicioStacking = $("#Inicio_stacking").val();
            var etd = $("#Etd").val();
            var terminoStacking = $("#Termino_stacking").val();

            if (@PerfilInterior == 1019)
            {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("AgregarReservaSP", "Reservas")',
                    data: {
                        Booking: $("#Booking").val(),
                        IdNaviera: $("#Naviera").val(),
                        IdExportador: $("#Exportador").val(),
                        IdCommodity: $("#Commodity").val(),
                        IdPuertoOrigen: $("#Puerto_origen").val(),
                        IdPuertoDestino: $("#Puerto_destino").val(),
                        IdNave: $("#Nave").val(),
                        IdSetpoint: $("#Setpoint").val(),
                        Viaje: $("#Viaje").val(),
                        CantServicios: $("#Cantidad_servicios").val(),
                        Temperatura: $("#Temperatura").val(),
                        Etd: $("#Etd").val(),
                        IdServiceProvider: $("#ServiceProvider").val(),
                        FechaIniStacking: $("#Inicio_stacking").val(),
                        FechaFinStacking: $("#Termino_stacking").val(),
                        EtaNave: $("#EtaNave").val(),
                        Eta: $("#Eta").val(),
                        Consignatario: $("#Consignatario").val(),
                        IdFreightForwarder: $("#FreightForwarder").val()
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload('../Reservas/GestionarServiciosSP');
                        })
                    }
                });
            } else
            {
                if($("#DivViaje").is(":visible")){
                    var viaje = $("#Viaje :selected").text();
                }else{
                    var viaje = $("#Viaje1").val();
                }
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("AgregarReserva", "Reservas")',
                    data: {
                        Booking: $("#Booking").val(),
                        IdNaviera: $("#Naviera").val(),
                        IdExportador: $("#Exportador").val(),
                        IdCommodity: $("#Commodity").val(),
                        IdPuertoOrigen: $("#Puerto_origen").val(),
                        IdPuertoDestino: $("#Puerto_destino").val(),
                        IdNave: $("#Nave").val(),
                        IdSetpoint: $("#Setpoint").val(),
                        Viaje: viaje,
                        CantServicios: $("#Cantidad_servicios").val(),
                        Temperatura: $("#Temperatura").val(),
                        Etd: $("#Etd").val(),
                        IdServiceProvider: $("#ServiceProvider").val(),
                        FechaIniStacking: $("#Inicio_stacking").val(),
                        FechaFinStacking: $("#Termino_stacking").val(),
                        EtaNave: $("#EtaNave").val(),
                        Eta: $("#Eta").val(),
                        Consignatario: $("#Consignatario").val(),
                        IdFreightForwarder: $("#FreightForwarder").val(),
                        Deposito: $("#Deposito").val(),
                        LlevaModem: $("#LlevaModem").val(),
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            }
        }
    }

    $(function () {
        $("#Eta,#EtaNave, #Etd,#Inicio_stacking,#Termino_stacking").datepicker({
            dateFormat: "dd/mm/yy",
            firstDay: 1,
            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
            monthNames:
                ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort:
                ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
            showWeek: true
        });
    });

    $("#Cantidad_servicios").keyup(function () {
        if ($("#Cantidad_servicios").val() <= 0) {
            swal('Ups!', 'Cantidad de servicios debe ser mayor a 0', 'warning');
            $("#Cantidad_servicios").val("");
            return false;
        }
    });

    $("#Booking").blur(function () {
        if ($("#Booking").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarNumeroBooking", "Reservas")',
                data: { Booking: $("#Booking").val() },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 0) {
                        var aux = 'success';

                    } else {
                        var aux = 'warning';
                        $("#Booking").val("");
                    }
                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {

                    })
                },
            });
        }
    });

    $("#Inicio_stacking").change(function () {
        if ($("#Termino_stacking").val() != "") {
            var diainicio = $("#Inicio_stacking").val().substring(0, 2);
            var mesinicio = $("#Inicio_stacking").val().substring(3, 5);
            var anoinicio = $("#Inicio_stacking").val().substring(6, 10);
            var diatermino = $("#Termino_stacking").val().substring(0, 2);
            var mestermino = $("#Termino_stacking").val().substring(3, 5);
            var anotermino = $("#Termino_stacking").val().substring(6, 10);
            var inicio = new Date(mesinicio + "/" + diainicio + "/" + anoinicio);
            var termino = new Date(mestermino + "/" + diatermino + "/" + anotermino);
            if (termino.getTime() < inicio.getTime()) {
                swal('Ups!', 'Fecha Inicio de Stacking debe ser menor a la fecha Termino Stacking', 'warning');
                $("#Inicio_stacking").val("");
                return false;
            }
        }
    });

    $("#Termino_stacking").change(function () {
        if ($("#Inicio_stacking").val() != "") {
            var diainicio = $("#Inicio_stacking").val().substring(0, 2);
            var mesinicio = $("#Inicio_stacking").val().substring(3, 5);
            var anoinicio = $("#Inicio_stacking").val().substring(6, 10);
            var diatermino = $("#Termino_stacking").val().substring(0, 2);
            var mestermino = $("#Termino_stacking").val().substring(3, 5);
            var anotermino = $("#Termino_stacking").val().substring(6, 10);
            var inicio = new Date(mesinicio + "/" + diainicio + "/" + anoinicio);
            var termino = new Date(mestermino + "/" + diatermino + "/" + anotermino);
            if (termino.getTime() < inicio.getTime()) {
                swal('Ups!', 'Fecha Termino de Stacking debe ser mayor a la fecha Inicio Stacking', 'warning');
                $("#Termino_stacking").val("");
                return false;
            }
        }
    });

    $("#Etd").change(function () {
        if ($("#Eta").val() != "") {
            var diaetd = $("#Etd").val().substring(0, 2);
            var mesetd = $("#Etd").val().substring(3, 5);
            var anoetd = $("#Etd").val().substring(6, 10);
            var diaeta = $("#Eta").val().substring(0, 2);
            var meseta = $("#Eta").val().substring(3, 5);
            var anoeta = $("#Eta").val().substring(6, 10);
            var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
            var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
            if (eta.getTime() < etd.getTime()) {
                swal('Ups!', 'ETD debe ser menor al ETA', 'warning');
                $("#Etd").val("");
                return false;
            }
        }
    });

    $("#Eta").change(function () {
        if ($("#Etd").val() != "") {
            var diaetd = $("#Etd").val().substring(0, 2);
            var mesetd = $("#Etd").val().substring(3, 5);
            var anoetd = $("#Etd").val().substring(6, 10);
            var diaeta = $("#Eta").val().substring(0, 2);
            var meseta = $("#Eta").val().substring(3, 5);
            var anoeta = $("#Eta").val().substring(6, 10);
            var etd = new Date(mesetd + "/" + diaetd + "/" + anoetd);
            var eta = new Date(meseta + "/" + diaeta + "/" + anoeta);
            if (eta.getTime() < etd.getTime()) {
                swal('Ups!', 'ETA debe ser mayor al ETD', 'warning');
                $("#Eta").val("");
                return false;
            }
        }
    });

    $("#Commodity").change(function () {
        if ($("#Commodity").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetSetpointCommodity", "Setpoint")',
                data: { Commodity: $("#Commodity").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Setpoint').empty();
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdSetpoint + "'>" + json[i].CO2 + "% CO2, " + json[i].O2 + "% O2" + "</option>";
                    }
                    $('#Setpoint').append(optionsAsString);
                    $("#Setpoint").prop('disabled', false);
                    $('#Setpoint').selectpicker('refresh');
                },
            });
        }
    });


    $("#BuscarViaje").click(function () {
        $("#Nave").prop('disabled', false);
        $("#Nave").val("0");
        $('#Nave').selectpicker('refresh');
        $("#EtaNave").removeAttr("disabled")
        $("#EtaNave").val("");
        $("#Inicio_stacking").removeAttr("disabled");
        $("#Inicio_stacking").val("");
        $("#Termino_stacking").removeAttr("disabled");
        $("#Termino_stacking").val("");
        $("#Etd").removeAttr("disabled");
        $("#Etd").val("");
        $("#Eta").removeAttr("disabled");
        $("#Eta").val("");
        $("#DivViaje").hide();
        $("#DivViaje1").show();
        $("#Puerto_origen").val("0");
        $('#Puerto_origen').selectpicker('refresh');
        $("#Puerto_destino").val("0");
        $('#Puerto_destino').selectpicker('refresh');
        localStorage.setItem("CrearViaje", 0);
    });


    $("#Viaje").change(function () {
        if ($("#Puerto_origen").val() != "0" && $("#Puerto_Destino").val() != "0" &&  $("#Viaje").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetViajeServicio", "Viaje")',
                data: {
                    Viaje: $("#Viaje :selected").text(), PuertoOrigen: $("#Puerto_origen").val(),
                    PuertoDestino: $("#Puerto_destino").val()
                },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        var inicioStacking="";
                        var finStacking="";
                        var etd="";
                        var etaNave="";
                        var etaPod="";

                        if(json.InicioStacking!=null)
                        {
                            inicioStacking=formatDate(json.InicioStacking);
                        }

                        if(json.FinStacking!=null)
                        {
                            finStacking=formatDate(json.FinStacking);
                        }

                        if(json.Etd!=null)
                        {
                            etd=formatDate(json.Etd);
                        }

                        if(json.EtaNave!=null)
                        {
                            etaNave=formatDate(json.EtaNave);
                        }

                        if(json.Etd!=null)
                        {
                            etd=formatDate(json.Etd);
                        }

                        if(json.EtaNave!=null)
                        {
                            etaNave=formatDate(json.EtaNave);
                        }

                        if(json.EtaPod!=null)
                        {
                            etaPod=formatDate(json.EtaPod);
                        }
                        else
                        {
                            $("#Eta").removeAttr("disabled");
                        }

                        $("#Nave").val(json.IdNave);
                        $("#Nave").selectpicker("refresh");
                        $("#Inicio_stacking").val(inicioStacking);
                        $("#Termino_stacking").val(formatDate(json.FinStacking));
                        $("#Etd").val(formatDate(json.Etd));
                        $("#EtaNave").val(formatDate(json.EtaNave));
                        $("#Eta").val(formatDate(json.EtaPod));
                    }
                }
            });
        }
    });


    function formatDate(date) {
        if (date != null) {
            var fecha = date.substring(0, 10);
            var ano = date.substring(0, 4);
            var mes = date.substring(5, 7);
            var dia = date.substring(8, 10);
            return dia + "-" + mes + "-" + ano;
        } else {
            return "";
        }
    }
</script>