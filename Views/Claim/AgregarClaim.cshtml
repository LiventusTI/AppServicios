
@{
    ViewBag.Title = "AgregarClaim";
    Layout = "~/Views/MasterPage.cshtml";
}

<div class="row">
    @*<div class="col-md-12 col-sm-12 col-xs-12">*@
    <div class="x_panel">
        <div class="x_title">
            <h2>Ingresar Claim <small></small></h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <br />
            <form id="FormControl" data-parsley-validate class="form-horizontal form-label-left">
                <div class="form-group">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <label class="control-label col-md-3 col-sm-3 col-xs-6">
                            Booking <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-6">
                            <input type="text" id="booking" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <label id="lb_naviera" class="control-label col-md3 col-sm-3 col-xs-6">
                            Naviera <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-6">
                            <input type="text" id="naviera" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <label id="lb_viaje" class="control-label col-md-3 col-sm-3 col-xs-6">
                            Viaje <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-6">
                            <input type="text" id="viaje" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <label id="lb_exportador" class="control-label col-md-3 col-sm-3 col-xs-6">
                            Exportador <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-6">
                            <input type="text" id="exportador" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 col-sm-12 col-xs-12" style="text-align:center">
                        <button type="button" class="btn btn-success" onclick="ValidarFormulario()">Buscar</button>
                    </div>
                </div>
                <br />
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <table id="datatable" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>ID Servicio</th>
                                <th>Booking</th>
                                <th>Contenedor</th>
                                <th>Controlador</th>
                                <th>Naviera</th>
                                <th>Nave</th>
                                <th>Viaje</th>
                                <th>Exportador</th>
                                <th>ETA</th>
                                <th>Inicio Stacking</th>
                                <th>Producto</th>
                                <th>Puerto Origen</th>
                                <th>Puerto Destino</th>
                                <th>C02</th>
                                <th>02</th>
                                <th>T°</th>
                                <th>Tecnologia</th>
                                <th colspan="1">Agregar Claim</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>070ISA0610891</td>
                                <td>TTNU8475844</td>
                                <td>886B0F003B20</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>070ISA0610891</td>
                                <td>CGMU4960893</td>
                                <td>78002DACC</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>070ISA0610891</td>
                                <td>SZLU9122126</td>
                                <td>886B0F003D5C</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>070ISA0610891</td>
                                <td>TRIU8587319</td>
                                <td>886B0F003D5C</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>070ISA0610891</td>
                                <td>CGMU9374895</td>
                                <td>886B0F003D5C</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                            <tr>
                                <td>6</td>
                                <td>070ISA0610891</td>
                                <td>MNBU0239529</td>
                                <td>886B0F003D5C</td>
                                <td>CMA CGM</td>
                                <td>JPO LIBRA</td>
                                <td>030AMN</td>
                                <td>PRIAGRO</td>
                                <td>28-09-2017</td>
                                <td>29-09-2017</td>
                                <td>AVOCADOS</td>
                                <td>SAN ANTONIO</td>
                                <td>PHILADELPHIA</td>
                                <td>12</td>
                                <td>8</td>
                                <td>4.5</td>
                                <td>LIVENTUS</td>
                                <td style="font-size:18px; text-align:center"><i class="fa fa-plus" title="Agregar" id="Agregar"></i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </form>
        </div>
    </div>
</div>
@*</div>*@

<script>
    //Botón Agregar Servicio//
    $("#Agregar").click(function () {
        var valores = [];
        var i = 0;
        // Obtenemos todos los valores contenidos en los <td> de la fila
        // seleccionada
        $(this).parents("tr").find("td").each(function () {
            valores[i++] = $(this).html();
        });
        var url = '@Url.Action("IngresarClaimServicio", "Claim")?id=' + valores[0] + '&booking=' + valores[1] + '&contenedor=' + valores[2] + '&controlador=' + valores[3] + '&naviera=' + valores[4] + '&nave=' + valores[5] + '&viaje=' + valores[6] + '&exportador=' + valores[7] + '&eta=' + valores[8] + '&iniciostacking=' + valores[9] + '&producto=' + valores[10] + '&porigen=' + valores[11] + '&pdestino=' + valores[12] + '&co2=' + valores[13] + '&o2=' + valores[14] + '&temperatura=' + valores[15] + '&tecnologia=' + valores[16];
        window.location.href = url;
    });
    //Botón Agregar Servicio//

    function MostrarIngresoServicio()
    {
        var Booking = $("#booking").val();
        var Viaje = $("#viaje").val();

        //if (Booking == "") {
        //    swal('Error...', 'Campo Booking Obligatorio', 'error')
        //} else if (Nave == "") {
        //    swal('Error...', 'Campo Viaje Obligatorio', 'error')
        //}

        document.getElementById("lb_contenedor").style.visibility = "visible";
        document.getElementById("contenedor").style.visibility = "visible";
        document.getElementById("lb_fecha_servicio").style.visibility = "visible";
        document.getElementById("fecha_servicio").style.visibility = "visible";
        document.getElementById("lb_hora_llegada").style.visibility = "visible";
        document.getElementById("hora_llegada").style.visibility = "visible";
    }

    function ValidarFormulario() {
        var Booking = $("#booking").val();
        var Contenedor = $("#contenedor").val();
        var Viaje = $("#viaje").val();
        var FechaServicio = $("#fecha_servicio").val();
        var HoraLlegada = $("#hora_llegada").val();

        if (Booking == "") {
            swal('Error...', 'Campo Booking Obligatorio', 'error')
        } else if (Contenedor == "") {
            swal('Error...', 'Campo Contenedor Obligatorio', 'error')
        } else if (Viaje == "") {
            swal('Error...', 'Campo Viaje Obligatorio', 'error')
        } else if (FechaServicio == "") {
            swal('Error...', 'Campo Fecha Servicio Obligatorio', 'error')
        } else if (HoraLlegada == "") {
            swal('Error...', 'Campo Hora Llegada Obligatorio', 'error')
        }

        $.ajax({
            type: "POST",
            url: "/Reservas/IngresarDatos",
            content: "application/json; charset=utf-8",
            dataType: "json",
            data: {
                Booking: Booking,
                Nave: Nave,
                Naviera: Naviera,
                Exportador: Exportador,
                Producto: Producto,
                Destino: Destino,
                Origen: Origen,
                Viaje: Viaje,
                FechaArribo: Eta,
                FechaSalida: Etd,
                CantidadCO: CantidadCo,
                CantidadO: CantiadO,
                Temperatura: Temperatura,
                Tamano: Tamano
            },
            success: function (d) {
                if (d.success == true)
                    alert('Has introducido un nuevo coche!!');
                else { }
            },
            error: function (xhr, textStatus, errorThrown) {
                alert('Error!!');
            }
        });
    }

    $(function () {
        $("#Eta").datepicker({
            dateFormat: "dd-mm-yy",
            firstDay: 1,
            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
            monthNames:
                ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort:
                ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
        });

        $("#Etd").datepicker({
            dateFormat: "dd-mm-yy",
            firstDay: 1,
            dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
            monthNames:
                ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort:
                ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
        });
    });
</script>