@{
    ViewBag.Title = "GestionarLeaktest";
    Layout = "~/Views/MasterPage.cshtml";
    int PerfilInterior = Convert.ToInt32(Session["PerfilInterior"]);
    string Usuario = Session["User"].ToString().ToUpper();
    int SP = Convert.ToInt32(Session["SP"]);
}


<style>
    .swal-wide {
        width: 850px !important;
    }

    tfoot input {
        width: 100%;
        padding: 3px;
        box-sizing: border-box;
    }
</style>
<div class="col-sm-12">
    <div class="x_panel">
        <div class="x_title">
            <h2 class="tr" key="historicoresultados">Gestionar Leaktest SP</h2>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            <div class="x_panel">
                <div id="guardadocorrectamente" hidden="hidden"><p style="color:red">Guardado Correctamente</p></div>
                <table id="Tb_Resultado" class="table table-striped table-bordered display nowrap">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="tr">ID SOLICITUD</th>
                            <th class="tr">SERVICE PROVIDER</th>
                            <th class="tr">NAVIERA</th>
                            <th class="tr">PAIS</th>
                            <th class="tr">CIUDAD</th>
                            <th class="tr">DEPOSITO</th>
                            <th class="tr">FECHA ESTIMADA REALIZACION</th>
                            <th class="tr">HORA ESTIMADA REALIZACION</th>
                            <th class="tr">COMMODITY</th>
                            <th class="tr">CONTENEDOR</th>
                            <th class="tr">MAQUINARIA</th>
                            <th class="tr">AÑO CONTENEDOR</th>
                            <th class="tr">CONTROLADOR</th>
                            <th class="tr">BATERIA CONTROLADOR</th>
                            <th class="tr">FECHA ASOC. BATERIA CONTROLADOR</th>
                            <th class="tr">MODEM</th>
                            <th class="tr">BATERIA MODEM</th>
                            <th class="tr">FECHA ASOC. BATERIA MODEM</th>
                            <th class="tr">TECNICO</th>
                            <th class="tr">TIEMPO LEAKTEST</th>
                            <th class="tr">FECHA EJECUCION</th>
                            <th class="tr">ESTADO</th>
                            <th class="tr">SELLO PANEL 1</th>
                            <th class="tr">SELLO PANEL 2</th>
                            <th class="tr">SELLO SECURITY</th>
                            <th class="tr">COMENTARIO</th>
                            <th class="tr">ID RESULTADO</th>
                            <th class="tr">VALIDADO</th>
                            <th class="tr">PANEL REUTILIZADO</th>
                            <th class="tr">PRE-VALIDACION TECNICA</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th class="tr" key="idsolicitud">ID SOLICITUD</th>
                            <th class="tr" key="serviceprovidertabla">SERVICE PROVIDER</th>
                            <th class="tr" key="navierasolicitud">NAVIERA</th>
                            <th class="tr" key="paissolicitud">PAIS</th>
                            <th class="tr" key="ciudadsolicitud">CIUDAD</th>
                            <th class="tr">DEPOSITO</th>
                            <th class="tr">FECHA ESTIMADA REALIZACION</th>
                            <th class="tr">HORA ESTIMADA REALIZACION</th>
                            <th class="tr" key="commoditytabla">COMMODITY</th>
                            <th class="tr" key="contenedortabla">CONTENEDOR</th>
                            <th class="tr" key="maquinariatabla">MAQUINARIA</th>
                            <th class="tr" key="anocontenedortabla">AÑO CONTENEDOR</th>
                            <th class="tr" key="controladortabla">CONTROLADOR</th>
                            <th class="tr" key="bateriatabla">BATERIA CONTROLADOR</th>
                            <th class="tr" key="fechabateriatabla">FECHA ASOC. BATERIA CONTROLADOR</th>
                            <th class="tr" key="modemtabla">MODEM</th>
                            <th class="tr" key="bateriamodemtabla">BATERIA MODEM</th>
                            <th class="tr" key="fechabateriamodemtabla">FECHA ASOC. BATERIA MODEM</th>
                            <th class="tr" key="tecnicotabla">TECNICO</th>
                            <th class="tr" key="tiempotabla">TIEMPO LEAKTEST</th>
                            <th class="tr" key="fechaejecuciontabla">FECHA EJECUCION</th>
                            <th class="tr" key="estadotabla">ESTADO</th>
                            <th class="tr" key="selloperno1tabla">SELLO PANEL 1</th>
                            <th class="tr" key="selloperno2tabla">SELLO PANEL 2</th>
                            <th class="tr" key="sellotapatabla">SELLO SECURITY</th>
                            <th class="tr" key="comentariotabla">COMENTARIO</th>
                            <th class="tr" key="idresultado">ID RESULTADO</th>
                            <th class="tr" key="validadotabla">VALIDADO</th>
                            <th class="tr" key="panelreutilizadotabla">PANEL REUTILIZADO</th>
                            <th class="tr" key="prevalidaciontecnicatabla">PRE-VALIDACION TECNICA</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th></th>
                            <th class="tr" key="idsolicitud">ID SOLICITUD</th>
                            <th class="tr" key="serviceprovidertabla">1. SERVICE PROVIDER</th>
                            <th class="tr" key="navieratabla">2. NAVIERA</th>
                            <th class="tr" key="paistabla">3. PAIS</th>
                            <th class="tr" key="ciudadtabla">4. CIUDAD</th>
                            <th class="tr" key="depositotabla">5. DEPOSITO</th>
                            <th class="tr">6. FECHA ESTIMADA REALIZACION</th>
                            <th class="tr">7. HORA ESTIMADA REALIZACION</th>
                            <th class="tr" key="commoditytabla">6. COMMODITY</th>
                            <th class="tr" key="contenedortabla">7. CONTENEDOR</th>
                            <th class="tr" key="maquinariatabla">8. MAQUINARIA</th>
                            <th class="tr" key="anocontenedortabla">9. AÑO CONTENEDOR</th>
                            <th class="tr" key="controladortabla">10. CONTROLADOR</th>
                            <th class="tr" key="bateriatabla">11. BATERIA CONTROLADOR</th>
                            <th class="tr" key="fechabateriatabla">12. FECHA ASOC. BATERIA CONTROLADOR</th>
                            <th class="tr" key="modemtabla">13. MODEM</th>
                            <th class="tr" key="bateriamodemtabla">14. BATERIA MODEM</th>
                            <th class="tr" key="fechabateriamodemtabla">15. FECHA ASOC. BATERIA MODEM</th>
                            <th class="tr" key="tecnicotabla">16. TECNICO</th>
                            <th class="tr" key="tiempotabla">17. TIEMPO LEAKTEST</th>
                            <th class="tr" key="fechaejecuciontabla">18. FECHA EJECUCION</th>
                            <th class="tr" key="estadotabla">19. ESTADO</th>
                            <th class="tr" key="selloperno1tabla">20. SELLO PANEL 1</th>
                            <th class="tr" key="selloperno2tabla">21. SELLO PANEL 2</th>
                            <th class="tr" key="sellotapatabla">22. SELLO SECURITY</th>
                            <th class="tr" key="comentariotabla">23. COMENTARIO</th>
                            <th class="tr" key="idresultado">24. ID RESULTADO</th>
                            <th class="tr" key="validadotabla">25. VALIDADO </th>
                            <th class="tr" key="panelreutilizadotabla">26. PANEL REUTILIZADO</th>
                            <th class="tr" key="prevalidaciontecnicatabla">27. PRE-VALIDACION TECNICA</th>
                        </tr>
                    </tfoot>
                </table>
                <div class="divider"></div>
                <div class="row">
                    <div class="col-lg-12">
                        <button type="button" class="btn btn-primary tr btn-sm" id="AgregarResultadoLeaktest" key="agregarleaktest">Agregar Leak Test</button>
                        <button type="button" class="btn btn-info tr btn-sm" id="EditarResultadoLeaktest" key="editarleaktest">Editar Leak Test Mavisa</button>
                        <button class="btn btn-primary tr btn-warning btn-sm" id="CancelarLeaktest" key="cancelarleaktest">Cancelar Leak Test</button>
                        <button class="btn btn-primary tr btn-success btn-sm" id="DescancelarLeaktest" key="descancelarleaktest">Descancelar Leak Test</button>
                        <button class="btn btn-primary tr btn-danger btn-sm" id="EliminarLeaktest" key="eliminarleaktest">Eliminar Leak Test</button>
                        <button type="button" class="btn btn-primary tr btn-primary btn-sm" id="HistoricoModificaciones" key="historialmodificaciones">Historial Modificaciones</button>
                        <button type="button" class="btn btn-primary tr btn-success btn-sm" id="PreValidacionTecnica" key="prevalidacion">Pre Validacion Tecnica</button>
                        <button class="btn btn-info tr btn-primary btn-sm" key="asociarbateria" id="AsociarBateria">Asociar Bateria a Equipo</button>
                        @*<button class="btn btn-primary tr btn-primary btn-sm" id="LeaktestReport">Generar Leak Test Report</button>*@
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Modal para Asociar Bateria-->
<div class="modal fade" id="myModalAsociarBateria" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
    <div class="modal-dialog" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title tr" id="myModalLabel" key="tituloloasociarbateria"> Asociar Bateria a un equipo</h4>
            </div>
            <div class="modal-body">
                <div class="row x_panel">
                    <div class="x_panel">
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <label id="lb_id" class="control-label tr" key="bateria">Batería (*)</label>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-12" style="text-align:center">
                                <input type="text" class="form-control" autocomplete="off" name="BateriaAsociada" id="BateriaAsociada" />
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <button class="btn btn-primary tr btn-primary btn-sm" key="ValidarBateria" id="ValidarBateria">Validar</button>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <div class="col-lg-3 col-md-3 col-sm-3">

                                <label id="lb_id" class="control-label tr" key="numeroESN">Número ESN  (*)</label>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <input type="text" onkeyup="this.value = this.value.toUpperCase();" class="form-control" autocomplete="off" name="ESN" id="ESN" />
                            </div>

                            <div class="col-lg-1 col-md-1 col-sm-1">
                                <label id="lb_id" class="control-label tr" key="tipoESN">Tipo Equipo (*)</label>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <select class="selectpicker form-control" id="tipo_esn" data-live-search="true">
                                    <option value="0" selected>Seleccione Tipo ESN</option>
                                    <option value="1">CONTROLADOR</option>
                                    <option value="2">MODEM</option>
                                </select>
                            </div>
                            <div class="col-lg-1 col-md-1 col-sm-1">
                            </div>



                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12 form-group">
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <label id="lb_id" class="control-label tr" key="fechaAsociacion">Fecha Asociación (*)</label>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <input type="text" id="FechaAsociacion" class="form-control" autocomplete="off">
                            </div>
                            <div class="col-lg-1 col-md-1 col-sm-1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" id="div_botones_salida">
                <button type="button" class="btn btn-success tr" id="Guardar_asociacion" key="botonguardarlogistica">Guardar</button>
                <button type="button" class="btn btn-danger tr" data-dismiss="modal" key="botoncancelarlogistica">Cancelar</button>
            </div>
        </div>
    </div>
</div>
<!--Modal para Asociar Bateria-->
<!--Historial Modificaciones-->
<div class="modal fade" id="myModal8" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
    <div class="modal-dialog" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h2 class="modal-title tr" id="myModalLabel">Historial de Modificaciones</h2>
            </div>
            <div class="modal-body">
                <div class="x_panel">
                    <table id="Tb_Historico" class="table table-striped table-bordered display nowrap">
                        <thead>
                            <tr>
                                <th>FECHA ACCION</th>
                                <th>USUARIO ACCION</th>
                                <th class="tr" key="serviceprovidertabla">SERVICE PROVIDER</th>
                                <th class="tr" key="navierasolicitud">NAVIERA</th>
                                <th class="tr" key="paissolicitud">PAIS</th>
                                <th class="tr" key="ciudadsolicitud">CIUDAD</th>
                                <th class="tr" key="depositosolicitud">DEPOSITO</th>
                                <th class="tr" key="commoditytabla">COMMODITY</th>
                                <th class="tr" key="contenedortabla">CONTENEDOR</th>
                                <th class="tr" key="maquinariatabla">MAQUINARIA</th>
                                <th class="tr" key="anocontenedortabla">AÑO CONTENEDOR</th>
                                <th class="tr" key="controladortabla">CONTROLADOR</th>
                                <th class="tr" key="bateriatabla">BATERIA</th>
                                <th class="tr" key="fechabateriatabla">FECHA_CONTROLADOR</th>
                                <th class="tr" key="tecnicotabla">TECNICO</th>
                                <th class="tr" key="tiempotabla">TIEMPO LEAKTEST</th>
                                <th class="tr" key="fechaejecuciontabla">FECHA EJECUCION</th>
                                <th class="tr" key="estadotabla">ESTADO</th>
                                <th class="tr" key="selloperno1tabla">SELLO PANEL 1</th>
                                <th class="tr" key="selloperno2tabla">SELLO PANEL 2</th>
                                <th class="tr" key="sellotapatabla">SELLO SECURITY</th>
                                <th class="tr">COMENTARIO</th>
                                <th class="tr" key="idresultado">ID RESULTADO</th>
                                <th class="tr">VALIDADO</th>
                                <th class="tr">PANEL REUTILIZADO</th>
                                <th class="tr">VALIDACION PRE-TECNICA</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>FECHA ACCION</th>
                                <th>USUARIO ACCION</th>
                                <th class="tr" key="serviceprovidertabla">SERVICE PROVIDER</th>
                                <th class="tr" key="navierasolicitud">NAVIERA</th>
                                <th class="tr" key="paissolicitud">PAIS</th>
                                <th class="tr" key="ciudadsolicitud">CIUDAD</th>
                                <th class="tr" key="depositosolicitud">DEPOSITO</th>
                                <th class="tr" key="commoditytabla">COMMODITY</th>
                                <th class="tr" key="contenedortabla">CONTENEDOR</th>
                                <th class="tr" key="maquinariatabla">MAQUINARIA</th>
                                <th class="tr" key="anocontenedortabla">AÑO CONTENEDOR</th>
                                <th class="tr" key="controladortabla">CONTROLADOR</th>
                                <th class="tr" key="bateriatabla">BATERIA</th>
                                <th class="tr" key="fechabateriatabla">FECHA_CONTROLADOR</th>
                                <th class="tr" key="tecnicotabla">TECNICO</th>
                                <th class="tr" key="tiempotabla">TIEMPO LEAKTEST</th>
                                <th class="tr" key="fechaejecuciontabla">FECHA EJECUCION</th>
                                <th class="tr" key="estadotabla">ESTADO</th>
                                <th class="tr" key="selloperno1tabla">SELLO PANEL 1</th>
                                <th class="tr" key="selloperno2tabla">SELLO PANEL 2</th>
                                <th class="tr" key="sellotapatabla">SELLO SECURITY</th>
                                <th class="tr">COMENTARIO</th>
                                <th class="tr" key="idresultado">ID RESULTADO</th>
                                <th class="tr">VALIDADO</th>
                                <th class="tr">PANEL REUTILIZADO</th>
                                <th class="tr">VALIDACION PRE-TECNICA</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<!--Modal Historial Modificaciones-->
<!--Modal Agregar Leaktest-->
<div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
    <div class="modal-dialog" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h2 class="modal-title tr" id="myModalLabel" key="agregarleaktest">Agregar Leak Test</h2>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="form-group">
                            <label for="Naviera" class="control-label col-sm-3 tr">Service Provider (*)</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="ServiceProviderAgregar">
                                    <option value="0" selected class="tr" key="selectsp">Seleccione Service Provider</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Naviera" class="control-label col-sm-3 tr" key="naviera">Naviera (*)</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="NavieraAgregar">
                                    <option value="0" selected class="tr" key="selectnaviera">Seleccione Naviera</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Pais" class="control-label col-sm-3 tr" key="pais">País</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="PaisAgregar">
                                    <option value="0" selected class="tr" key="selectpais">Seleccione Pais</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Ciudad" class="control-label col-sm-3 tr" key="ciudad">Ciudad</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="CiudadAgregar">
                                    <option value="0" selected class="tr" key="selectciudad">Seleccione Ciudad</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Deposito" class="control-label col-sm-3 tr" key="deposito">Deposito (*)</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="DepositoAgregar">
                                    <option value="0" selected class="tr" key="selectdeposito">Seleccione Deposito</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Deposito" class="control-label col-sm-3 tr" key="commodity">Commodity</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="CommodityAgregar">
                                    <option value="0" selected class="tr" key="selectcommodity">Seleccione Commodity</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row" hidden="hidden">
                        <div class="form-group">
                            <label for="FechaEstimadaEjecucion" class="control-label col-sm-3 tr" key="eta">Fecha Estimada Ejecución</label>
                            <div class="col-sm-6">
                                <input type="text" name="FechaEstimadaAgregar" id="FechaEstimadaAgregar" class="form-control" autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="row" hidden="hidden">
                        <div class="form-group">
                            <label for="Hora" class="control-label col-sm-3 tr" key="horaejecucion">Hora Estimada Ejecución</label>
                            <div class="col-sm-6">
                                <input type="time" name="HoraEstimadaAgregar" id="HoraEstimadaAgregar" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="Eta" class="control-label col-sm-3 tr" key="tecnico">Tecnico Realizador</label>
                            <div class="col-sm-6">
                                <select class="selectpicker form-control" data-live-search="true" id="TecnicoAgregar"></select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="FechaEjecucion" class="control-label col-sm-3 tr" key="fechaejecucion">Fecha Ejecución LeakTest</label>
                            <div class="col-sm-6">
                                <input type="text" name="FechaEjecucionAgregar" id="FechaEjecucionAgregar" class="form-control" autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="TiempoLeaktest" class="control-label col-sm-3 tr" key="tiempo">Tiempo LeakTest</label>
                            <div class="col-sm-6">
                                <input type="time" min="00:00" max="08:00" name="TiempoLeaktestAgregar" id="TiempoLeaktestAgregar" class="form-control" autocomplete="off">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label for="AnoContenedor" class="control-label col-sm-3 tr" key="anocontenedor">Año Contenedor</label>
                            <div class="col-sm-6">
                                <input type="text" name="AnoContenedorAgregar" id="AnoContenedorAgregar" class="form-control" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </form>
                <form class="form-horizontal">
                    <div class="row">
                        <div class="form-group">
                            <label id="lb_tipo_contenedor" class="control-label col-sm-2 tr" key="maquinariacontenedor">Maquinaria Contenedor (*)</label>
                            <div class="col-sm-3">
                                <select class="selectpicker form-control Maquinaria" data-live-search="true" id="Maquinaria">
                                    <option selected value="0" class="tr" key="selectmaquinariatabla">Seleccione Maquinaria</option>
                                </select>
                            </div>
                            <label id="lb_contenedor" class="control-label col-sm-2 tr" key="cantidad">Cantidad</label>
                            <div class="col-sm-3">
                                <input type="number" min="1" max="100" id="contenedores" class="form-control">
                            </div>
                            <div class="col-sm-2 icono" hidden="hidden">
                                <i class="fa fa-plus-square" onclick="MostrarAgregarLeaktest()" title="Agregar Maquinaria" id="Agregar"></i>
                            </div>
                        </div>
                    </div>
                    <div id="div_ingreso1" class="row" hidden="hidden">
                        <div class="form-group">
                            <label id="lb_tipo_contenedor" class="control-label col-sm-2 tr" key="maquinariacontenedor">Maquinaria Contenedor (*)</label>
                            <div class="col-sm-3">
                                <select class="selectpicker form-control Maquinaria1" data-live-search="true" id="Maquinaria1">
                                    <option selected value="0" class="tr" key="selectmaquinariatabla">Seleccione Maquinaria</option>
                                </select>
                            </div>
                            <label id="lb_contenedor" class="control-label col-sm-2 tr" key="cantidad">Cantidad</label>
                            <div class="col-sm-3">
                                <input type="number" min="1" max="100" id="contenedores1" class="form-control">
                            </div>
                            <div class="col-sm-2 icono" hidden="hidden">
                                <i class="fa fa-plus-square" onclick="MostrarAgregarLeaktest2()" title="Agregar Maquinaria" id="Agregar"></i>
                                <i class="fa fa-trash" onclick="OcultarAgregarLeaktest2()" title="Agregar Maquinaria" id="Eliminar"></i>
                            </div>
                        </div>
                    </div>
                    <div id="div_ingreso2" class="row" hidden="hidden">
                        <div class="form-group">
                            <label id="lb_tipo_contenedor" class="control-label col-sm-2 tr" key="maquinariacontenedor">Maquinaria Contenedor (*)</label>
                            <div class="col-sm-3">
                                <select class="selectpicker form-control Maquinaria2" data-live-search="true" id="Maquinaria2">
                                    <option selected value="0" class="tr" key="selectmaquinariatabla">Seleccione Maquinaria</option>
                                </select>
                            </div>
                            <label id="lb_contenedor" class="control-label col-sm-2 tr" key="cantidad">Cantidad</label>
                            <div class="col-sm-3">
                                <input type="number" min="1" max="100" id="contenedores2" class="form-control">
                            </div>
                            <div class="col-sm-2 icono" hidden="hidden">
                                <i class="fa fa-plus-square" onclick="MostrarAgregarLeaktest3()" title="Agregar Maquinaria" id="Agregar"></i>
                                <i class="fa fa-trash" onclick="OcultarAgregarLeaktest3()" title="Agregar Maquinaria" id="Eliminar"></i>
                            </div>
                        </div>
                    </div>
                    <div id="div_ingreso3" class="row" hidden="hidden">
                        <div class="form-group">
                            <label id="lb_tipo_contenedor" class="control-label col-sm-2 tr" key="maquinariacontenedor">Maquinaria Contenedor (*)</label>
                            <div class="col-sm-3">
                                <select class="selectpicker form-control Maquinaria3" data-live-search="true" id="Maquinaria3">
                                    <option selected value="0" class="tr" key="selectmaquinariatabla">Seleccione Maquinaria</option>
                                </select>
                            </div>
                            <label id="lb_contenedor" class="control-label col-sm-2 tr" key="cantidad">Cantidad</label>
                            <div class="col-sm-3">
                                <input type="number" min="1" max="100" id="contenedores3" class="form-control">
                            </div>
                            <div class="col-sm-2 icono" hidden="hidden">
                                <i class="fa fa-trash" onclick="OcultarAgregarLeaktest4()" title="Agregar Maquinaria" id="Eliminar"></i>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer" style="text-align:center">
                @*<button type="button" class="btn btn-success btn-lg" id="Agregar">Agregar</button>*@
                <button type="button" class="btn btn-success btn-lg" id="LeaktestAgrega" key="agregar">Agregar</button>
            </div>
        </div>
    </div>
</div>
<!--Modal Agregar Leaktest-->
<!--Modal Editar Celdas-->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:400px; margin-right:10px; width:50%">
    <div class="modal-dialog" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header titulo">
                <button type="button" class="close closeCelda" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h2 class="modal-title tr" id="titulocelda"></h2>
            </div>
            <div class="modal-body">
                <div class="row" id="ColumnaServiceProvider" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Service Provider (*)</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarServiceProvider" id="EditarServiceProvider"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaNaviera" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Naviera </label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarNaviera" id="EditarNaviera"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaDeposito" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Deposito</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarDeposito" id="EditarDeposito"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaFechaEstimada" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Fecha Estimada Realización</label>
                        <div>
                            <input type="text" id="EditarFechaEstimada" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaHoraEstimada" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Hora Estimada Realización</label>
                        <div>
                            <input type="time" id="EditarHoraEstimada" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaCommodity" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Commodity</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarCommodity" id="EditarCommodity"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaContenedor" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Contenedor (*)</label>
                        <div>
                            <input type="text" id="EditarContenedor" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <button type="button" class="btn btn-success" id="ValidarContenedor">Validar</button>
                    </div>
                </div>
                <div class="row" id="ColumnaMaquinaria" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Maquinaria</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarMaquinaria" id="EditarMaquinaria"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaAnoContenedor" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Año Contenedor</label>
                        <div>
                            <input type="number" id="EditarAnoContenedor" class="form-control" min="2000" step="1" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaTecnico" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Tecnico Realizador</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarTecnico" id="EditarTecnico"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaFechaEjecucion" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Fecha Ejecución Leak Test</label>
                        <div>
                            <input type="text" id="EditarFechaRealizacion" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaEstado" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Estado</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarEstado" id="EditarEstado"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaTiempo" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Tiempo LeakTest</label>
                        <div>
                            <input type="time" max="08:00" min="00:00" id="EditarTiempo" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaSelloPanel1" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Sello Panel 1</label>
                        <div>
                            <input type="text" id="EditarSelloPanel1" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaSelloPanel2" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Sello Panel 2</label>
                        <div>
                            <input type="text" id="EditarSelloPanel2" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaSelloSecurity" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Sello Security</label>
                        <div>
                            <input type="text" id="EditarSelloSecurity" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaComentario" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Comentario</label>
                        <div>
                            <input type="text" id="EditarComentario" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaPanelReutilizado" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Panel Reutilizado</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarPanelReutilizado" id="EditarPanelReutilizado">
                                <option value="0">NO</option>
                                <option value="1">SI</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div id="ColumnaControlador" hidden="hidden">
                    <div class="row" id="controladordatos">
                        <div class="col-lg-6" style="text-align:center">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="quitar">Quitar Controlador
                            </label>
                        </div>
                        <div class="col-lg-6" style="text-align:center">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="cambiar"> Agregar / Cambiar Controlador
                            </label>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div id="cambiarcontrolador" hidden="hidden">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr">Controlador (ESN) (*)</label>
                                    <div>
                                        <input type="text" class="form-control" id="EditarControlador" placeholder="Controlador (ESN)" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12">
                                    <button type="button" class="btn btn-success" id="ValidarControlador">Validar</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4 col-md-4 col-sm-12 col-sm-offset-2" style="text-align:center">
                                <label class="control-label tr">Bateria (*)</label>
                                <div>
                                    <input type="text" id="EditarBateriaControlador" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                <label class="control-label tr">Fecha Instalacion Bateria (*)</label>
                                <div>
                                    <input type="text" id="EditarFechaBateriaControlador" class="form-control" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="quitarcontrolador" hidden="hidden">
                        <input type="text" id="IdResultadoEditarContendor" hidden="hidden" />
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6" style="text-align:center">
                                <div>
                                    <input type="text" id="EditarControladorInput" class="form-control" onkeyup="this.value = this.value.toUpperCase();" readonly />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6" style="text-align:center;">
                                <div>
                                    <button type="button" class="btn btn-danger" id="QuitarControlador">Quitar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" id="ColumnaBateria" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Bateria</label>
                        <div>
                            <input type="text" id="EditarBateria" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaFechacontrolador" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Fecha Instalacion Bateria</label>
                        <div>
                            <input type="text" id="EditarFechaControlador" class="form-control" onkeyup="this.value = this.value.toUpperCase();" autocomplete="off" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div id="ColumnaModem" hidden="hidden">
                    <div class="row" id="modemdatos">
                        <div class="col-lg-6" style="text-align:center">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="quitarCheckModem">Quitar Modem
                            </label>
                        </div>
                        <div class="col-lg-6" style="text-align:center">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="cambiarCheckModem"> Agregar / Cambiar Modem
                            </label>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div id="cambiarmodem" hidden="hidden">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                                <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                    <label class="control-label tr">Modem (ESN) (*)</label>
                                    <div>
                                        <input type="text" class="form-control" id="EditarModem" placeholder="Modem (ESN)" onkeyup="this.value = this.value.toUpperCase();">
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12">
                                    <button type="button" class="btn btn-success" id="ValidarModem">Validar</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4 col-md-4 col-sm-12 col-sm-offset-2" style="text-align:center">
                                <label class="control-label tr">Bateria (*)</label>
                                <div>
                                    <input type="text" id="EditarBateriaModem" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                                <label class="control-label tr">Fecha Instalacion Bateria (*)</label>
                                <div>
                                    <input type="text" id="EditarFechaBateriaModem" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="quitarmodem" hidden="hidden">
                        @*<input type="text" id="IdResultadoEditarContendor" hidden="hidden" />*@
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6" style="text-align:center">
                                <div>
                                    <input type="text" id="EditarModemInput" class="form-control" onkeyup="this.value = this.value.toUpperCase();" readonly />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6" style="text-align:center;">
                                <div>
                                    <button type="button" class="btn btn-danger" id="QuitarModem">Quitar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer EditarCelda" style="text-align:center">
                <button type="button" class="btn btn-success btn-lg" id="EditarCelda">Guardar</button>
            </div>
        </div>
    </div>
</div>
<!--Modal Editar Celdas-->
<!--Modal Editar Leaktest Masivo-->
<div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="margin-left:80px; margin-right:10px;">
    <div class="modal-dialog" role="document" style="width:100%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h2 class="modal-title tr" id="myModalLabel" key="tituloeditarleaktest">Editar Resultados de Leaktest</h2>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                        <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                            <label class="control-label tr" key="ColumnaEditar">Columna a Editar (*)</label>
                            <div>
                                <select class="selectpicker form-control" data-live-search="true" name="columnaseditarLeaktest" id="columnaseditarLeaktest">
                                    <option selected value="0">SELECT COLUMN</option>
                                    @*<option value="1">SERVICE PROVIDER</option>*@
                                    <option value="2">NAVIERA</option>
                                    <option value="3">DEPOSITO</option>
                                    @*<option value="4">FECHA ESTIMADA REALIZACION</option>
                                        <option value="5">HORA ESTIMADA REALIZACION</option>*@
                                    <option value="6">COMMODITY</option>
                                    <option value="7">MAQUINARIA</option>
                                    <option value="8">AÑO CONTENEDOR</option>
                                    <option value="9">TECNICO</option>
                                    <option value="10">TIEMPO LEAKTEST</option>
                                    <option value="11">FECHA EJECUCION</option>
                                    <option value="12">ESTADO</option>
                                    <option value="13">COMENTARIO</option>
                                    <option value="14">PANEL REUTILIZADO</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    </div>
                </div>
                <div class="divider"></div>
                <div class="row" id="ColumnaServiceProviderMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Service Provider (*)</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarServiceProviderMasiva" id="EditarServiceProviderMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaNavieraMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Naviera </label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarNavieraMasiva" id="EditarNavieraMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaDepositoMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Deposito</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarDepositoMasiva" id="EditarDepositoMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaFechaEstimadaMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Fecha Estimada Realización</label>
                        <div>
                            <input type="text" id="EditarFechaEstimadaMasiva" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaHoraEstimadaMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Hora Estimada Realización</label>
                        <div>
                            <input type="time" id="EditarHoraEstimadaMasiva" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaCommodityMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Commodity</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarCommodityMasiva" id="EditarCommodityMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaMaquinariaMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Maquinaria</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarMaquinariaMasiva" id="EditarMaquinariaMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaAnoContenedorMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Año Contenedor</label>
                        <div>
                            <input type="number" id="EditarAnoContenedorMasiva" class="form-control" min="2000" step="1" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>

                <div class="row" id="ColumnaTecnicoMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Tecnico </label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarTecnicoMasiva" id="EditarTecnicoMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaTiempoMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Tiempo LeakTest</label>
                        <div>
                            <input type="time" max="08:00" min="00:00" id="EditarTiempoMasiva" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaFechaEjecucionMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Fecha Ejecución Leak Test</label>
                        <div>
                            <input type="text" id="EditarFechaRealizacionMasiva" class="form-control" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaEstadoMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Estado</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarEstadoMasiva" id="EditarEstadoMasiva"></select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>

                <div class="row" id="ColumnaComentarioMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Comentario</label>
                        <div>
                            <input type="text" id="EditarComentarioMasiva" class="form-control" onkeyup="this.value = this.value.toUpperCase();" />
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
                <div class="row" id="ColumnaPanelReutilizadoMasiva" hidden="hidden">
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center">
                        <label class="control-label tr">Panel Reutilizado</label>
                        <div>
                            <select class="selectpicker form-control" data-live-search="true" name="EditarPanelReutilizadoMasiva" id="EditarPanelReutilizadoMasiva">
                                <option value="0">NO</option>
                                <option value="1">SI</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-12" style="text-align:center"></div>
                </div>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" class="btn btn-success btn-lg" id="EditarDatosMasiva" key="botonguardarservicio">Guardar</button>
            </div>
        </div>
    </div>
</div>
<!--Modal Editar Leaktest Masivo-->


<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal8" id="HistoricoControlador" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" id="EditarReservaTrigger" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal2" id="EditarCeldas" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal3" id="AgregarCeldas" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal4" id="HistoricoControlador" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal5" id="EditarLeaktestMasivaTrigger" style="display:none;"></button>
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModalAsociarBateria" id="AsociarBateriaTrigger" style="display:none;"></button>
@*<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal6" id="HistoricoControlador" style="display:none;"></button>*@

<input type="text" class="input form_control" id="BookingEditar" disabled="disabled" hidden />

<script src="~/build/js/Perfiles.js"></script>
<script src="~/build/js/PerfilesLeaktestSP.js"></script>
<script type="text/javascript">

    var lenguaje = document.cookie;

    function formatDate(date) {
        var fecha = date.substring(0, 10);
        var ano = date.substring(0, 4);
        var mes = date.substring(5, 7);
        var dia = date.substring(8, 10);
        return dia + "-" + mes + "-" + ano;
    }

    function getCurrentDate(date) {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!

        var yyyy = today.getFullYear();
        if (dd < 10) {
            dd = '0' + dd;
        }
        if (mm < 10) {
            mm = '0' + mm;
        }
        var today = dd + '-' + mm + '-' + yyyy;
        return today;
    }

    $(document).ready(function () {


        $("#add_row").click(function () {
            if ($("#Id_contenedor").val() != "")
            {
                i++;
                $('#tab_logic').append('<tr id="addr' + (i) + '"></tr>');
                $('#addr' + i).html("<td><input id='container" + i + "' name='name" + i + "' onkeyup= 'this.value = this.value.toUpperCase();' type='text' class='form-control' minlength='1' maxlength='11'/></td><td><select name='maquinaria" + i + "' class='form-control MaquinariaContenedorUnico" + i + "'><option value='0' selected class='tr' key='selectmaquinariatabla'></option></select></td>");
                cargarMaquinaria(i);
            } else {
                swal({
                    title: '',
                    text: "Ingrese un contenedor",
                    type: aux,
                    showCancelButton: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Aceptar'
                }).then((result) => {
                    //location.reload();
                })
            }

        });

        $("#delete_row").click(function () {
            if (i > 1) {
                $("#addr" + (i)).remove();
                $("#addr" + (i - 1)).remove();
                i--;
            }
        });

        //OBTENER MAQUINARIAS
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                var optionsAsString = "";
                var optionsAsString1 = "";
                for (var i = 0; i < cuenta; i++) {
                    if (json[i].Id != 5 && json[i].Id != 0) {
                        optionsAsString1 += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    if (json[i].Id != 0) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                }

                $('#Maquinaria').append(optionsAsString);
                $('#Maquinaria').selectpicker('refresh');
                $('#Maquinaria1').append(optionsAsString);
                $('#Maquinaria1').selectpicker('refresh');
                $('#Maquinaria2').append(optionsAsString);
                $('#Maquinaria2').selectpicker('refresh');
                $('#Maquinaria3').append(optionsAsString);
                $('#Maquinaria3').selectpicker('refresh');
                $('.MaquinariaContenedorUnico').append(optionsAsString1);
            },
        });
        //OBTENER MAQUINARIAS

        $("#Maquinaria").change(function () {
            if ($("#Maquinaria").val() == 5) {
                $(".icono").hide();
                $("#div_ingreso1").hide();
                $("#div_ingreso2").hide();
                $("#div_ingreso3").hide();
                $("#div_ingreso4").hide();
            } else {
                $(".icono").show();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        var optionsAsString = "";
                        $('#Maquinaria1').empty();
                        $('#Maquinaria2').empty();
                        $('#Maquinaria3').empty();
                        $('#Maquinaria4').empty();
                        optionsAsString += "<option value='0' selected></option>";
                        for (var i = 0; i < cuenta; i++) {
                            if ($('#Maquinaria').val() != json[i].Id) {
                                if (json[i].Id != 5 && json[i].Id != 0) {
                                    optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                                }
                            }
                        }

                        $('#Maquinaria1').append(optionsAsString);
                        $('#Maquinaria1').selectpicker('refresh');
                    },
                });
            }
        });

        $("#Maquinaria1").change(function () {
            $(".icono").show();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Maquinaria2').empty();
                    $('#Maquinaria3').empty();
                    optionsAsString += "<option value='0' selected></option>";
                    for (var i = 0; i < cuenta; i++) {
                        if ($('#Maquinaria1').val() != json[i].Id && $('#Maquinaria').val() != json[i].Id) {
                            if (json[i].Id != 5 && json[i].Id != 0) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                        }
                    }
                    $('#Maquinaria2').append(optionsAsString);
                    $('#Maquinaria2').selectpicker('refresh');
                },
            });
        });
        $("#Maquinaria2").change(function () {
            $(".icono").show();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#Maquinaria3').empty();
                    optionsAsString += "<option value='0' selected></option>";
                    for (var i = 0; i < cuenta; i++) {
                        if ($('#Maquinaria').val() != json[i].Id && $('#Maquinaria1').val() != json[i].Id && $('#Maquinaria2').val() != json[i].Id) {
                            if (json[i].Id != 5 && json[i].Id != 0) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                            }
                        }
                    }
                    $('#Maquinaria3').append(optionsAsString);
                    $('#Maquinaria3').selectpicker('refresh');
                },
            });
        });
        $("#Maquinaria3").change(function () {
            if ($('#Maquinaria').val() != 5 && $('#Maquinaria1').val() != 5 && $('#Maquinaria2').val() != 5 && $('#Maquinaria3').val() != 5) {
                $(".icono").hide();
            }
        });


        function cargarMaquinaria(aux) {
            //OBTENER MAQUINARIAS
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    for (var i = 1; i < cuenta; i++) {
                        if (json[i].Id != 5) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                    }

                    $('.MaquinariaContenedorUnico' + aux ).append(optionsAsString);
                },
            });
            //OBTENER MAQUINARIAS
        }



        $('#Tb_Resultado thead tr:eq(1) th').each(function (i) {
            var title = $('#example thead tr:eq(0) th').eq($(this).index()).text();
            if ($(this).index() != 0) {
                $(this).html('<input type="text" class="form-control" placeholder="FILTER" data-index="' + i + '"/>');
            }
        });


        var table = $("#Tb_Resultado").DataTable({
            orderCellsTop:  true,
            fixedColumns:   true,
            scrollX: true,
            pageLength: 15,
            ajax: {
                "url": "@Url.Action("GetAllResultadosSP", "Leaktest")",
                "dataSrc": ''
            },
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'excel',
                }
            ],
            columns: [
            { "data": "Checkbox" },
            { "data": "IdReserva" },
            { "data": "NombreServiceProvider" },
            { "data": "Naviera" },
            { "data": "NombrePais" },
            { "data": "NombreCiudad" },
            { "data": "NombreDeposito" },
             {
                 "data": "FechaEstimada",
                 "render":
                 function (data, type, row, meta) {
                     if (data != null) {
                         var fecha = FormatDate(data);
                         return fecha;
                     } else {
                         return "";
                     }
                 }
             },
            { "data": "HoraEstimada" },
            { "data": "Commodity" },
             { "data": "Contenedor" },
            { "data": "NombreMaquinaria" },
            { "data": "Ano" },
            {"data": "Controlador"},
            {"data": "Bateria"},
            {
                "data": "FechaControlador",
                "render":
                function (data, type, row, meta) {
                    if (data != null) {
                        var fecha = FormatDate(data);
                        return fecha;
                    } else {
                        return "";
                    }
                }
            },
             {"data": "Modem"},
            {"data": "BateriaModem"},
            {
                "data": "FechaBateriaModem",
                "render":
                function (data, type, row, meta) {
                    if (data != null) {
                        var fecha = FormatDate(data);
                        return fecha;
                    } else {
                        return "";
                    }
                }
            },
            { "data": "NombreUsuario" },
            { "data": "Tiempo" },
            { "data": "FechaRealizacion",
                "render":
                function( data, type, row, meta){
                    if(data != null){
                        var fecha = FormatDate(data);
                        return fecha;
                    }else{
                        return "";
                    }
                }
            },
            { "data": "EstadoLeaktest" },
            { "data": "Selloperno1" },
            { "data": "Selloperno2" },
            { "data": "Sellotapa" },
            { "data": "Comentario" },
            { "data": "IdResultado" },
            { "data": "Validado" },
            { "data": "PanelReutilizado" },
             {
                 "data": "PreValidacionTecnica",
                 "render":
                 function (data, type, row, meta) {
                     if (data == 0) {
                         return "SI";
                     } else {
                         return "NO";
                     }
                 }
             },
            ],
            "rowCallback": function (row, data, index) {
                if (data.EstadoLeaktest == "CANCELLED") {
                    $('td', row).css("background-color", "rgba(255,255,0)");
                } else if((data.NombreServiceProvider=="NEPTUNIA" || data.NombreServiceProvider=="INVERSIONES MARITIMAS UNIVERSALES PERÚ") && data.Controlador=="" && data.Contenedor!="" && data.NombreDeposito!="NEPTUNIA" && data.NombreDeposito!="IMUPESA"){
                    $('td', row).css("background-color", "rgba(255, 165,0, 0.6);");
                } else if (data.EstadoLeaktest == "APPROVED" && data.Contenedor!="") {
                    $('td', row).css("background-color", "rgba(0,255,0,0.6)");
                }else if ((data.EstadoLeaktest == "REJECTED" || data.EstadoLeaktest=="VISUALY REJECTED") && data.Contenedor!="") {
                    $('td', row).css("background-color", "rgba(255, 0, 0, 0.4);");
                }
            },
            columnDefs: [
            {
                'targets': 0,
                'checkboxes': {
                    'selectRow': true
                }
            },
                {
                    "targets": [1,7,8],
                    "visible": false,
                }
        ],
        select: {
            'style': 'multi'
        },
        });

        $( table.table().container() ).on('keyup', 'thead input', function () {
            table
                .column( $(this).data('index'))
                .search( this.value )
                .draw();
        });

        $('#example-select-all').on('click', function () {
            // Get all rows with search applied
            var rows = table.rows({ 'search': 'applied' }).nodes();
            // Check/uncheck checkboxes for all rows in the table
            $('input[type="checkbox"]', rows).prop('checked', this.checked);
        });

        function FormatDate(data) {
            var dateString = data.substr(6);
            var currentTime = new Date(parseInt(dateString));
            var month = currentTime.getMonth() + 1;
            var day = currentTime.getDate();
            var year = currentTime.getFullYear();

            if (month < 10) {
                month = "0" + month;
            } else {
                month;
            }

            if (day < 10) {
                day = "0" + day;
            } else {
                day;
            }

            var date = day + "-" + month + "-" + year;
            return date;
        }


        $(function () {
            $("#FechaAsociacion,#EditarFechaRealizacion, #EditarFechaEstimada, #FechaEstimadaAgregar, #FechaEjecucionAgregar, #EditarFechaRealizacionMasiva, #EditarFechaEstimadaMasiva, #EditarFechaControlador, #EditarFechaBateriaControlador, #EditarFechaBateriaModem").datepicker({
                dateFormat: "dd-mm-yy",
                firstDay: 1,
                dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
                dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
                monthNames:
                    ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio",
                    "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                monthNamesShort:
                    ["Ene", "Feb", "Mar", "Abr", "May", "Jun",
                    "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
                showWeek: true
            });
        });


        $('#Tb_Resultado').on('click', 'tbody td:not(:first-child)', function (e) {
            //VALIDAR DATOS QUE NO SE PODRAN MODIFICAR
            var Cabecera = $('#Tb_Resultado thead tr th').eq($(this).index()).text().trim();
            var texto = "EDITAR " + Cabecera;
            $(".titulo").find('h2').text("");
            $(".titulo").find('h2').text(texto)
            $("#guardadocorrectamente").hide();
            if(Cabecera == "SERVICE PROVIDER" ){
                swal('Ups!', 'No es posible editar este campo.', 'error');
                return false;
            } else if (Cabecera == "ID RESULTADO") {
                swal('Ups!', 'No es posible editar este campo.', 'error');
                return false;
            } else if (Cabecera == "PAIS") {
                swal('Ups!', 'No es posible editar el pais, ya que se carga automaticamente.', 'error');
                return false;
            } else if (Cabecera == "CIUDAD") {
                swal('Ups!', 'No es posible editar la ciudad, ya que se carga automaticamente.', 'error');
                return false;
            } else if (Cabecera == "SERVICE PROVIDER") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "ServiceProvider");
                localStorage.setItem("CampoBase", "ID_SERVICEPROVIDER");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').show();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('#EditarServiceProvider').empty();
                        var optionsAsString = "";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                        }
                        $('#EditarServiceProvider').append(optionsAsString);
                        $('#EditarServiceProvider').selectpicker('refresh');
                    },
                });
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "CONTROLADOR") {
                $('#quitarcontrolador').hide();
                $('#cambiarcontrolador').hide();
                $('#quitar').prop('checked', false);
                $('#cambiar').prop('checked', false);
                $('.EditarCelda').hide();

                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Controlador");
                localStorage.setItem("CampoBase", "ID_CONTROLADOR");

                if ($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(' + $(this).parent().children().index($(this)) + ')').text() != "") {
                    $("#EditarControladorInput").val($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(' + $(this).parent().children().index($(this)) + ')').text());
                    $("#IdResultadoEditarContendor").val($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(24)').text());
                }
                $('#EditarBateriaControlador').val("");
                $('#EditarFechaBateriaControlador').val("");
                $('#EditarCelda').hide();
                $('#EditarControlador').val("");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaControlador').show();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $(".EditarCelda").hide();
                $('#EditarCeldas').trigger('click');
            }else if (Cabecera == "MODEM") {
                $('#quitarmodem').hide();
                $('#cambiarmodem').hide();
                $('#quitarCheckModem').prop('checked', false);
                $('#cambiarCheckModem').prop('checked', false);
                $('.EditarCelda').hide();

                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Modem");
                localStorage.setItem("CampoBase", "ID_MODEM");

                if ($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(' + $(this).parent().children().index($(this)) + ')').text() != "") {
                    $("#EditarControladorInput").val($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(' + $(this).parent().children().index($(this)) + ')').text());
                    $("#IdResultadoEditarContendor").val($('#Tb_Resultado tbody tr:eq(' + $(this).parent().index() + ') td:eq(24)').text());
                }
                $('#EditarBateriaModem').val("");
                $('#EditarFechaBateriaModem').val("");
                $('#EditarCelda').hide();
                $('#EditarModem').val("");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaControlador').hide();
                $('#ColumnaModem').show();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $(".EditarCelda").hide();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "BATERIA") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Bateria");
                localStorage.setItem("CampoBase", "BATERIA");
                $('#EditarBateria').val("");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaBateria').show();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaControlador').hide();
                $('#ColumnaFechacontrolador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "FECHA INSTALACION BATERIA") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "FechaControlador");
                localStorage.setItem("CampoBase", "FECHACONTROLADOR");
                $('#EditarFechaControlador').val("");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaFechacontrolador').show();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "NAVIERA") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Naviera");
                localStorage.setItem("CampoBase", "ID_NAVIERA");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').show();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetNavierasActivas", "Naviera")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('#EditarNaviera').empty();
                        var optionsAsString = ""
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#EditarNaviera').append(optionsAsString);
                        $('#EditarNaviera').selectpicker('refresh');
                    },
                });
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }else if(Cabecera == "DEPOSITO") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Deposito");
                localStorage.setItem("CampoBase", "ID_DEPOSITO");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').show();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                if(@PerfilInterior == 1020 || @PerfilInterior == 1021 || @PerfilInterior == 1022)
                {
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosSP", "Deposito")',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#EditarDeposito').empty();
                            var optionsAsString = ""
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +  " - " + json[i].NombreCiudad +"</option>";
                            }
                            $('#EditarDeposito').append(optionsAsString);
                            $('#EditarDeposito').selectpicker('refresh');
                        },
                    });
                }else{
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetDepositosActivos", "Deposito")',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#EditarDeposito').empty();
                            var optionsAsString = ""
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre +  " - " + json[i].NombreCiudad +"</option>";
                            }
                            $('#EditarDeposito').append(optionsAsString);
                            $('#EditarDeposito').selectpicker('refresh');
                        },
                    });
                }

                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "FECHA ESTIMADA REALIZACION") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "FechaEstimada");
                localStorage.setItem("CampoBase", "FECHAESTIMADA");
                $('#EditarCelda').show();
                $('#EditarFechaEstimada').val("");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').show();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "HORA ESTIMADA REALIZACION") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "HoraEstimada");
                localStorage.setItem("CampoBase", "HORAESTIMADA");
                $('#EditarCelda').show();
                $('#EditarHoraEstimada').val("00:00");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').show();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "COMMODITY") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Commodity");
                localStorage.setItem("CampoBase", "COMMODITY");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').show();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetCommodity", "Commoditie")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('#EditarCommodity').empty();
                        var optionsAsString = ""
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#EditarCommodity').append(optionsAsString);
                        $('#EditarCommodity').selectpicker('refresh');
                    },
                });
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "CONTENEDOR") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Contenedor");
                localStorage.setItem("CampoBase", "CONTENEDOR");
                $('#EditarCelda').hide();
                $('#EditarContenedor').val("");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').show();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "MAQUINARIA") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Maquinaria");
                localStorage.setItem("CampoBase", "ID_MAQUINARIA");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').show();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('#EditarMaquinaria').empty();
                        var optionsAsString = ""
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#EditarMaquinaria').append(optionsAsString);
                        $('#EditarMaquinaria').selectpicker('refresh');
                    },
                });
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "AÑO CONTENEDOR") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "AnoContenedor");
                localStorage.setItem("CampoBase", "ANOCONTENEDOR");
                $('#EditarCelda').show();
                $('#EditarAnoContenedor').val("");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').show();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "TECNICO") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Tecnico");
                localStorage.setItem("CampoBase", "TECNICO");
                $('#EditarCelda').show();
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').show();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                if(@PerfilInterior == 1020 || @PerfilInterior == 1021 || @PerfilInterior == 1022){
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetTecnicosSP", "Usuarios")',
                        async: false,
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#EditarTecnico').empty();
                            var optionsAsString = ""
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                            }
                            $('#EditarTecnico').append(optionsAsString);
                            $('#EditarTecnico').selectpicker('refresh');
                        },
                    });
                }else{
                    $.ajax({
                        type: "POST",
                        url: '@Url.Action("GetTecnicos", "Usuarios")',
                        success: function (response) {
                            var data = [];
                            var json = JSON.parse(response);
                            var cuenta = json.length;
                            $('#EditarTecnico').empty();
                            var optionsAsString = "";
                            //var optionsAsString = "<option value='0'>SELECCIONE TECNICO</option>";
                            for (var i = 0; i < cuenta; i++) {
                                optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                            }
                            $('#EditarTecnico').append(optionsAsString);
                            $('#EditarTecnico').selectpicker('refresh');
                        },
                    });
                }

                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }else if(Cabecera == "TIEMPO LEAKTEST") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Tiempo");
                localStorage.setItem("CampoBase", "TIEMPO");
                $('#EditarCelda').show();
                $('#EditarTiempo').val("00:00");
                $('#ColumnaServiceProvider').hide();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').show();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }else if(Cabecera == "FECHA EJECUCION") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "FechaRealizacion");
                localStorage.setItem("CampoBase", "FECHAREALIZACION");
                $('#EditarCelda').show();
                $('#EditarFechaEjecucion').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').show();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "ESTADO") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Estado");
                localStorage.setItem("CampoBase", "ID_ESTADO");
                $('#EditarCelda').show();
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').show();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("GetEstadoContenedores", "Contenedores")',
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta = json.length;
                        $('#EditarEstado').empty();
                        var optionsAsString = ""
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                        }
                        $('#EditarEstado').append(optionsAsString);
                        $('#EditarEstado').selectpicker('refresh');
                    },
                });
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "SELLO PANEL 1") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "SelloPanel1");
                localStorage.setItem("CampoBase", "SELLOPERNO1");
                $('#EditarCelda').show();
                $('#EditarSelloPanel1').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').show();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "SELLO PANEL 2") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "SelloPanel2");
                localStorage.setItem("CampoBase", "SELLOPERNO2");
                $('#EditarCelda').show();
                $('#EditarSelloPanel2').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').show();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }else if(Cabecera == "SELLO SECURITY") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "SelloSecurity");
                localStorage.setItem("CampoBase", "SELLOTAPA");
                $('#EditarCelda').show();
                $('#EditarSelloSecurity').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').show();
                $('#ColumnaComentario').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            } else if (Cabecera == "COMENTARIO") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "Comentario");
                localStorage.setItem("CampoBase", "COMENTARIO");
                $('#EditarCelda').show();
                $('#EditarComentario').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').show();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').hide();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }else if (Cabecera == "PANEL REUTILIZADO") {
                localStorage.setItem("Fila", $(this).parent().index());
                localStorage.setItem("Columna", $(this).parent().children().index($(this)));
                localStorage.setItem("Campo", "PanelReutilizado");
                localStorage.setItem("CampoBase", "PANELREUTILIZADO");
                $('#EditarCelda').show();
                $('#EditarComentario').val("");
                $('#ColumnaNaviera').hide();
                $('#ColumnaDeposito').hide();
                $('#ColumnaFechaEstimada').hide();
                $('#ColumnaHoraEstimada').hide();
                $('#ColumnaCommodity').hide();
                $('#ColumnaContenedor').hide();
                $('#ColumnaMaquinaria').hide();
                $('#ColumnaAnoContenedor').hide();
                $('#ColumnaTecnico').hide();
                $('#ColumnaTiempo').hide();
                $('#ColumnaFechaEjecucion').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaSelloPanel1').hide();
                $('#ColumnaSelloPanel2').hide();
                $('#ColumnaSelloSecurity').hide();
                $('#ColumnaComentario').hide();
                $('#ColumnaEstado').hide();
                $('#ColumnaPanelReutilizado').show();
                $('#ColumnaBateria').hide();
                $('#ColumnaFechacontrolador').hide();
                $('#ColumnaControlador').hide();
                $(".EditarCelda").show();
                $('#EditarCeldas').trigger('click');
            }
        } );
    });

    function formatDate(date) {
        var fecha = date.substring(0, 10);
        var ano = date.substring(0, 4);
        var mes = date.substring(5, 7);
        var dia = date.substring(8, 10);
        return dia + "/" + mes + "/" + ano;
    }

    $("#EditarCelda").click(function () {
        var fila = localStorage.getItem("Fila");
        var Columna = localStorage.getItem("Columna");
        var dato = $("#Editar" + localStorage.getItem("Campo")).val();

        if (localStorage.getItem("Campo") == "Contenedor") {
            if ($("#EditarContenedor").val() == null) {
                swal('Ups!', 'Debe ingresar un contenedor', 'error');
                return false;
            }
        }else if (localStorage.getItem("Campo") == "Controlador") {
            if ($("#EditarControlador").val() == null || $("#EditarControlador").val()=="") {
                swal('Ups!', 'Debe ingresar un controlador', 'error');
                return false;
            }else if ($("#EditarBateriaControlador").val() == null || $("#EditarBateriaControlador").val()=="") {
                swal('Ups!', 'Debe ingresar una batería al controlador', 'error');
                return false;
            }else if ($("#EditarFechaBateriaControlador").val() == null || $("#EditarFechaBateriaControlador").val()=="") {
                swal('Ups!', 'Debe ingresar una fecha de asociación de batería al controlador', 'error');
                return false;
            }
        } else if (localStorage.getItem("Campo") == "Deposito") {
            if ($("#EditarDeposito").val() == null || $("#EditarDeposito").val() == 0) {
                    swal('Ups!', 'Debe seleccionar un deposito.', 'error');
                    return false;
                }
        } else if (localStorage.getItem("Campo") == "Naviera") {
            if ($("#EditarNaviera").val() == null || $("#EditarNaviera").val() == 0) {
                swal('Ups!', 'Debe seleccionar una naviera.', 'error');
                return false;
            }
        } else if (localStorage.getItem("Campo") == "Maquinaria") {
            if ($("#EditarMaquinaria").val() == null || $("#EditarMaquinaria").val() == 0) {
                swal('Ups!', 'Debe seleccionar una maquinaria.', 'error');
                return false;
            }
        }

        $.ajax({
            type: "POST",
            url: '@Url.Action("EditarCelda", "Leaktest")',
            data: {
                IdResultado: $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(24)').text(),
                Campo: localStorage.getItem("Campo"),
                Valor: dato.toString(),
                Columna: localStorage.getItem("CampoBase"),
                BateriaControlador: $('#EditarBateriaControlador').val(),
                FechaAsociacionBateriaControlador: $('#EditarFechaBateriaControlador').val(),
                BateriaModem: $('#EditarBateriaModem').val(),
                FechaAsociacionBateriaModem: $('#EditarFechaBateriaModem').val(),
            },
            success: function (response) {
                var json = JSON.parse(response);
                if (json.validador == 0) {
                    $("#guardadocorrectamente").show();
                    if ($("#Editar" + localStorage.getItem("Campo") + " option:selected").text() == "") {
                        if (localStorage.getItem("Campo") == "Tiempo") {
                            var time = parseInt(dato.substr(1, 2));
                            if (time < 8) {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(19)').text("REJECTED");
                                if($('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(7)').text()!=""){
                                    $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(255, 0, 0, 0.4)");
                                }
                            } else if(time >= 8){
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(19)').text("APPROVED");
                                if($('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(7)').text()!=""){
                                    $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(0, 255, 0, 0.6)");
                                }
                            }
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        } else if (localStorage.getItem("Campo") == "Contenedor") {
                            if($('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(19)').text()=="APPROVED")
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(0, 255, 0, 0.6)");
                            }else if($('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(19)').text("REJECTED"))
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(255, 0, 0, 0.4)");
                            }else if($('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(19)').text("VISUALLY REJECTED"))
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(255, 0, 0, 0.4)");
                            }
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        }else if (localStorage.getItem("Campo") == "Controlador") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(11)').text($('#EditarBateriaControlador').val());
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(12)').text($('#EditarFechaBateriaControlador').val());
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        }else if (localStorage.getItem("Campo") == "Modem") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(14)').text($('#EditarBateriaModem').val());
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(15)').text($('#EditarFechaBateriaModem').val());
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        } else if (localStorage.getItem("Campo") == "Bateria") {
                            $('#Tb_Resultado tbody tr:eq('+fila+') td:eq(12)').text(getCurrentDate());
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        }else {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text(dato);
                        }
                    } else {
                        if (localStorage.getItem("Campo") == "ServiceProvider") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if(localStorage.getItem("Campo") == "Naviera"){
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if (localStorage.getItem("Campo") == "Deposito") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if (localStorage.getItem("Campo") == "Commodity") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        }  else if (localStorage.getItem("Campo") == "Maquinaria") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if (localStorage.getItem("Campo") == "Tecnico") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if (localStorage.getItem("Campo") == "FechaRealizacion") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        } else if (localStorage.getItem("Campo") == "Estado") {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                            var AuxEstado = $("#Editar" + localStorage.getItem("Campo") + " option:selected").text();
                            if(AuxEstado=="APPROVED" && $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(7)').text()!="")
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(0, 255, 0, 0.6)");
                            } else if (AuxEstado == "CANCELLED")
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(255, 255, 0)");
                            } else if ((AuxEstado == "REJECTED" || AuxEstado == "VISUALLY REJECTED") && $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(7)').text()!="")
                            {
                                $('#Tb_Resultado tbody tr:eq(' + fila + ') td').css("background-color", "rgba(255, 0, 0, 0.4)");
                            }
                        } else
                        {
                            $('#Tb_Resultado tbody tr:eq(' + fila + ') td:eq(' + Columna + ')').text($("#Editar" + localStorage.getItem("Campo") + " option:selected").text());
                        }
                    }
                }
            }
        });

        $('.closeCelda').trigger('click');
    });


    $("#LeaktestAgrega").click(function () {
        if ($("#DepositoAgregar").val() != "0") {
            if ($("#NavieraAgregar").val() != "0") {
                if($("#TiempoLeaktestAgregar").val()!="")
                {
                    var dato=$("#TiempoLeaktestAgregar").val();
                    var time = parseInt(dato.substr(1, 2));
                    if (time < 8) {
                        var state="1";
                    } else {
                        var state="0";
                    }
                }else
                {
                    var state="";
                }


                var auxinfo = { Estado: state, AnoContenedor: $("#AnoContenedorAgregar").val(), Tiempo: $("#TiempoLeaktestAgregar").val(), FechaEjecucion: $("#FechaEjecucionAgregar").val(), Tecnico: $("#TecnicoAgregar").val(), Commodity: $("#CommodityAgregar").val(), ServiceProvider: $("#ServiceProviderAgregar").val(), Naviera: $("#NavieraAgregar").val(), Deposito: $("#DepositoAgregar").val(), FechaEstimada: $("#FechaEstimadaAgregar").val(), HoraEstimada: $("#HoraEstimadaAgregar").val(), Maquinaria: $("#Maquinaria").val(), Cantidad: $("#contenedores").val() };

                if ($("#div_ingreso1").is(':visible')) {
                    var auxinfo = { Estado: state, AnoContenedor: $("#AnoContenedorAgregar").val(), Tiempo: $("#TiempoLeaktestAgregar").val(), FechaEjecucion: $("#FechaEjecucionAgregar").val(), Tecnico: $("#TecnicoAgregar").val(), Commodity: $("#CommodityAgregar").val(), ServiceProvider: $("#ServiceProviderAgregar").val(), Naviera: $("#NavieraAgregar").val(), Deposito: $("#DepositoAgregar").val(), FechaEstimada: $("#FechaEstimadaAgregar").val(), HoraEstimada: $("#HoraEstimadaAgregar").val(), Maquinaria: $("#Maquinaria").val(), Cantidad: $("#contenedores").val(), Maquinaria1: $("#Maquinaria1").val(), Cantidad1: $("#contenedores1").val() };
                }

                if ($("#div_ingreso2").is(':visible')) {
                    var auxinfo = { Estado: state, AnoContenedor: $("#AnoContenedorAgregar").val(), Tiempo: $("#TiempoLeaktestAgregar").val(), FechaEjecucion: $("#FechaEjecucionAgregar").val(), Tecnico: $("#TecnicoAgregar").val(), Commodity: $("#CommodityAgregar").val(), ServiceProvider: $("#ServiceProviderAgregar").val(), Naviera: $("#NavieraAgregar").val(), Deposito: $("#DepositoAgregar").val(), FechaEstimada: $("#FechaEstimadaAgregar").val(), HoraEstimada: $("#HoraEstimadaAgregar").val(), Maquinaria: $("#Maquinaria").val(), Cantidad: $("#contenedores").val(), Maquinaria1: $("#Maquinaria1").val(), Cantidad1: $("#contenedores1").val(), Maquinaria2: $("#Maquinaria2").val(), Cantidad2: $("#contenedores2").val() };
                }

                if ($("#div_ingreso3").is(':visible')) {
                    if ($("#Maquinaria3").val() != 0 && $("#contenedores3").val() != 0) {
                        var auxinfo = { Estado: state, AnoContenedor: $("#AnoContenedorAgregar").val(), Tiempo: $("#TiempoLeaktestAgregar").val(), FechaEjecucion: $("#FechaEjecucionAgregar").val(), Tecnico: $("#TecnicoAgregar").val(), Commodity: $("#CommodityAgregar").val(), ServiceProvider: $("#ServiceProviderAgregar").val(), Naviera: $("#NavieraAgregar").val(), Deposito: $("#DepositoAgregar").val(), FechaEstimada: $("#FechaEstimadaAgregar").val(),  HoraEstimada: $("#HoraEstimadaAgregar").val(),  Maquinaria: $("#Maquinaria").val(), Cantidad: $("#contenedores").val(), Maquinaria1: $("#Maquinaria1").val(), Cantidad1: $("#contenedores1").val(), Maquinaria2: $("#Maquinaria2").val(), Cantidad2: $("#contenedores2").val(), Maquinaria3: $("#Maquinaria3").val(), Cantidad3: $("#contenedores3").val() };
                    }else {
                        swal('Ups!', '<span class="alerta" key="MaquinariaCantidadLeaktest"> Campo Maquinaria y Cantidad son Obligatorios y no pueden ser 0.</span>', 'error');
                        return;
                    }
                }

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("AgregarLeaktestSP", "Leaktest")',
                    data: auxinfo,
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            }else
            {
                swal('Ups!', '<span>Debe ingresar una Naviera</span>', 'warning');
                return false;
            }
        }else
        {
            swal('Ups!', '<span>Debe ingresar un deposito</span>', 'warning');
            return false;
        }
    });

    $("#AgregarResultadoLeaktest").click(function () {

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#ServiceProviderAgregar').empty();
                var optionsAsString = ""
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].IdServiceProvider!=0)
                    {
                        if (json[i].IdServiceProvider=="@SP" && (@PerfilInterior == 1020 || @PerfilInterior == 1021 || @PerfilInterior == 1022))
                        {
                            optionsAsString += "<option selected value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";

                        } else
                        {
                            optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                        }
                    }
                }
                $('#ServiceProviderAgregar').append(optionsAsString);
                $('#ServiceProviderAgregar').selectpicker('refresh');
                if(@PerfilInterior == 1020 || @PerfilInterior == 1021 || @PerfilInterior == 1022)
                {
                    $('#ServiceProviderAgregar').attr('disabled', 'disabled');
                }
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCommodity", "Commoditie")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#CommodityAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Commodity</option>";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id !=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                }
                $('#CommodityAgregar').append(optionsAsString);
                $('#CommodityAgregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetNavierasActivas", "Naviera")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#NavieraAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Naviera</option>";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id !=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }

                }
                $('#NavieraAgregar').append(optionsAsString);
                $('#NavieraAgregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetPaisesSP", "Paises")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#PaisAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Pais</option>";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id !=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                }
                $('#PaisAgregar').append(optionsAsString);
                $('#PaisAgregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetCiudadesSP", "Ciudad")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#CiudadAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Ciudad</option>";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id !=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                    }
                }
                $('#CiudadAgregar').append(optionsAsString);
                $('#CiudadAgregar').selectpicker('refresh');
            },
        });
        $.ajax({
            type: "POST",
            url: '@Url.Action("GetDepositosSP", "Deposito")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#DepositoAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Deposito</option>";
                for (var i = 0; i < cuenta; i++) {
                    if(json[i].Id !=0)
                    {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad  + "</option>";
                    }
                }
                $('#DepositoAgregar').append(optionsAsString);
                $('#DepositoAgregar').selectpicker('refresh');
            },
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("GetTecnicosSP", "Usuarios")',
            async: false,
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#TecnicoAgregar').empty();
                var optionsAsString = "";
                optionsAsString+="<option value='0'>Seleccione Tecnico</option>";
                for (var i = 0; i < cuenta; i++) {
                    optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                }
                $('#TecnicoAgregar').append(optionsAsString);
                $('#TecnicoAgregar').selectpicker('refresh');
            },
        });



        $('#AgregarCeldas').trigger('click');

    });

    $("#CancelarLeaktest").click(function ()
    {
        var Leaktest = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                if ($(this).find("td:eq(19)").html() != "CANCELLED") {
                        Leaktest.push($(this).find("td:eq(24)").html());
                } else {
                    swal('Ups!', 'Solo puede cancelar Leak Test con estado distinto a CANCELADO.', 'error');
                    return false;
                }
            } else {
                count = count + 1;
                if (count == cuenta) {
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        if (Leaktest.length != 0) {
            localStorage.setItem("Leaktest", JSON.stringify(Leaktest));
            Lista = JSON.parse(localStorage.getItem("Leaktest"));
            swal({
                title: 'Advertencia',
                text: '¿Estas seguro que deseas cancelar ' + Lista.length + ' Leak Test?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                var Lista = JSON.parse(localStorage.getItem("Leaktest"));
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("CancelarLeaktestSP", "Leaktest")',
                    data: {
                        Leaktest: Lista
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            })
        }
    });

    $("#DescancelarLeaktest").click(function () {
        var Leaktest = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                if ($(this).find("td:eq(19)").html() == "CANCELLED") {
                        Leaktest.push($(this).find("td:eq(24)").html());
                } else {
                    swal('Ups!', 'Solo puede descancelar Leak Test con estado CANCELADO.', 'error');
                    return false;
                }

            } else {
                count = count + 1;
                if (count == cuenta) {
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        if (Leaktest.length != 0) {
            localStorage.setItem("Leaktest", JSON.stringify(Leaktest));
            Lista = JSON.parse(localStorage.getItem("Leaktest"));
            swal({
                title: 'Advertencia',
                text: '¿Estas seguro que deseas descancelar ' + Lista.length + ' Leak Test?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                var Lista = JSON.parse(localStorage.getItem("Leaktest"));
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("DescancelarLeaktestSP", "Leaktest")',
                    data: {
                        Leaktest: Lista
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            })
        }
    });

    $("#EliminarLeaktest").click(function () {
         var Leaktest = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                Leaktest.push($(this).find("td:eq(24)").html());

            } else {
                count = count + 1;
                if (count == cuenta) {
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        if (Leaktest.length != 0) {
            localStorage.setItem("Leaktest", JSON.stringify(Leaktest));
            Lista = JSON.parse(localStorage.getItem("Leaktest"));
            swal({
                title: 'Advertencia',
                text: '¿Estas seguro que deseas eliminar ' + Lista.length + ' Leak Test?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                var Lista = JSON.parse(localStorage.getItem("Leaktest"));
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("EliminarLeaktestSP", "Leaktest")',
                    data: {
                        Leaktest: Lista
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            })
        }
    });

    $("#LeaktestReport").click(function () {
        var Leaktest = [];
        var Solicitudes = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;
        var leak = "";

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                leak = $(this).find("td:eq(1)").html();
                var validar = ValidarSolicitudes(Solicitudes, leak);
                if (validar == 0) {
                    Solicitudes.push(leak);
                } else {
                    Solicitudes = [];
                    swal('Ups!', 'No puede generar Leak Test Report de solicitudes distintas.', 'error');
                    return false;
                }
            } else {
                count = count + 1;
                if (count == cuenta) {
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        var IdReserva = leak;
        if(IdReserva != ""){
            var url = '@Url.Action("GenerarLeaktestReportSP", "Leaktest")?Solicitud=' + leak;
            window.location.href = url;
        }
    });

    function ValidarSolicitudes(Solicitudes, leak) {
        var count = Solicitudes.length;
        var i = 0;
        if (count != 0) {
            while (i != count) {
                if (leak == Solicitudes[i]) {
                    i = i + 1;
                } else {
                    return 1
                }
            }
            return 0;
        } else {
            return 0;
        }
    }

    function ValidarSP(SP, serviceProvider) {
        var count = SP.length;
        var i = 0;
        if (count != 0) {
            while (i != count) {
                if (serviceProvider == SP[i]) {
                    i = i + 1;
                } else {
                    return 1
                }
            }
            return 0;
        } else {
            return 0;
        }
    }

    function ValidarDepositos(Depositos, deposito) {
        var count = Depositos.length;
        var i = 0;
        if (count != 0) {
            while (i != count) {
                if (deposito == Depositos[i]) {
                    i = i + 1;
                } else {
                    return 1
                }
            }
            return 0;
        } else {
            return 0;
        }
    }

    function ValidarNavieras(Navieras, naviera) {
        var count = Navieras.length;
        var i = 0;
        if (count != 0) {
            while (i != count) {
                if (naviera == Navieras[i]) {
                    i = i + 1;
                } else {
                    return 1
                }
            }
            return 0;
        } else {
            return 0;
        }
    }

    $("#ValidarLeaktest").click(function () {
        var SP = [];
        var Depositos = [];
        var Navieras = [];
        var Leaktest = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;
        var sp_solicitud = "";
        var deposito_solicitud = "";
        var naviera_solicitud = "";

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                var serviceProvider = $(this).find("td:eq(1)").html();
                sp_solicitud = serviceProvider;
                var deposito = $(this).find("td:eq(5)").html();
                deposito_solicitud = deposito;
                var naviera = $(this).find("td:eq(2)").html();
                naviera_solicitud = naviera;

                var validar = ValidarSP(SP, serviceProvider);
                var validar2 = ValidarDepositos(Depositos, deposito);
                var validar3 = ValidarNavieras(Navieras, naviera);

                if (validar == 0 && validar2 == 0 && validar3 == 0) {
                    SP.push(serviceProvider);
                    Depositos.push(deposito);
                    Navieras.push(naviera);
                    Leaktest.push($(this).find("td:eq(24)").html());
                } else {
                    Leaktest = [];
                    swal('Ups!', 'No puede validar Leak Test con datos Service Providers, Navieras o Depositos distintos.', 'error');
                    return false;
                }
            } else {
                count = count + 1;
                if (count == cuenta) {
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });


        if (Leaktest.length != 0) {
            localStorage.setItem("Leaktest", JSON.stringify(Leaktest));
            Lista = JSON.parse(localStorage.getItem("Leaktest"));
            swal({
                title: 'Advertencia',
                text: '¿Estas seguro que deseas validar ' + Lista.length + ' Leak Test?',
                type: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                var Lista = JSON.parse(localStorage.getItem("Leaktest"));
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("ValidarLeaktestSP", "Leaktest")',
                    data: {
                        Leaktest: Lista,
                        SP: sp_solicitud,
                        Deposito: deposito_solicitud,
                        Naviera: naviera_solicitud
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        if (json.validador == 0) {
                            var aux = 'success';
                        } else {
                            var aux = 'warning';
                        }
                        swal({
                            title: '',
                            text: json.Mensaje,
                            type: aux,
                            showCancelButton: false,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Aceptar'
                        }).then((result) => {
                            location.reload();
                        })
                    }
                });
            })
        }
    });

        $("#EditarContenedor").blur(function() {
            if ($("#EditarContenedor").val() == "") {
                $("#EditarCelda").hide();
            }
        });


    $("#ValidarContenedor").click(function () {
        if ($("#EditarContenedor").val() != "") {

            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarNumeroContenedor", "Contenedores")',
                data: { containerNumberToCheck: $("#EditarContenedor").val() },
                success: function (response) {
                    if (response == "False") {
                        swal('Ups!', '<span>Número contenedor inválido.</span>', 'warning');
                        $("#EditarContenedor").val("");
                        return false;
                    } else {
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("ValidarContenedor", "Controlador")',
                            data: { Contenedor: $("#EditarContenedor").val() },
                            async: false,
                            success: function (response) {
                                var json = JSON.parse(response);
                                if (json.validador == 0 || json.validador == 2 || json.validador == 3 || json.validador == 5 || json.validador == 6 || json.validador==7) {
                                    swal('Válido!', '<span>Número contenedor válido.</span>', 'success');
                                    $("#EditarCelda").show();
                                } else {
                                    swal({
                                        title: '',
                                        text: json.Mensaje,
                                        type: 'warning',
                                        showCancelButton: false,
                                        confirmButtonColor: '#3085d6',
                                        cancelButtonColor: '#d33',
                                        confirmButtonText: 'Aceptar'
                                    }).then((result) => {

                                    })
                                }
                            },
                        });
                    }
                }
            });


        }
    });


    $("#EditarResultadoLeaktest").click(function () {
        var Naves = [];
        var Leaktest = [];
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                Leaktest.push($(this).find("td:eq(24)").html());
            } else {
                count = count + 1;
                if (count == cuenta) {
                    Leaktest = [];
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        if (Leaktest.length != 0) {
            localStorage.setItem("Leaktest", JSON.stringify(Leaktest));
            $("#columnaseditarLeaktest").val("0");
            $('#columnaseditarLeaktest').selectpicker('refresh');
            $("#ColumnaServiceProviderMasiva").hide();
            $("#ColumnaNavieraMasiva").hide();
            $("#ColumnaDepositoMasiva").hide();
            $("#ColumnaFechaEstimadaMasiva").hide();
            $("#ColumnaHoraEstimadaMasiva").hide();
            $("#ColumnaCommodityMasiva").hide();
            $("#ColumnaMaquinariaMasiva").hide();
            $("#ColumnaAnoContenedorMasiva").hide();
            $("#ColumnaTecnicoMasiva").hide();
            $("#ColumnaTiempoMasiva").hide();
            $("#ColumnaFechaEjecucionMasiva").hide();
            $("#ColumnaEstadoMasiva").hide();
            $("#ColumnaComentarioMasiva").hide();
            $("#ColumnaPanelReutilizadoMasiva").hide();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetServiceProviderActivas", "ServiceProvider")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarServiceProviderMasiva').empty();
                    var optionsAsString = "";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdServiceProvider + "'>" + json[i].NombreServiceProvider + "</option>";
                    }
                    $('#EditarServiceProviderMasiva').append(optionsAsString);
                    $('#EditarServiceProviderMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetNavierasActivas", "Naviera")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarNavieraMasiva').empty();
                    var optionsAsString = ""
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#EditarNavieraMasiva').append(optionsAsString);
                    $('#EditarNavieraMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosSP", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarDepositoMasiva').empty();
                    var optionsAsString = "";
                    optionsAsString = "<option value='0'>W/O DATA</option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                    }
                    $('#EditarDepositoMasiva').append(optionsAsString);
                    $('#EditarDepositoMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCommodity", "Commoditie")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarCommodityMasiva').empty();
                    var optionsAsString = ""
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#EditarCommodityMasiva').append(optionsAsString);
                    $('#EditarCommodityMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetMaquinariasActivas", "Maquinaria")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarMaquinariaMasiva').empty();
                    var optionsAsString = ""
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#EditarMaquinariaMasiva').append(optionsAsString);
                    $('#EditarMaquinariaMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTecnicos", "Usuarios")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarTecnicoMasiva').empty();
                    var optionsAsString = ""
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdTecnico + "'>" + json[i].NombreTecnico + "</option>";
                    }
                    $('#EditarTecnicoMasiva').append(optionsAsString);
                    $('#EditarTecnicoMasiva').selectpicker('refresh');
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetEstadoContenedores", "Contenedores")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    $('#EditarEstadoMasiva').empty();
                    var optionsAsString = ""
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + "</option>";
                    }
                    $('#EditarEstadoMasiva').append(optionsAsString);
                    $('#EditarEstadoMasiva').selectpicker('refresh');
                },
            });
            $('#EditarLeaktestMasivaTrigger').trigger('click');
        }
    });


    $("#columnaseditarLeaktest").change(function () {
        $("#ColumnaServiceProviderMasiva").hide();
        $("#ColumnaNavieraMasiva").hide();
        $("#ColumnaDepositoMasiva").hide();
        $("#ColumnaFechaEstimadaMasiva").hide();
        $("#ColumnaHoraEstimadaMasiva").hide();
        $("#ColumnaCommodityMasiva").hide();
        $("#ColumnaMaquinariaMasiva").hide();
        $("#ColumnaAnoContenedorMasiva").hide();
        $("#ColumnaTecnicoMasiva").hide();
        $("#ColumnaTiempoMasiva").hide();
        $("#ColumnaFechaEjecucionMasiva").hide();
        $("#ColumnaEstadoMasiva").hide();
        $("#ColumnaComentarioMasiva").hide();
        $("#ColumnaPanelReutilizadoMasiva").hide();

        if ($("#columnaseditarLeaktest").val() == "1") {
            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");
            $("#ColumnaServiceProviderMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "2") {
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaNavieraMasiva").show();


        } else if ($("#columnaseditarLeaktest").val() == "3") {
            $("#EditarDepositoMasiva").val("0");

            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaDepositoMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "4") {
            $("#EditarFechaEstimadaMasiva").val("");

            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaFechaEstimadaMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "5") {
            $("#EditarHoraEstimadaMasiva").val("");

            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaHoraEstimadaMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "6") {
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaCommodityMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "7") {

            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaMaquinariaMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "8") {
            $("#EditarAnoContenedorMasiva").val("");
            $("#ColumnaAnoContenedorMasiva").show();
            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');
            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
        } else if ($("#columnaseditarLeaktest").val() == "9") {
            $("#EditarTecnicoMasiva").val("0");
            $("#ColumnaTecnicoMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "10") {
            $("#EditarTiempoMasiva").val("");

            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaTiempoMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "11") {
            $("#EditarFechaEjecucionMasiva").val("");

            $("#EditarServiceProviderMasiva").val("0");
            $('#EditarServiceProviderMasiva').selectpicker('refresh');

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaFechaEjecucionMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "12") {
            $("#EditarEstadoMasiva").val("");

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaEstadoMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "13") {
            $("#EditarComentarioMasiva").val("");

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaComentarioMasiva").show();
        } else if ($("#columnaseditarLeaktest").val() == "14") {
            $("#EditarPanelReutilizadoMasiva").val("");

            $("#EditarNavieraMasiva").val("0");
            $('#EditarNavieraMasiva').selectpicker('refresh');
            $("#EditarDepositoMasiva").val("0");
            $('#EditarDepositoMasiva').selectpicker('refresh');
            $("#EditarFechaEstimadaMasiva").val("");
            $("#EditarHoraEstimadaMasiva").val("");
            $("#EditarCommodityMasiva").val("0");
            $('#EditarCommodityMasiva').selectpicker('refresh');
            $("#EditarMaquinariaMasiva").val("0");
            $('#EditarMaquinariaMasiva').selectpicker('refresh');
            $("#EditarTecnicoMasiva").val("0");
            $('#EditarTecnicoMasiva').selectpicker('refresh');
            $("#EditarTiempoMasiva").val("");
            $("#EditarFechaRealizacionMasiva").val("");
            $("#EditarEstadoMasiva").val("0");
            $('#EditarEstadoMasiva').selectpicker('refresh');
            $("#EditarComentarioMasiva").val("");
            $("#EditarPanelReutilizadoMasiva").val("0");
            $('#EditarPanelReutilizadoMasiva').selectpicker('refresh');
            $("#EditarAnoContenedorMasiva").val("");

            $("#ColumnaPanelReutilizadoMasiva").show();
        }
    });

    $("#ColumnaEstadoMasiva").change(function () {
        $("#ColumnaTiempoMasiva").hide();
        if ($("#EditarEstadoMasiva").val() == "1")
        {
            $("#ColumnaTiempoMasiva").show();
        }

    });

    //EDITAR DATOS LEAKTEST MASIVO
    $("#EditarDatosMasiva").click(function () {

        var time = $("#EditarTiempoMasiva").val();
        var min = time.substring(1, 2);
        var minutos = parseInt(min);
        if ($("#columnaseditarLeaktest").val() == "1" && $("#EditarServiceProviderMasiva").val() == "0") {
            swal('Ups!', 'Campo Service Provider Obligatorio.', 'error');
            return false;
        } else if ($("#columnaseditarLeaktest").val() == "2" && $("#EditarNavieraMasiva").val() == "0") {
            swal('Ups!', 'Campo Naviera Obligatorio.', 'error');
            return false;
        } else if ($("#columnaseditarLeaktest").val() == "3" && $("#EditarDepositoMasiva").val() == "0") {
            swal('Ups!', 'Campo Deposito Obligatorio.', 'error');
            return false;
        } else if ($("#EditarEstadoMasiva").val() == "1" && minutos>=8) {
            swal('Ups!', 'Tiempo no puede ser superior o igual a 8.', 'error');
            return false;
        }

        var Leaktest = JSON.parse(localStorage.getItem("Leaktest"));

        $.ajax({
            type: "POST",
            url: '@Url.Action("EdicionMasivaLeaktest", "Leaktest")',
            data: {
                Leaktest: Leaktest,
                ServiceProvider: $("#EditarServiceProviderMasiva").val(),
                Naviera: $("#EditarNavieraMasiva").val(),
                Deposito: $("#EditarDepositoMasiva").val(),
                FechaEstimada: $("#EditarFechaEstimadaMasiva").val(),
                HoraEstimada: $("#EditarHoraEstimadaMasiva").val(),
                Commodity: $("#EditarCommodityMasiva").val(),
                Maquinaria: $("#EditarMaquinariaMasiva").val(),
                AnoContenedor: $("#EditarAnoContenedorMasiva").val(),
                Tecnico: $("#EditarTecnicoMasiva").val(),
                Tiempo: $("#EditarTiempoMasiva").val(),
                FechaEjecucion: $("#EditarFechaRealizacionMasiva").val(),
                Estado: $("#EditarEstadoMasiva").val(),
                Comentario: $("#EditarComentarioMasiva").val(),
                PanelReutilizado: $("#EditarPanelReutilizadoMasiva").val()
            },
            success: function (response) {
                var json = JSON.parse(response);
                if (json.validador == 0) {
                    var aux = 'success';
                } else {
                    var aux = 'warning';
                }
                swal({
                    title: '',
                    text: json.Mensaje,
                    type: aux,
                    showCancelButton: false,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Aceptar'
                }).then((result) => {
                    location.reload();
                })
            }
        });
    });
    //EDITAR DATOS LEAKTEST MASIVO

    function MostrarAgregarLeaktest() {
        if ($("#Maquinaria").val() != 0 && $("#contenedores").val() != 0) {
            $("#div_ingreso1").show();
        } else {
            swal('Ups!', '<span class="alerta" key="MaquinariaCantidadLeaktest"> Campos Maquinaria y Cantidad son Obligatorios y no pueden ser 0.</span>', 'error');
            return;
        }
    }

    function MostrarAgregarLeaktest2() {
        if ($("#Maquinaria1").val() != 0 && $("#contenedores1").val() != 0) {
            $("#div_ingreso2").show();
        } else {
            swal('Ups!', '<span class="alerta" key="MaquinariaCantidadLeaktest"> Campos Maquinaria y Cantidad son Obligatorios y no pueden ser 0.</span>', 'error');
            return;
        }
    }

    function MostrarAgregarLeaktest3() {
        if ($("#Maquinaria2").val() != 0 && $("#contenedores2").val() != 0) {
            $("#div_ingreso3").show();
        } else {
            swal('Ups!', '<span class="alerta" key="MaquinariaCantidadLeaktest"> Campos Maquinaria y Cantidad son Obligatorios y no pueden ser 0.</span>', 'error');
            return;
        }
    }

    function OcultarAgregarLeaktest2() {

        $("#div_ingreso1").hide();
    }

    function OcultarAgregarLeaktest3() {

        $("#div_ingreso2").hide();
    }

    function OcultarAgregarLeaktest4() {

        $("#div_ingreso3").hide();
    }

    //OBTENER CIUDADES A PARTIR DE PAIS SELECCIONADO
    $("#PaisAgregar").change(function () {
        if ($("#PaisAgregar").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesPais", "Ciudad")',
                data: { IdPais: $("#PaisAgregar").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    var optionsAsString1 = "";
                    if (cuenta != 0) {
                        $('#CiudadAgregar').empty();
                        optionsAsString += "<option value='0'></option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                        }
                        $('#CiudadAgregar').append(optionsAsString);
                        $('#CiudadAgregar').selectpicker('refresh');
                    } else {
                        $('#CiudadAgregar').empty();
                        optionsAsString += "<option value='0'></option>";
                        $('#CiudadAgregar').append(optionsAsString);
                        $('#CiudadAgregar').selectpicker('refresh');
                        $('#DepositoAgregar').empty();
                        optionsAsString1 += "<option value='0'></option>";
                        $('#DepositoAgregar').append(optionsAsString1);
                        $('#DepositoAgregar').selectpicker('refresh');
                    }
                },
            });
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositoPais", "Deposito")',
                data: { IdPais: $("#PaisAgregar").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    if (cuenta != 0) {
                        $('#DepositoAgregar').empty();
                        optionsAsString += "<option value='0'></option>";
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                        }
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    } else {
                        $('#DepositoAgregar').empty();
                        optionsAsString += "<option value='0'></option>";
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    }
                },
            });
        } else {
            $('#CiudadAgregar').empty();
            $('#DepositoAgregar').empty();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetCiudadesActivas", "Ciudad")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'></option>";
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombrePais + "</option>";
                    }
                    $('#CiudadAgregar').append(optionsAsString);
                    $('#CiudadAgregar').selectpicker('refresh');
                },
            });
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'></option>";
                    if (cuenta != 0) {
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                        }
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    }
                },
            });
        }
    });
    //OBTENER CIUDADES A PARTIR DE PAIS SELECCIONADO

    //OBTENER DEPOSITOS A PARTIR DE CIUDAD SELECCIONADA
    $("#CiudadAgregar").change(function () {
        if ($("#CiudadAgregar").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoCiudad", "Ciudad")',
                data: { IdCiudad: $("#CiudadAgregar").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#PaisAgregar").val(json[0].IdPais);
                        $("#PaisAgregar").selectpicker('refresh');
                    }
                },
            });

            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositoCiudad", "Deposito")',
                data: { IdCiudad: $("#CiudadAgregar").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    $('#DepositoAgregar').empty();
                    optionsAsString += "<option value='0'></option>";
                    if (cuenta != 0) {
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                        }
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    } else {
                        $('#DepositoAgregar').empty();
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    }
                },
            });
        } else {
            $('#DepositoAgregar').empty();
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetDepositosActivos", "Deposito")',
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    var optionsAsString = "";
                    optionsAsString += "<option value='0'></option>";
                    if (cuenta != 0) {
                        for (var i = 0; i < cuenta; i++) {
                            optionsAsString += "<option value='" + json[i].Id + "'>" + json[i].Nombre + " - " + json[i].NombreCiudad + "</option>";
                        }
                        $('#DepositoAgregar').append(optionsAsString);
                        $('#DepositoAgregar').selectpicker('refresh');
                    }
                },
            });
        }
    });
    //OBTENER DEPOSITOS A PARTIR DE CIUDAD SELECCIONADA

    $("#DepositoAgregar").change(function () {
        if ($("#DepositoAgregar").val() != "0") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetInfoDeposito", "Deposito")',
                data: { IdDeposito: $("#DepositoAgregar").val() },
                success: function (response) {
                    var data = [];
                    var json = JSON.parse(response);
                    var cuenta = json.length;
                    if (cuenta != 0) {
                        $("#PaisAgregar").val(json[0].IdPais);
                        $("#PaisAgregar").selectpicker('refresh');
                        $("#CiudadAgregar").val(json[0].IdCiudad);
                        $("#CiudadAgregar").selectpicker('refresh');
                    }
                },
            });
        }
    });
    //CARGAR DATOS SEGUN DEPOSITO

    $("#HistoricoModificaciones").click(function () {
        var count = 0;
        var cuenta = $("#Tb_Resultado tbody tr").length;
        var resultado=0;

        var table1 = $('#Tb_Historico').DataTable();
        table1.destroy();

        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                resultado=$(this).find("td:eq(24)").html();
            }else{
                count = count + 1;
            }
        });

        if(count!=cuenta){
            if(count<cuenta-1)
            {
                swal('Ups!', 'No puedes visualizar mas de un resultado de Leak Test', 'error');
                return false;
            }else
            {
                $.ajax({
                    type: "POST",
                    async: false,
                    url: '@Url.Action("GetAllHistoricoResultadosSP", "Leaktest")',
                    data: {
                        ResultadosSP : resultado
                    },
                    success: function (response) {
                        var data = [];
                        var json = JSON.parse(response);
                        var cuenta2 = json.length;
                        var validacion = "";

                        for (var i = 0 ; i < cuenta2 ; i++) {

                            var fechaRealizacion='';
                            var fechaControlador="";
                            var preValidacionTecnica="NO";

                            if(json[i].FechaRealizacion!=null)
                            {
                                fechaRealizacion=formatDate(json[i].FechaRealizacion);
                            }

                            if(json[i].FechaControlador!=null)
                            {
                                fechaControlador=formatDate(json[i].FechaControlador);
                            }

                            if(json[i].PreValidacionTecnica!=0)
                            {
                                preValicacionTecnica="SI";
                            }

                            data.push([ formatDate(json[i].FechaAccion),
                                        json[i].UsuarioAccion,
                                        json[i].NombreServiceProvider,
                                        json[i].Naviera,
                                        json[i].NombrePais,
                                        json[i].NombreCiudad,
                                        json[i].NombreDeposito,
                                        json[i].Commodity,
                                        json[i].Contenedor,
                                        json[i].NombreMaquinaria,
                                        json[i].Ano,
                                        json[i].Controlador,
                                        json[i].Bateria,
                                        fechaControlador,
                                        json[i].NombreUsuario,
                                        json[i].Tiempo,
                                        fechaRealizacion,
                                        json[i].EstadoLeaktest,
                                        json[i].Selloperno1,
                                        json[i].Selloperno2,
                                        json[i].Sellotapa,
                                        json[i].Comentario,
                                        json[i].IdResultado,
                                        json[i].Validado,
                                        json[i].PanelReutilizado,
                                        preValidacionTecnica
                            ])
                        }

                        $('#Tb_Historico tfoot th').each(function (i) {
                            var title = $('#Tb_Historico thead th').eq($(this).index()).text();
                            if (lenguaje == "es") {
                                $(this).html('<input class="form-control" type="text" placeholder="FILTRAR"/>');
                            } else {

                                $(this).html('<input class="form-control" type="text" placeholder="FILTER" />');
                            }
                        });

                        var table = $('#Tb_Historico').DataTable({
                            data: data,
                        });

                        table.columns().every(function () {
                            var that = this;
                            $('input', this.footer()).on('keyup change', function () {
                                if (that.search() !== this.value) {
                                    that
                                        .search(this.value)
                                        .draw();
                                }
                            });
                        });
                    }
                });

                $('#HistoricoControlador').trigger('click');
            }
        }else{
            swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
            return false;
        }
    });

    $('#quitar').change(function () {
        if ($(this).prop("checked")) {
            $('#quitarcontrolador').show();
            $('#cambiarcontrolador').hide();
            $('#cambiar').prop('checked', false);
            $('.EditarCelda').hide();
            $("#EditarControladorInput").css("background-color", "rgba(255, 0, 0, 0");
            return;
        } else {
            $('#quitarcontrolador').hide();
            return;
        }
    });

    $('#cambiar').change(function () {
        if ($(this).prop("checked")) {
            $('#cambiarcontrolador').show();
            $('#quitarcontrolador').hide();
            $('#quitar').prop('checked', false);
            $('.EditarCelda').show();
            return;
        } else {
            $('#cambiarcontrolador').hide();
            $('.EditarCelda').hide();
            return;
        }
    });

    $('#quitarCheckModem').change(function () {
        if ($(this).prop("checked")) {
            $('#quitarmodem').show();
            $('#cambiarmodem').hide();
            $('#cambiarCheckModem').prop('checked', false);
            $('.EditarCelda').hide();
            $("#EditarModemInput").css("background-color", "rgba(255, 0, 0, 0");
            return;
        } else {
            $('#quitarmodem').hide();
            return;
        }
    });

    $('#cambiarCheckModem').change(function () {
        if ($(this).prop("checked")) {
            $('#cambiarmodem').show();
            $('#quitarmodem').hide();
            $('#quitarCheckModem').prop('checked', false);
            $('.EditarCelda').show();
            return;
        } else {
            $('#cambiarmodem').hide();
            $('.EditarCelda').hide();
            return;
        }
    });


    $("#QuitarControlador").click(function () {
        if ($("#EditarControladorInput").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("QuitarControlador", "Leaktest")',
                data: {
                    Controlador: $("#EditarControladorInput").val(),
                    IdResultado: $("#IdResultadoEditarContendor").val()
                },
                success: function (response) {
                    var json = JSON.parse(response);
                    if (json.validador == 0) {
                        var aux = 'success';
                    } else {
                        var aux = 'warning';
                    }
                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        $('#Tb_Resultado tbody tr:eq(' + localStorage.getItem("Fila") + ') td:eq(' + localStorage.getItem("Columna") + ')').text("")
                        $('#quitarcontrolador').hide();
                        $('#quitar').prop('checked', false);
                    })
                },
            });
        } else {
            $("#EditarControladorInput").css("background-color", "rgba(255, 0, 0, 0.4");
        }
    });

    //VALIDAR CONTROLADOR
    $("#ValidarControlador").click(function () {
        if ($("#EditarControlador").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarControlador", "Controlador")',
                data: { Controlador: $("#EditarControlador").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Controlador no existe en los registros</span>', 'warning');
                        $("#EditarControlador").val("");
                        return false;
                    } else if(response==2) {
                        swal('Ups!', '<span>Controlador se encuentra asociado a otro servicio</span>', 'warning');
                        $("#EditarControlador").val("");
                    }else if(response == 5){
                        swal('Ups!', '<span>Controlador se encuentra asociado a otro leak test</span>', 'warning');
                        $("#EditarControlador").val("");
                    }else
                    {

                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetBateriaByControlador", "Controlador")',
                            data: { Controlador: $("#EditarControlador").val() },
                            success: function (response) {
                                if (response!=null)
                                {
                                    var json = JSON.parse(response);
                                    if($('#EditarBateriaControlador').val()=="")
                                    {
                                        $("#EditarBateriaControlador").val(json.NumBateria);
                                        if(json.FechaAsociacion!=null)
                                        {
                                            $("#EditarFechaBateriaControlador").val(formatDate(json.FechaAsociacion));
                                        }
                                    }

                                }
                            }
                        });

                        swal('Validado!', '<span>Número controlador válido.</span>', 'success');
                        $(".EditarCelda").show();
                        $("#EditarCelda").show();

                    }
                }
            });
        }else {
            swal('Ups!', '<span>Debe ingresar un dato</span>', 'warning');
            return false;
        }
    });
    //VALIDAR CONTROLADOR

    //VALIDAR MODEM
    $("#ValidarModem").click(function () {
        if ($("#EditarModem").val() != "") {
            $.ajax({
                type: "POST",
                url: '@Url.Action("ValidarModem", "Controlador")',
                data: { Modem: $("#EditarModem").val() },
                success: function (response) {
                    if (response == 0) {
                        swal('Ups!', '<span>Modem no existe en los registros</span>', 'warning');
                        $("#EditarModem").val("");
                        return false;
                    } else if(response==2) {
                        swal('Ups!', '<span>Modem se encuentra asociado a otro servicio</span>', 'warning');
                        $("#EditarModem").val("");
                    }else if(response==5) {
                        swal('Ups!', '<span>Modem se encuentra asociado a otro leaktest</span>', 'warning');
                        $("#EditarModem").val("");
                    }else
                    {


                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetBateriaByModem", "Controlador")',
                            data: { Modem: $("#EditarModem").val() },
                            success: function (response) {
                                if (response!=null)
                                {
                                    var json = JSON.parse(response);
                                    if($('#EditarBateriaModem').val()=="")
                                    {
                                        $("#EditarBateriaModem").val(json.NumBateria);
                                        if(json.FechaAsociacion!=null)
                                        {
                                            $("#EditarFechaBateriaModem").val(formatDate(json.FechaAsociacion));
                                        }
                                    }
                                }
                            }
                        });

                        swal('Validado!', '<span>Número módem válido.</span>', 'success');
                        $(".EditarCelda").show();
                        $("#EditarCelda").show();

                    }
                }
            });
        }else {
            swal('Ups!', '<span>Debe ingresar un dato</span>', 'warning');
            return false;
        }
    });
    //VALIDAR MODEM

    //PREVALIDACION TECNICA
    $("#PreValidacionTecnica").click(function () {
        var Contenedores=[];
        var Controladores=[];
        var Resultados=[];
        var Depositos=[];
        var cuenta = $("#Tb_Resultado tbody tr").length;
        var count = 0;
        $("#Tb_Resultado tbody tr").each(function () {
            if ($(this).find(".dt-checkboxes").is(":checked")) {
                var validar = ValidarContenedor($(this).find("td:eq(7)").html());
                if(validar != 0){
                    Resultados.push($(this).find("td:eq(24)").html());
                    Contenedores.push($(this).find("td:eq(7)").html());
                    Controladores.push($(this).find("td:eq(10)").html());
                    Depositos.push($(this).find("td:eq(5)").html());
                    bool = true;
                } else {
                    Contenedores = [];
                    Controladores =[];
                    Resultados=[];
                    Depositos=[];
                    swal('Ups!', 'Debe seleccionar solo Leak Test con contenedor asociado.', 'error');
                    bool = false;
                    return false;
                }
            }else{
                count = count + 1;
                if(count == cuenta){
                    Contenedores = [];
                    Controladores =[];
                    Resultados=[];
                    Depositos=[];
                    swal('Ups!', 'Debe seleccionar al menos un registro.', 'error');
                    return false;
                }
            }
        });

        if(count != cuenta && bool == true){
            //Aqui se debe agregar la validacion de SP
            if(Depositos[0]!="NEPTUNIA" && Depositos[0]!="INVERSIONES MARITIMAS UNIVERSALES PERÚ")
            {
                $.ajax({
                    type: "POST",
                    url: '@Url.Action("ValidacionPreTecnica", "Leaktest")',
                    data: {
                        Resultados: Resultados,
                        Contenedores : Contenedores,
                        Controladores: Controladores
                    },
                    success: function (response) {
                        var json = JSON.parse(response);
                        var datostabla = "";
                        for(var i = 0; i < json.length; i++){
                            if(json[i].Validado == 0){
                                var validado = "Validado";
                            }else{
                                var validado = "No Validado";
                            }
                            datostabla = datostabla +
                                "<tr>" +
                                    "<td style='text-align:center'>" + json[i].IdResultado + "</td>" +
                                    "<td style='text-align:center'>" + json[i].Controladoraux + "</td>" +
                                    "<td style='text-align:center'>" + json[i].Contenedoraux + "</td>" +
                                    "<td style='text-align:center'>" + json[i].Commodityaux + "</td>" +
                                    "<td style='text-align:center'>" + validado + "</td>" +
                                "</tr>";
                        }

                        swal({
                            title: 'INFO DE LEAKTEST PRE VALIDADOS',
                            type: 'info',
                            html:
                                   "<table class='table table-striped table-bordered display nowrap'>" +
                                            "<tr>" +
                                                "<th> ID RESULTADO LEAKTEST </th>" +
                                                "<th> CONTROLADOR </th>" +
                                                "<th> CONTENEDOR </th>" +
                                                "<th>COMMODITY </th>" +
                                                "<th> ESTADO </th>" +
                                            "</tr>" + datostabla +
                                    "</table>",
                            customClass: 'swal-wide',
                            confirmButtonText: 'Aceptar',
                        }).then((result) => {
                            if (result == true) {
                                location.reload();
                            }
                        })
                    },
                });

            }else
            {
                swal('Ups!', 'La prevalidacion tecnica es solo realizable a Leaktest de Peru.', 'error');
                return false;
            }
        }
    });
    //PREVALIDACION TECNICA


    //VALIDACION CONTENEDOR EN LEAKTEST
    function ValidarContenedor(contenedores) {

        var count = contenedores.length;
        var i = 0;
        if (count != 0) {
            while (i != count) {
                if (contenedores[i] != "") {
                    i = i + 1;
                } else {
                    return 0;
                }
            }
            return i;
        } else {
            return 0;
        }
    }
    //VALIDACION CONTENEDOR EN LEAKTEST


    $("#AsociarBateria").click(function () {

        @*$.ajax({
            type: "POST",
            url: '@Url.Action("GetBateriasCargadas", "Bateria")',
            success: function (response) {
                var data = [];
                var json = JSON.parse(response);
                var cuenta = json.length;
                $('#BateriaAsociada').empty();
                var optionsAsString = "";
                var optionsAsString = "<option value='0'>Seleccione Bateria</option>";
                if (cuenta != 0) {
                    for (var i = 0; i < cuenta; i++) {
                        optionsAsString += "<option value='" + json[i].IdBateria + "'>" + json[i].NumBateria + "</option>";
                    }
                    $('#BateriaAsociada').append(optionsAsString);
                    $('#BateriaAsociada').selectpicker('refresh');
                }
            },
        });*@

        $('#tipo_esn').val("0");
        $("#tipo_esn").prop("disabled", true);
        $('#tipo_esn').selectpicker('refresh');
        $('#ESN').val("");
        $("#ESN").prop("disabled", true);
        $('#FechaAsociacion').val("");
        $("#FechaAsociacion").prop("disabled", true);
        $('#BateriaAsociada').val("");
        $("#BateriaAsociada").prop("disabled", false);
        $('#AsociarBateriaTrigger').trigger('click');

    });

     $("#Guardar_asociacion").click(function () {
        if ($("#ESN").val() == "") {
            $("#ESN").css("background-color", "rgba(255, 0, 0, 0.4)");
            $("button[data-id=tipo_esn]").css("background", "rgba(255, 0, 0, 0)");
            $("#FechaAsociacion").css("background-color", "rgba(255, 0, 0, 0)");
        } else if ($("#tipo_esn").val() == "0") {
            $("#ESN").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=tipo_esn]").css("background", "rgba(255, 0, 0, 0.4)");
            $("#FechaAsociacion").css("background-color", "rgba(255, 0, 0, 0)");
        } else if ($("#FechaAsociacion").val() == "" ) {
            $("#ESN").css("background-color", "rgba(255, 0, 0, 0)");
            $("button[data-id=tipo_esn]").css("background", "rgba(255, 0, 0, 0)");
            $("#FechaAsociacion").css("background-color", "rgba(255, 0, 0, 0.4)");
        } else
        {
            var tipoESN="";
            if ($('#tipo_esn').val()=="1")
            {
                tipoESN = "CONTROLADOR";
            } else
            {
                tipoESN = "MODEM";
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("AsociarBateria", "Bateria")',
                data: {
                    NumBateria: $('#BateriaAsociada').val(),
                    ESN: $('#ESN').val(),
                    TipoESN: tipoESN,
                    FechaAsociacion: $("#FechaAsociacion").val()
                },
                success: function (response) {

                    var json = JSON.parse(response);
                    if (json.validador == 0) {
                        var aux = 'success';
                    } else {
                        var aux = 'warning';
                    }
                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        location.reload();
                    })
                }
            });
        }
    });

    $("#ESN").blur(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("ValidarTipoESN", "Controlador")',
            data: {
                ESN: $('#ESN').val()
            },
            success: function (response) {
                if(response=="CONTROLADOR")
                {
                    $('#tipo_esn').val("1");
                    $('#tipo_esn').selectpicker('refresh');
                    $("#tipo_esn").prop("disabled", true);
                }else if (response=="MODEM")
                {
                    $('#tipo_esn').val("2");
                    $('#tipo_esn').selectpicker('refresh');
                    $("#tipo_esn").prop("disabled", true);
                }else
                {
                    $('#tipo_esn').val("0");
                    $("#tipo_esn").prop("disabled", false);
                    $('#tipo_esn').selectpicker('refresh');
                    $('#ESN').val("");
                    swal('Ups!', 'No existe registro de controlador o modem con el número de ESN ingresado.', 'error');
                    return false;
                }

            }
        });
    });

    $("#ValidarBateria").click(function () {
        $.ajax({
            type: "POST",
            url: '@Url.Action("ValidarBateria", "Bateria")',
            data: {
                NumBateria: $('#BateriaAsociada').val()
            },
            success: function (response) {
                var json = JSON.parse(response);
                if (json.validador == 1) {
                    var aux = 'success';
                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        $("#BateriaAsociada").prop("disabled", true);
                        $("#ESN").prop("disabled", false);
                        $("#tipo_esn").prop("disabled", false);
                        $('#FechaAsociacion').prop("disabled", false);
                        $.ajax({
                            type: "POST",
                            url: '@Url.Action("GetEquipoAsociadoByNumBateria", "Bateria")',
                            data: {
                                NumBateria: $('#BateriaAsociada').val()
                            },
                            success: function (response) {
                                var data = [];
                                var json = JSON.parse(response);
                                var cuenta = json.length;
                                if (cuenta != 0) {
                                    if (json.TipoESN == "CONTROLADOR")
                                    {
                                        $('#tipo_esn').val("1");
                                        $("#tipo_esn").prop("disabled", false);
                                        $('#tipo_esn').selectpicker('refresh');

                                    } else if (json.TipoESN == "CONTROLADOR")
                                    {
                                        $('#tipo_esn').val("2");
                                        $("#tipo_esn").prop("disabled", false);
                                        $('#tipo_esn').selectpicker('refresh');
                                    }else
                                    {
                                        $('#tipo_esn').val("0");
                                        $("#tipo_esn").prop("disabled", false);
                                        $('#tipo_esn').selectpicker('refresh');
                                    }

                                    $('#ESN').val(json.ESN);
                                    $('#FechaAsociacion').val(formatDate(json.FechaAsociacion));
                                }
                            },
                        });
                    })
                } else if (json.validador == 2)
                {
                    var aux = 'warning';

                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        $("#BateriaAsociada").prop("disabled", true);
                        $("#ESN").prop("disabled", false);
                        $("#tipo_esn").prop("disabled", false);
                        $('#FechaAsociacion').prop("disabled", false);
                    })
                }else
                {
                    var aux = 'warning';

                    swal({
                        title: '',
                        text: json.Mensaje,
                        type: aux,
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Aceptar'
                    }).then((result) => {
                        $("#BateriaAsociada").val("");
                    })
                }
            }
        });
    });

</script>