@{
    if (Session["lang"].ToString() == "es_ES")
    {
        ViewBag.Title = "AplicacionTecnica";
        Layout = "~/Views/MasterPage.cshtml";
    }
    else
    {
        ViewBag.Title = "TechnicalApplication";
        Layout = "~/Views/MasterPageIngles.cshtml";
    }

}

<div class="row">
    <h1>Crear Forecast Vacío</h1>
    <div class="separator"></div>
    <div class="col-lg-4 col-md-4 col-xs-12 form-group">
        <select class="form-control" id="LineaNegocio">
            <option>Seleccione Línea de Negocio</option>
            <option>Atmosfera Controlada</option>
            <option>Atmosfera Modificada</option>
        </select>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-12">
        <select class="form-control" id="Pais">
            <option>Seleccione País</option>
            <option>Chile</option>
            <option>México</option>
        </select>
    </div>
   <!--Segun la forma de diego no va Puerto de Origen-->
    <div class="col-lg-4 col-md-4 col-xs-12">
        <select class="form-control" id="PuertoOrigen">
            <option>Seleccione Puerto Origen</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
    </div>
</div>
<div class="row">
    <div class="col-lg-3 col-md-3 col-xs-12">
        <input type="number" placeholder="Ingrese Semana de Inicio" class="form-control" min="1" max="52" id="SemanaInicio" style="text-align:center; text-align-last:center;">
    </div>
    <div class="col-lg-3 col-md-3 col-xs-12">
        <select class="form-control" id="Ano" style="text-align:center; text-align-last:center;">
            <option>Seleccione Año</option>
            <option>2017</option>
            <option>2018</option>
            <option>2019</option>
            <option>2020</option>
        </select>
    </div>
    <div class="col-lg-3 col-md-3 col-xs-12">
        <input type="number" placeholder="Ingrese Semana de Fin" class="form-control" max="52" min="2" id="SemanaFin"  style="text-align:center; text-align-last:center;">
    </div>
    <div class="col-lg-3 col-md-3 col-xs-12">
        <select class="form-control" id="Ano" style="text-align:center; text-align-last:center;">
            <option>Seleccione Año</option>
            <option>2017</option>
            <option>2018</option>
            <option>2019</option>
            <option>2020</option>
        </select>
    </div>
</div>
<div class="separator"></div>
<div class="row">
    <div class="col-lg-12 col-md-12 col-xs-12">
        <button type="button" id="CreateForecastVacio" class="btn btn-success">Crear Forecast</button>
        <button type="button" id="addRow" class="btn btn-success" style="display:none;">Crear Forecast</button>
    </div>
</div>

<div class="row" style="display:none;" id="TablaHistoricoLiventus">
    <div class="separator"></div>
    <h3>Historico Liventus</h3>
    <table id="HistoricoLiventus" class="display table-bordered">
        <thead>
            <tr>
                <th>Semana</th>
                <th>Commodity1</th>
                <th>Commodity2</th>
                <th>Commodity3</th>
                <th>Commodity4</th>
            </tr>
        </thead>
    </table>
</div>

<div class="row" style="display:none;" id="TablahistoricoExportador">
    <div class="separator"></div>
    <h3>Historico Real</h3>
    <div class="col-lg-4 col-md-4 col-xs-4 form-group">
        <select class="form-control" id="Commodity">
            <option>Seleccione Commodity</option>
            <option>1</option>
            <option>2</option>
        </select>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-4">
        <select class="form-control" id="Ano" style="text-align:center; text-align-last:center;">
            <option>Seleccione Año</option>
            <option>2017</option>
            <option>2018</option>
            <option>2019</option>
            <option>2020</option>
        </select>
    </div>
    <table id="HistoricoExportador" class="display table-bordered">
        <thead>
            <tr>
                <th>Semana</th>
                <th>Exportador1</th>
                <th>Exportador2</th>
                <th>Exportador3</th>
                <th>Exportador4</th>
            </tr>
        </thead>
    </table>
</div>

<div class="row" style="display:none;" id="MarketSharediv">
    <div class="separator"></div>
    <h3>Market Share</h3>
    <div class="col-lg-4 col-md-4 col-xs-4 form-group">
        <select class="form-control" id="Commodity">
            <option>Seleccione Commodity</option>
            <option>1</option>
            <option>2</option>
        </select>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-4">
        <select class="form-control" id="Ano" style="text-align:center; text-align-last:center;">
            <option>Seleccione Año</option>
            <option>2017</option>
            <option>2018</option>
            <option>2019</option>
            <option>2020</option>
        </select>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-4">
        <input type=number class="form-control" id=CantidadComercial style=text-align:center; text-align-last:center; placeholder="Ingrese Cantidad Estimada">
    </div>
    <table id="MarketShare" class="display table-bordered">
        <thead>
            <tr>
                <th>Exportador</th>
                <th>Total Liventus</th>
                <th>Total Mercado</th>
                <th>Market Share</th>
            </tr>
        </thead>
    </table>
</div>

<div class="row" style="display:none;" id="Tabla">
    <div class="separator"></div>
    <table id="ForecastVacio" class="display table-bordered" >
        <thead>
            <tr>
                <th>Semana</th>
                <th>Total</th>
                <th>Constante</th>
                <th>Crecimiento</th>
            </tr>
        </thead>
    </table>
</div>

<script>
    $(document).ready(function () {

        var historico = $('#HistoricoLiventus').DataTable();
        var historicoexportador = $('#HistoricoExportador').DataTable();
        var MarketShare = $('#MarketShare').DataTable();
        //Traer Información Historica según la semana indicada por el Usuario.
        var t = $('#ForecastVacio').DataTable();

        $('#CreateForecastVacio').on('click', function () {     
            if ($("#SemanaInicio").val() == 0) {
                alert("Semana de Inicio no puede ser 0");
            } else if ($("#SemanaFin").val() == 0) {
                alert("Semana de Término no puede ser 0");
            } else if ($("#SemanaFin").val() < $("#SemanaInicio").val()) {
                alert("Semana de Término no puede ser menor que Semana de Inicio");
            } else {
                t.clear().draw();
                $("#Tabla").show();
                $("#TablaHistoricoLiventus").show();
                $("#TablahistoricoExportador").show();
                $("#MarketSharediv").show();   
                counter = $("#SemanaInicio").val();
                var count = ($("#SemanaFin").val() - $("#SemanaInicio").val()) + 1;
                for (var i = 0; i < count; i++) {
                    $('#addRow').click();
                }
            }
        });

        $('#addRow').on('click', function () {
            t.row.add([
                counter,
                "<input type=number id=Total style=text-align:center; text-align-last:center; value=0>",
                "<input type=number id=Constante style=text-align:center; text-align-last:center;>",
                "<input type=number id=Crecimiento style=text-align:center; text-align-last:center;>"
            ]).draw(false);

            counter++;
        });
    });

</script>