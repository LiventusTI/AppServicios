@{
    if (Session["lang"].ToString() == "es_ES")
    {
        ViewBag.Title = "AplicacionTecnica";
        Layout = "~/Views/MasterPage.cshtml";
    }
    else
    {
        ViewBag.Title = "TechnicalApplication";
        Layout = "~/Views/MasterPageIngles.cshtml";
    }

}

<div class="row">
    <h1>Crear Forecast</h1>
    <div class="separator"></div>
    <div class="col-lg-6 col-md-6 col-xs-12 form-group">
        <select class="form-control" id="LineaNegocio">
            <option>Seleccione Línea de Negocio</option>
            <option>Atmosfera Controlada</option>
            <option>Atmosfera Modificada</option>
        </select>
    </div>
    <div class="col-lg-6 col-md-6 col-xs-12">
        <select class="form-control" id="PuertoOrigen">
            <option>Seleccione Puerto Origen</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
    </div>
</div>
<div class="row">
    <div class="col-lg-4 col-md-4 col-xs-12">
        <input type="number" class="form-control" placeholder="Ingrese Semana de Inicio" min="1" max="52" id="SemanaInicio" style="text-align:center; text-align-last:center;">
    </div>
    <div class="col-lg-4 col-md-4 col-xs-12">
        <input type="number" class="form-control" placeholder="Ingrese Semana de Fin" max="52" min="2" id="SemanaFin" style="text-align:center; text-align-last:center;">
    </div>
    <div class="col-lg-4 col-md-4 col-xs-12">
        <select class="form-control" id="Ano" style="text-align:center; text-align-last:center;">
            <option>Seleccione Año</option>
            <option>2017</option>
            <option>2018</option>
            <option>2019</option>
            <option>2020</option>
        </select>
    </div>
</div>
<div class="separator"></div>
<div class="row">
    <div class="col-lg-12 col-md-12 col-xs-12">
        <button type="button" id="CreateForecast" class="btn btn-success">Crear Forecast</button>
        <button type="button" id="addRow" class="btn btn-success" style="display:none;">Crear Forecast</button>
    </div>
</div>
<div class="separator"></div>
<div class="row" style="display:none;" id="Tabla">
    <table id="Forecast" class="display table-bordered">
        <thead>
            <tr>
                <th>Semana</th>
                <th>Total</th>
                <th>Constante</th>
                <th>Crecimiento</th>
            </tr>
        </thead>
    </table>
</div>
<script>
    $(document).ready(function () {

        var t = $('#Forecast').DataTable();

        $('#CreateForecast').on('click', function () {
            if($("#SemanaInicio").val() == 0 ){
                alert("Semana de Inicio no puede ser 0");
            }else if($("#SemanaFin").val() == 0){
                alert("Semana de Término no puede ser 0");
            }else if($("#SemanaFin").val() < $("#SemanaInicio").val() ){
                alert("Semana de Término no puede ser menor que Semana de Inicio");
            }else {
                t.clear().draw();
                $("#Tabla").show();
                counter = $("#SemanaInicio").val();
                var count = ($("#SemanaFin").val() - $("#SemanaInicio").val()) + 1;
                for (var i = 0; i < count; i++) {
                    $('#addRow').click();
                }
            }
        });

        $('#addRow').on('click', function () {
            t.row.add([
                counter,
                "<input type=number id=Total style=text-align:center; text-align-last:center; value=0>",
                "<input type=number id=Constante style=text-align:center; text-align-last:center;>",
                "<input type=number id=Crecimiento style=text-align:center; text-align-last:center;>"
            ]).draw(false);

            counter++;
        });
    });

</script>
